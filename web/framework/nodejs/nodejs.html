<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.38" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://chenyl8848.github.io/web/framework/nodejs/nodejs.html"><meta property="og:site_name" content="Javaé™ˆåºå‘˜"><meta property="og:title" content="Node.js ä¸‡å­—å…¥é—¨æ•™ç¨‹"><meta property="og:type" content="article"><meta property="og:updated_time" content="2024-10-02T03:11:43.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="Node.js"><meta property="article:tag" content="MongoDB"><meta property="article:published_time" content="2023-05-31T00:00:00.000Z"><meta property="article:modified_time" content="2024-10-02T03:11:43.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_3316994_227lwxrw41z.css"><title>Node.js ä¸‡å­—å…¥é—¨æ•™ç¨‹ | Javaé™ˆåºå‘˜</title><meta name="description" content="Javaé™ˆåºå‘˜çš„ä¸ªäººåšå®¢ç½‘ç«™">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.7c8a6ce0.css">
    <link rel="modulepreload" href="/assets/app.06d697e7.js"><link rel="modulepreload" href="/assets/nodejs.html.0eebf012.js"><link rel="modulepreload" href="/assets/nodejs.html.86126f6f.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/" class="home-link"><img class="logo" src="/logo.webp" alt="Javaé™ˆåºå‘˜"><!----><span class="site-name hide-in-pad">Javaé™ˆåºå‘˜</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" arialabel="é¦–é¡µ"><i class="icon iconfont icon-home"></i>é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="åç«¯"><span class="title"><i class="icon iconfont icon-rearend"></i>åç«¯</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/rearend/java/" class="nav-link" arialabel="Java"><i class="icon iconfont icon-java"></i>Java<!----></a></li><li class="dropdown-item"><a href="/rearend/spring/" class="nav-link" arialabel="Spring"><i class="icon iconfont icon-spring"></i>Spring<!----></a></li><li class="dropdown-item"><a href="/rearend/springBoot/" class="nav-link" arialabel="Spring Boot"><i class="icon iconfont icon-springboot"></i>Spring Boot<!----></a></li><li class="dropdown-item"><a href="/rearend/microServices/" class="nav-link" arialabel="å¾®æœåŠ¡"><i class="icon iconfont icon-microServices"></i>å¾®æœåŠ¡<!----></a></li><li class="dropdown-item"><a href="/rearend/dataStructure/" class="nav-link" arialabel="æ•°æ®ç»“æ„"><i class="icon iconfont icon-dataStructure"></i>æ•°æ®ç»“æ„<!----></a></li><li class="dropdown-item"><a href="/rearend/algorithm/" class="nav-link" arialabel="ç®—æ³•"><i class="icon iconfont icon-algorithm"></i>ç®—æ³•<!----></a></li><li class="dropdown-item"><a href="/rearend/designPattern/" class="nav-link" arialabel="è®¾è®¡æ¨¡å¼"><i class="icon iconfont icon-designPattern"></i>è®¾è®¡æ¨¡å¼<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="ä¸­é—´ä»¶"><span class="title"><i class="icon iconfont icon-middleware"></i>ä¸­é—´ä»¶</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/middleware/database/" class="nav-link" arialabel="æ•°æ®åº“"><i class="icon iconfont icon-database"></i>æ•°æ®åº“<!----></a></li><li class="dropdown-item"><a href="/middleware/noSQL/" class="nav-link" arialabel="NoSQL"><i class="icon iconfont icon-noSQL"></i>NoSQL<!----></a></li><li class="dropdown-item"><a href="/middleware/mq/" class="nav-link" arialabel="MQ"><i class="icon iconfont icon-MQ"></i>MQ<!----></a></li><li class="dropdown-item"><a href="/middleware/zookeeper/" class="nav-link" arialabel="ZooKeeper"><i class="icon iconfont icon-zookeeper"></i>ZooKeeper<!----></a></li><li class="dropdown-item"><a href="/middleware/elasticsearch/" class="nav-link" arialabel="ElasticSearch"><i class="icon iconfont icon-elasticsearch"></i>ElasticSearch<!----></a></li><li class="dropdown-item"><a href="/middleware/prometheus/" class="nav-link" arialabel="Prometheus"><i class="icon iconfont icon-prometheus"></i>Prometheus<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="æœåŠ¡å™¨"><span class="title"><i class="icon iconfont icon-server"></i>æœåŠ¡å™¨</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/server/linux/" class="nav-link" arialabel="Linux"><i class="icon iconfont icon-linux"></i>Linux<!----></a></li><li class="dropdown-item"><a href="/server/docker/" class="nav-link" arialabel="Docker"><i class="icon iconfont icon-docker"></i>Docker<!----></a></li><li class="dropdown-item"><a href="/server/kubernetes/" class="nav-link" arialabel="Kubernetes"><i class="icon iconfont icon-kubernetes"></i>Kubernetes<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="AI"><span class="title"><i class="icon iconfont icon-wuguan"></i>AI</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/ai/assistant/" class="nav-link" arialabel="AI åŠ©æ‰‹"><i class="icon iconfont icon-Cursor"></i>AI åŠ©æ‰‹<!----></a></li><li class="dropdown-item"><a href="/ai/framework/" class="nav-link" arialabel="AI æ¡†æ¶"><i class="icon iconfont icon-Aisucai"></i>AI æ¡†æ¶<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="å‰ç«¯"><span class="title"><i class="icon iconfont icon-wangye"></i>å‰ç«¯</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ¡†æ¶</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/framework/js/" class="nav-link" arialabel="JavaScript"><i class="icon iconfont icon-java_script"></i>JavaScript<!----></a></li><li class="dropdown-subitem"><a href="/web/framework/nodejs/" class="nav-link active" arialabel="Node.js"><i class="icon iconfont icon-node-js"></i>Node.js<!----></a></li><li class="dropdown-subitem"><a href="/web/framework/vue/" class="nav-link" arialabel="Vue.js"><i class="icon iconfont icon-vue"></i>Vue.js<!----></a></li><li class="dropdown-subitem"><a href="/web/framework/react/" class="nav-link" arialabel="React"><i class="icon iconfont icon-react"></i>React<!----></a></li><li class="dropdown-subitem"><a href="/web/framework/mp/" class="nav-link" arialabel="å°ç¨‹åº"><i class="icon iconfont icon-xiaochengxu"></i>å°ç¨‹åº<!----></a></li><li class="dropdown-subitem"><a href="/web/framework/blog/" class="nav-link" arialabel="Blog"><i class="icon iconfont icon-folder-vuepress"></i>Blog<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="ç´¢å¼•"><span class="title"><i class="icon iconfont icon-index"></i>ç´¢å¼•</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article/" class="nav-link" arialabel="æ–‡ç« "><i class="icon iconfont icon-articles"></i>æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/category/java/" class="nav-link" arialabel="åˆ†ç±»"><i class="icon iconfont icon-category"></i>åˆ†ç±»<!----></a></li><li class="dropdown-item"><a href="/tag/" class="nav-link" arialabel="æ ‡ç­¾"><i class="icon iconfont icon-tag"></i>æ ‡ç­¾<!----></a></li><li class="dropdown-item"><a href="/timeline/" class="nav-link" arialabel="æ—¶é—´è½´"><i class="icon iconfont icon-timeLine"></i>æ—¶é—´è½´<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzkzOTM3NjAzOQ==&amp;action=getalbum&amp;album_id=2783119709868212224&amp;scene=126&amp;sessionid=-659761542&amp;uin=&amp;key=&amp;devicetype=Windows+11+x64&amp;version=6309092b&amp;lang=zh_CN&amp;ascene=0&amp;session_us=gh_b840974cfe99" rel="noopener noreferrer" target="_blank" arialabel="å¼€æºé¡¹ç›®" class="nav-link"><i class="icon iconfont icon-note"></i>å¼€æºé¡¹ç›®<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><!----></div><div class="nav-item"><a class="repo-link" href="https://github.com/chenyl8848/chenyl8848.github.io" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" arialabelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" arialabelledby="outlook"><title id="outlook" lang="en">outlook icon</title><g fill="currentColor"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></g></svg><div class="outlook-dropdown"><!----></div></button></div><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/web/framework/nodejs/" class="nav-link sidebar-link sidebar-page" arialabel="Node.js"><i class="icon iconfont icon-node-js"></i>Node.js<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/web/framework/nodejs/nodejs.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" arialabel="Node.js ä¸‡å­—å…¥é—¨æ•™ç¨‹"><!---->Node.js ä¸‡å­—å…¥é—¨æ•™ç¨‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_0-åŸºç¡€æ¦‚å¿µ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="0. åŸºç¡€æ¦‚å¿µ"><!---->0. åŸºç¡€æ¦‚å¿µ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_1-buffer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1. Buffer"><!---->1. Buffer<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_1-1-æ¦‚å¿µ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.1 æ¦‚å¿µ"><!---->1.1 æ¦‚å¿µ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_1-2-ç‰¹ç‚¹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2 ç‰¹ç‚¹"><!---->1.2 ç‰¹ç‚¹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_1-3-ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.3 ä½¿ç”¨"><!---->1.3 ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-fs-æ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2. fs æ¨¡å—"><!---->2. fs æ¨¡å—<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-1-æ–‡ä»¶å†™å…¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.1 æ–‡ä»¶å†™å…¥"><!---->2.1 æ–‡ä»¶å†™å…¥<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-2-æ–‡ä»¶è¯»å–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2 æ–‡ä»¶è¯»å–"><!---->2.2 æ–‡ä»¶è¯»å–<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-3-æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.3 æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å"><!---->2.3 æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-4-æ–‡ä»¶åˆ é™¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.4 æ–‡ä»¶åˆ é™¤"><!---->2.4 æ–‡ä»¶åˆ é™¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-5-æ–‡ä»¶å¤¹æ“ä½œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.5 æ–‡ä»¶å¤¹æ“ä½œ"><!---->2.5 æ–‡ä»¶å¤¹æ“ä½œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-6-æŸ¥çœ‹èµ„æºçŠ¶æ€" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.6 æŸ¥çœ‹èµ„æºçŠ¶æ€"><!---->2.6 æŸ¥çœ‹èµ„æºçŠ¶æ€<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-7-ç›¸å¯¹è·¯å¾„é—®é¢˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.7 ç›¸å¯¹è·¯å¾„é—®é¢˜"><!---->2.7 ç›¸å¯¹è·¯å¾„é—®é¢˜<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-8-dirname" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.8 __dirname"><!---->2.8 __dirname<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-9-ç»ƒä¹ " class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.9 ç»ƒä¹ "><!---->2.9 ç»ƒä¹ <!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_3-path-æ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3. path æ¨¡å—"><!---->3. path æ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-http-æ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4. http æ¨¡å—"><!---->4. http æ¨¡å—<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-1-åˆ›å»º-http-æœåŠ¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.1 åˆ›å»º http æœåŠ¡"><!---->4.1 åˆ›å»º http æœåŠ¡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-2-è·å–-http-è¯·æ±‚æŠ¥æ–‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.2 è·å– http è¯·æ±‚æŠ¥æ–‡"><!---->4.2 è·å– http è¯·æ±‚æŠ¥æ–‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-3-è®¾ç½®-http-å“åº”æŠ¥æ–‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.3 è®¾ç½® http å“åº”æŠ¥æ–‡"><!---->4.3 è®¾ç½® http å“åº”æŠ¥æ–‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-4-ç»ƒä¹ " class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.4 ç»ƒä¹ "><!---->4.4 ç»ƒä¹ <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-5-é™æ€èµ„æºæœåŠ¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.5 é™æ€èµ„æºæœåŠ¡"><!---->4.5 é™æ€èµ„æºæœåŠ¡<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_5-æ¨¡å—åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5. æ¨¡å—åŒ–"><!---->5. æ¨¡å—åŒ–<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_5-1-åŸºç¡€æ¦‚å¿µ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.1 åŸºç¡€æ¦‚å¿µ"><!---->5.1 åŸºç¡€æ¦‚å¿µ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_5-2-æ¨¡å—æš´éœ²" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.2 æ¨¡å—æš´éœ²"><!---->5.2 æ¨¡å—æš´éœ²<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_5-3-æ¨¡å—å¯¼å…¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.3 æ¨¡å—å¯¼å…¥"><!---->5.3 æ¨¡å—å¯¼å…¥<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_5-4-æ¨¡å—å¯¼å…¥æµç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.4 æ¨¡å—å¯¼å…¥æµç¨‹"><!---->5.4 æ¨¡å—å¯¼å…¥æµç¨‹<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-åŒ…ç®¡ç†å·¥å…·" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6. åŒ…ç®¡ç†å·¥å…·"><!---->6. åŒ…ç®¡ç†å·¥å…·<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-1-åŸºç¡€æ¦‚å¿µ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.1 åŸºç¡€æ¦‚å¿µ"><!---->6.1 åŸºç¡€æ¦‚å¿µ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-2-npm" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.2 npm"><!---->6.2 npm<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-2-2-åŒ…ç®¡ç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.2.2 åŒ…ç®¡ç†"><!---->6.2.2 åŒ…ç®¡ç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-2-3-å¯åŠ¨é¡¹ç›®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.2.3 å¯åŠ¨é¡¹ç›®"><!---->6.2.3 å¯åŠ¨é¡¹ç›®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-3-cnpm" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.3 cnpm"><!---->6.3 cnpm<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-4-yarn" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.4 yarn"><!---->6.4 yarn<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-5-ç®¡ç†å‘å¸ƒåŒ…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.5 ç®¡ç†å‘å¸ƒåŒ…"><!---->6.5 ç®¡ç†å‘å¸ƒåŒ…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-6-nvm" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.6 nvm"><!---->6.6 nvm<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-express-æ¡†æ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="7. express æ¡†æ¶"><!---->7. express æ¡†æ¶<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-1-ä»‹ç»ä¸ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="7.1 ä»‹ç»ä¸ä½¿ç”¨"><!---->7.1 ä»‹ç»ä¸ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-2-è·¯ç”±" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="7.2 è·¯ç”±"><!---->7.2 è·¯ç”±<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-3-ä¸­é—´ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="7.3 ä¸­é—´ä»¶"><!---->7.3 ä¸­é—´ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-4-ejs-æ¨¡æ¿å¼•æ“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="7.4 EJS æ¨¡æ¿å¼•æ“"><!---->7.4 EJS æ¨¡æ¿å¼•æ“<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-5-è„šæ‰‹æ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="7.5 è„šæ‰‹æ¶"><!---->7.5 è„šæ‰‹æ¶<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_8-mongodb" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8. MongoDB"><!---->8. MongoDB<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_8-1-åŸºç¡€æ¦‚å¿µ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.1 åŸºç¡€æ¦‚å¿µ"><!---->8.1 åŸºç¡€æ¦‚å¿µ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_8-2-æ“ä½œå‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.2 æ“ä½œå‘½ä»¤"><!---->8.2 æ“ä½œå‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_8-3-mongooose" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.3 Mongooose"><!---->8.3 Mongooose<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_9-æ¥å£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9. æ¥å£"><!---->9. æ¥å£<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_9-1-restful-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.1 RESTful API"><!---->9.1 RESTful API<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_9-2-json-server" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.2 json-server"><!---->9.2 json-server<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_10-ä¼šè¯æ§åˆ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="10. ä¼šè¯æ§åˆ¶"><!---->10. ä¼šè¯æ§åˆ¶<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_10-1-cookie" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="10.1 cookie"><!---->10.1 cookie<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_10-2-session" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="10.2 session"><!---->10.2 session<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_10-3-token" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="10.3 token"><!---->10.3 token<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Node.js ä¸‡å­—å…¥é—¨æ•™ç¨‹</h1><div class="article-info"><span class="author-info" arialabel="ä½œè€…ğŸ–Š" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" arialabelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><a class="author-item" href="https://chenyl8848.github.io" target="_blank" rel="noopener noreferrer">Javaé™ˆåºå‘˜</a></span><span property="author" content="Javaé™ˆåºå‘˜"></span></span><!----><span class="date-info" arialabel="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" arialabelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2023å¹´5æœˆ31æ—¥</span><meta property="datePublished" content="2023-05-31T00:00:00.000Z"></span><span class="category-info" arialabel="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" arialabelledby="category"><title id="category" lang="en">category icon</title><g fill="currentColor"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></g></svg><ul class="categories-wrapper"><li class="category category6 clickable" role="navigation">å‰ç«¯</li><meta property="articleSection" content="å‰ç«¯"></ul></span><span arialabel="æ ‡ç­¾ğŸ·" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" arialabelledby="tag"><title id="tag" lang="en">tag icon</title><g fill="currentColor"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></g></svg><ul class="tags-wrapper"><li class="tag tag4 clickable" role="navigation">Node.js</li><li class="tag tag3 clickable" role="navigation">MongoDB</li></ul><meta property="keywords" content="Node.js,MongoDB"></span><span class="reading-time-info" arialabel="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" arialabelledby="timer"><title id="timer" lang="en">timer icon</title><g fill="currentColor"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></g></svg><span>å¤§çº¦ 52 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT52M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_0-åŸºç¡€æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level2">0. åŸºç¡€æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_1-buffer" class="router-link-active router-link-exact-active toc-link level2">1. Buffer</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_1-1-æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level3">1.1 æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_1-2-ç‰¹ç‚¹" class="router-link-active router-link-exact-active toc-link level3">1.2 ç‰¹ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_1-3-ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level3">1.3 ä½¿ç”¨</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-fs-æ¨¡å—" class="router-link-active router-link-exact-active toc-link level2">2. fs æ¨¡å—</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-1-æ–‡ä»¶å†™å…¥" class="router-link-active router-link-exact-active toc-link level3">2.1 æ–‡ä»¶å†™å…¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-2-æ–‡ä»¶è¯»å–" class="router-link-active router-link-exact-active toc-link level3">2.2 æ–‡ä»¶è¯»å–</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-3-æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å" class="router-link-active router-link-exact-active toc-link level3">2.3 æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-4-æ–‡ä»¶åˆ é™¤" class="router-link-active router-link-exact-active toc-link level3">2.4 æ–‡ä»¶åˆ é™¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-5-æ–‡ä»¶å¤¹æ“ä½œ" class="router-link-active router-link-exact-active toc-link level3">2.5 æ–‡ä»¶å¤¹æ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-6-æŸ¥çœ‹èµ„æºçŠ¶æ€" class="router-link-active router-link-exact-active toc-link level3">2.6 æŸ¥çœ‹èµ„æºçŠ¶æ€</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-7-ç›¸å¯¹è·¯å¾„é—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">2.7 ç›¸å¯¹è·¯å¾„é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-8-dirname" class="router-link-active router-link-exact-active toc-link level3">2.8 __dirname</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_2-9-ç»ƒä¹ " class="router-link-active router-link-exact-active toc-link level3">2.9 ç»ƒä¹ </a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_3-path-æ¨¡å—" class="router-link-active router-link-exact-active toc-link level2">3. path æ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-http-æ¨¡å—" class="router-link-active router-link-exact-active toc-link level2">4. http æ¨¡å—</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-1-åˆ›å»º-http-æœåŠ¡" class="router-link-active router-link-exact-active toc-link level3">4.1 åˆ›å»º http æœåŠ¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-2-è·å–-http-è¯·æ±‚æŠ¥æ–‡" class="router-link-active router-link-exact-active toc-link level3">4.2 è·å– http è¯·æ±‚æŠ¥æ–‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-3-è®¾ç½®-http-å“åº”æŠ¥æ–‡" class="router-link-active router-link-exact-active toc-link level3">4.3 è®¾ç½® http å“åº”æŠ¥æ–‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-4-ç»ƒä¹ " class="router-link-active router-link-exact-active toc-link level3">4.4 ç»ƒä¹ </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_4-5-é™æ€èµ„æºæœåŠ¡" class="router-link-active router-link-exact-active toc-link level3">4.5 é™æ€èµ„æºæœåŠ¡</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_5-æ¨¡å—åŒ–" class="router-link-active router-link-exact-active toc-link level2">5. æ¨¡å—åŒ–</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_5-1-åŸºç¡€æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level3">5.1 åŸºç¡€æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_5-2-æ¨¡å—æš´éœ²" class="router-link-active router-link-exact-active toc-link level3">5.2 æ¨¡å—æš´éœ²</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_5-3-æ¨¡å—å¯¼å…¥" class="router-link-active router-link-exact-active toc-link level3">5.3 æ¨¡å—å¯¼å…¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_5-4-æ¨¡å—å¯¼å…¥æµç¨‹" class="router-link-active router-link-exact-active toc-link level3">5.4 æ¨¡å—å¯¼å…¥æµç¨‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-åŒ…ç®¡ç†å·¥å…·" class="router-link-active router-link-exact-active toc-link level2">6. åŒ…ç®¡ç†å·¥å…·</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-1-åŸºç¡€æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level3">6.1 åŸºç¡€æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-2-npm" class="router-link-active router-link-exact-active toc-link level3">6.2 npm</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-2-2-åŒ…ç®¡ç†" class="router-link-active router-link-exact-active toc-link level3">6.2.2 åŒ…ç®¡ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-2-3-å¯åŠ¨é¡¹ç›®" class="router-link-active router-link-exact-active toc-link level3">6.2.3 å¯åŠ¨é¡¹ç›®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-3-cnpm" class="router-link-active router-link-exact-active toc-link level3">6.3 cnpm</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-4-yarn" class="router-link-active router-link-exact-active toc-link level3">6.4 yarn</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-5-ç®¡ç†å‘å¸ƒåŒ…" class="router-link-active router-link-exact-active toc-link level3">6.5 ç®¡ç†å‘å¸ƒåŒ…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_6-6-nvm" class="router-link-active router-link-exact-active toc-link level3">6.6 nvm</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-express-æ¡†æ¶" class="router-link-active router-link-exact-active toc-link level2">7. express æ¡†æ¶</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-1-ä»‹ç»ä¸ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level3">7.1 ä»‹ç»ä¸ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-2-è·¯ç”±" class="router-link-active router-link-exact-active toc-link level3">7.2 è·¯ç”±</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-3-ä¸­é—´ä»¶" class="router-link-active router-link-exact-active toc-link level3">7.3 ä¸­é—´ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-4-ejs-æ¨¡æ¿å¼•æ“" class="router-link-active router-link-exact-active toc-link level3">7.4 EJS æ¨¡æ¿å¼•æ“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_7-5-è„šæ‰‹æ¶" class="router-link-active router-link-exact-active toc-link level3">7.5 è„šæ‰‹æ¶</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_8-mongodb" class="router-link-active router-link-exact-active toc-link level2">8. MongoDB</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_8-1-åŸºç¡€æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level3">8.1 åŸºç¡€æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_8-2-æ“ä½œå‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">8.2 æ“ä½œå‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_8-3-mongooose" class="router-link-active router-link-exact-active toc-link level3">8.3 Mongooose</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_9-æ¥å£" class="router-link-active router-link-exact-active toc-link level2">9. æ¥å£</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_9-1-restful-api" class="router-link-active router-link-exact-active toc-link level3">9.1 RESTful API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_9-2-json-server" class="router-link-active router-link-exact-active toc-link level3">9.2 json-server</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_10-ä¼šè¯æ§åˆ¶" class="router-link-active router-link-exact-active toc-link level2">10. ä¼šè¯æ§åˆ¶</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_10-1-cookie" class="router-link-active router-link-exact-active toc-link level3">10.1 cookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_10-2-session" class="router-link-active router-link-exact-active toc-link level3">10.2 session</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/framework/nodejs/nodejs.html#_10-3-token" class="router-link-active router-link-exact-active toc-link level3">10.3 token</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><h1 id="node-js-ä¸‡å­—å…¥é—¨æ•™ç¨‹" tabindex="-1"><a class="header-anchor" href="#node-js-ä¸‡å­—å…¥é—¨æ•™ç¨‹" aria-hidden="true">#</a> <code>Node.js</code> ä¸‡å­—å…¥é—¨æ•™ç¨‹</h1><h2 id="_0-åŸºç¡€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_0-åŸºç¡€æ¦‚å¿µ" aria-hidden="true">#</a> 0. åŸºç¡€æ¦‚å¿µ</h2><blockquote><p><code>Node.js</code> æ˜¯ä¸€ä¸ªåŸºäº <code>Chrome V8</code> å¼•æ“çš„ <code>JavaScript</code> è¿è¡Œç¯å¢ƒï¼Œä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ <code>I/O</code> æ¨¡å‹ï¼Œè®© <code>JavaScript</code> è¿è¡Œåœ¨æœåŠ¡ç«¯çš„å¼€å‘å¹³å°ã€‚</p></blockquote><p>å®˜æ–¹åœ°å€ï¼šhttps://nodejs.org/en</p><p>ä¸­æ–‡åœ°å€ï¼šhttps://nodejs.org/zh-cn</p><p>ä»£ç åˆä½“éªŒï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>console.log(&quot;hello NodeJS&quot;)

// 1.è¿›å…¥åˆ°å¯¹åº” js æ–‡ä»¶çš„ç›®å½•ä¸‹
// 2.æ‰§è¡Œ node 1-hello.js
// 3.è¾“å‡ºï¼šhello NodeJS
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ç¤ºä¾‹ä»£ç åœ°å€ï¼šhttps://github.com/chenyl8848/node.js-study</p><h2 id="_1-buffer" tabindex="-1"><a class="header-anchor" href="#_1-buffer" aria-hidden="true">#</a> 1. <code>Buffer</code></h2><h3 id="_1-1-æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_1-1-æ¦‚å¿µ" aria-hidden="true">#</a> 1.1 æ¦‚å¿µ</h3><blockquote><p><code>Buffer</code> æ˜¯ä¸€ä¸ªç±»ä¼¼äºæ•°ç»„çš„<strong>å¯¹è±¡</strong>ï¼Œç”¨äºè¡¨ç¤ºå›ºå®šé•¿åº¦çš„å­—èŠ‚åºåˆ—ã€‚<code>Buffer</code> æœ¬è´¨æ˜¯ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚</p></blockquote><h3 id="_1-2-ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#_1-2-ç‰¹ç‚¹" aria-hidden="true">#</a> 1.2 ç‰¹ç‚¹</h3><ul><li><code>Buffer</code> å¤§å°å›ºå®šä¸”æ— æ³•è°ƒæ•´</li><li><code>Buffer</code> æ€§èƒ½è¾ƒå¥½ï¼Œå¯ä»¥ç›´æ¥å¯¹è®¡ç®—æœºå†…å­˜è¿›è¡Œæ“ä½œ</li><li>æ¯ä¸ªå…ƒç´ çš„å¤§å°ä¸º 1 å­—èŠ‚ï¼ˆbyteï¼‰</li></ul><h3 id="_1-3-ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_1-3-ä½¿ç”¨" aria-hidden="true">#</a> 1.3 ä½¿ç”¨</h3><h4 id="_1-3-1-buffer-çš„åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#_1-3-1-buffer-çš„åˆ›å»º" aria-hidden="true">#</a> 1.3.1 <code>Buffer</code> çš„åˆ›å»º</h4><p><code>Node.js</code> ä¸­åˆ›å»º <code>Buffer</code> çš„æ–¹å¼ä¸»è¦å¦‚ä¸‹å‡ ç§ï¼š</p><p><code>Buffer.alloc</code></p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// åˆ›å»ºäº†ä¸€ä¸ªé•¿åº¦ä¸º 10 å­—èŠ‚çš„ Bufferï¼Œç›¸å½“äºç”³è¯·äº† 10 å­—èŠ‚çš„å†…å­˜ç©ºé—´ï¼Œæ¯ä¸ªå­—èŠ‚çš„å€¼ä¸º 0
// ç»“æœä¸º &lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;
let buf_1 = Buffer.alloc(10);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>Buffer.allocUnsafe</code></p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// åˆ›å»ºäº†ä¸€ä¸ªé•¿åº¦ä¸º 10 å­—èŠ‚çš„ Bufferï¼ŒBuffer ä¸­å¯èƒ½å­˜åœ¨æ—§çš„æ•°æ®, å¯èƒ½ä¼šå½±å“æ‰§è¡Œç»“æœï¼Œæ‰€ä»¥å« unsafe
let buf_2 = Buffer.allocUnsafe(10);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>Buffer.from</code></p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// é€šè¿‡å­—ç¬¦ä¸²åˆ›å»º Buffer
let buf_3 = Buffer.from(&#39;hello&#39;);
// é€šè¿‡æ•°ç»„åˆ›å»º Buffer
let buf_4 = Buffer.from([105, 108, 111, 118, 101, 121, 111, 117]);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_1-3-2-buffer-ä¸å­—ç¬¦ä¸²çš„è½¬åŒ–" tabindex="-1"><a class="header-anchor" href="#_1-3-2-buffer-ä¸å­—ç¬¦ä¸²çš„è½¬åŒ–" aria-hidden="true">#</a> 1.3.2 <code>Buffer</code> ä¸å­—ç¬¦ä¸²çš„è½¬åŒ–</h4><p>å¯ä»¥å€ŸåŠ© <code>toString</code> æ–¹æ³•å°† <code>Buffer</code> è½¬ä¸ºå­—ç¬¦ä¸²</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// buffer ä¸å­—ç¬¦ä¸²çš„è½¬æ¢
const buffer = Buffer.from([105, 108, 111, 118, 101, 121, 111, 117]);
// é»˜è®¤ä½¿ç”¨ UTF-8 çš„ç¼–ç æ ¼å¼
console.log(buffer.toString())
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>æ³¨æ„ï¼š<code>toString</code> é»˜è®¤æ˜¯æŒ‰ç…§ <code>utf-8</code> ç¼–ç æ–¹å¼è¿›è¡Œè½¬æ¢çš„ã€‚</p></blockquote><h4 id="_1-3-3-buffer-çš„æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_1-3-3-buffer-çš„æ“ä½œ" aria-hidden="true">#</a> 1.3.3 <code>Buffer</code> çš„æ“ä½œ</h4><p><code>Buffer</code> å¯ä»¥ç›´æ¥é€šè¿‡ [] çš„æ–¹å¼å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>const buffer = Buffer.from(&#39;hello&#39;);
// äºŒè¿›åˆ¶ï¼š1101000
console.log(buffer[0].toString(2))

// ä¿®æ”¹ buffer
buffer[0] = 95
console.log(buffer.toString())

// æº¢å‡º å¦‚æœä¿®æ”¹çš„æ•°å€¼è¶…è¿‡ 255 ï¼Œåˆ™è¶…è¿‡ 8 ä½æ•°æ®ä¼šè¢«èˆå¼ƒ
const buffer = Buffer.from(&#39;hello&#39;)
// ä¼šèˆå¼ƒé«˜ä½çš„æ•°å­—ï¼Œå› ä¸ºå…«ä½çš„äºŒè¿›åˆ¶æœ€é«˜å€¼ä¸º 255   0001 0110 1001  =&gt; 0110 1001
buffer[0] = 361
console.log(buffer)

// ä¸­æ–‡ ä¸€ä¸ª utf-8 çš„å­—ç¬¦ ä¸€èˆ¬ å  3 ä¸ªå­—èŠ‚
const buffer = Buffer.from(&#39;ä½ å¥½&#39;)
console.log(buffer)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><blockquote><p>æ³¨æ„ï¼š</p><ol><li>å¦‚æœä¿®æ”¹çš„æ•°å€¼è¶…è¿‡ 255ï¼Œåˆ™è¶…è¿‡ 8 ä½æ•°æ®ä¼šè¢«èˆå¼ƒ</li><li>ä¸€ä¸ª <code>utf-8</code> çš„å­—ç¬¦ä¸€èˆ¬å  3 ä¸ªå­—èŠ‚</li></ol></blockquote><h2 id="_2-fs-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_2-fs-æ¨¡å—" aria-hidden="true">#</a> 2. <code>fs</code> æ¨¡å—</h2><blockquote><p><code>fs</code> å…¨ç§°ä¸º <code>file system</code>,ç§°ä¹‹ä¸º<strong>æ–‡ä»¶ç³»ç»Ÿ</strong>ï¼Œæ˜¯ <code>Node.js</code> ä¸­çš„<strong>å†…ç½®æ¨¡å—</strong>ï¼Œå¯ä»¥å¯¹è®¡ç®—æœºä¸­çš„ç£ç›˜è¿›è¡Œæ“ä½œã€‚</p></blockquote><h3 id="_2-1-æ–‡ä»¶å†™å…¥" tabindex="-1"><a class="header-anchor" href="#_2-1-æ–‡ä»¶å†™å…¥" aria-hidden="true">#</a> 2.1 æ–‡ä»¶å†™å…¥</h3><p>æ–‡ä»¶å†™å…¥å°±æ˜¯å°†æ•°æ®ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œæœ‰å¦‚ä¸‹çš„ <code>API</code></p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>writeFile</td><td>å¼‚æ­¥å†™å…¥</td></tr><tr><td>writeFileSync</td><td>åŒæ­¥å†™å…¥</td></tr><tr><td>appendFile/appendFileSync</td><td>è¿½åŠ å†™å…¥</td></tr><tr><td>createWriteStream</td><td>æµå¼å†™å…¥</td></tr></tbody></table><h4 id="_2-1-1-å¼‚æ­¥å†™å…¥" tabindex="-1"><a class="header-anchor" href="#_2-1-1-å¼‚æ­¥å†™å…¥" aria-hidden="true">#</a> 2.1.1 å¼‚æ­¥å†™å…¥</h4><p>è¯­æ³•ï¼š <code>fs.writeFile(file, data, [options], callback)</code></p><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>file</code>:æ–‡ä»¶å</li><li><code>data</code>:å¾…å†™å…¥çš„æ•°æ®</li><li><code>options</code>:é€‰é¡¹è®¾ç½® ï¼ˆå¯é€‰ï¼‰</li><li><code>callback</code>:å†™å…¥å›è°ƒ</li></ul><p>è¿”å›å€¼ï¼š <code>undefined</code></p><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¯¼å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;)

// 2.å†™å…¥æ–‡ä»¶
// writeFile å¼‚æ­¥å†™å…¥ï¼Œå››ä¸ªå‚æ•°ï¼š1.æ–‡ä»¶è·¯å¾„ 2.å†™å…¥å†…å®¹ 3.é…ç½®ä¿¡æ¯ 4.å›è°ƒå‡½æ•°
// æ–‡ä»¶å†™å…¥æˆåŠŸ
fs.writeFile(&#39;./åº§å³é“­.txt&#39;, &#39;å°ç‹¼å±…èƒ¥ï¼Œç¦…äºå§‘è¡ï¼Œé¥®é©¬ç€šæµ·&#39;, error =&gt; {
    // errror ä¸º nullå°±æ˜¯å†™å…¥æˆåŠŸ
    if (error) {
        console.log(&#39;æ–‡ä»¶å†™å…¥å¤±è´¥&#39;)
        return;
    }
    console.log(&#39;æ–‡ä»¶å†™å…¥æˆåŠŸ&#39;)
});
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_2-1-2-åŒæ­¥å†™å…¥" tabindex="-1"><a class="header-anchor" href="#_2-1-2-åŒæ­¥å†™å…¥" aria-hidden="true">#</a> 2.1.2 åŒæ­¥å†™å…¥</h4><p>è¯­æ³•: <code>fs.writeFileSync(file, data, [options])</code></p><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>file</code>:æ–‡ä»¶å</li><li><code>data</code>:å¾…å†™å…¥çš„æ•°æ®</li><li><code>options</code>:é€‰é¡¹è®¾ç½® ï¼ˆå¯é€‰ï¼‰</li></ul><p>è¿”å›å€¼ï¼š <code>undefined</code></p><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¯¼å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;)

// 2.å†™å…¥æ–‡ä»¶
// åŒæ­¥å†™å…¥ï¼Œæ²¡æœ‰å›è°ƒå‡½æ•°
fs.writeFileSync(&#39;./åº§å³é“­.txt&#39;, &#39;å°ç‹¼å±…èƒ¥ï¼Œç¦…äºå§‘è¡ï¼Œé¥®é©¬ç€šæµ·ï¼Œç‡•çŸ³å‹’ç„¶&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p><code>Node.js</code> ä¸­çš„ç£ç›˜æ“ä½œæ˜¯ç”±å…¶ä»–çº¿ç¨‹å®Œæˆçš„ï¼Œç»“æœçš„å¤„ç†æœ‰ä¸¤ç§æ¨¡å¼ï¼š</p><ul><li>åŒæ­¥å¤„ç† <code>JavaScript</code> ä¸»çº¿ç¨‹ä¼šç­‰å¾…å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œç»“æœï¼Œç„¶åå†ç»§ç»­æ‰§è¡Œä¸»çº¿ç¨‹çš„ä»£ç ï¼Œæ•ˆç‡è¾ƒä½</li><li>å¼‚æ­¥å¤„ç† <code>JavaScript</code> ä¸»çº¿ç¨‹ä¸ä¼šç­‰å¾…å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œç»“æœï¼Œç›´æ¥æ‰§è¡Œåç»­çš„ä¸»çº¿ç¨‹ä»£ç ï¼Œæ•ˆç‡è¾ƒå¥½</li></ul></blockquote><h4 id="_2-1-3-è¿½åŠ å†™å…¥" tabindex="-1"><a class="header-anchor" href="#_2-1-3-è¿½åŠ å†™å…¥" aria-hidden="true">#</a> 2.1.3 è¿½åŠ å†™å…¥</h4><p><code>appendFile</code> ä½œç”¨æ˜¯åœ¨æ–‡ä»¶å°¾éƒ¨è¿½åŠ å†…å®¹ï¼Œ<code>appendFile</code> è¯­æ³•ä¸ <code>writeFile</code> è¯­æ³•å®Œå…¨ç›¸åŒ è¯­æ³•:</p><ul><li>fs.appendFile(file, data, [options], callback)</li><li>fs.appendFileSync(file, data, [options])</li></ul><p>è¿”å›å€¼ï¼š äºŒè€…éƒ½ä¸º <code>undefined</code> ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;);

const content = &#39;\r\nä½†ä½¿é¾™åŸé£å°†åœ¨ï¼Œä¸æ•™èƒ¡é©¬åº¦é˜´å±±&#39;;

// fs.appendFile(&#39;./åº§å³é“­.txt&#39;, content, error =&gt; {
//     // errror ä¸º nullå°±æ˜¯å†™å…¥æˆåŠŸ
//     if (error) {
//         console.log(&#39;æ–‡ä»¶è¿½åŠ å†™å…¥å¤±è´¥&#39;)
//         return;
//     }
//     console.log(&#39;æ–‡ä»¶è¿½åŠ å†™å…¥æˆåŠŸ&#39;);
// })

// åŒæ­¥æ–‡ä»¶è¿½åŠ å†™å…¥
// fs.appendFileSync(&#39;./åº§å³é“­.txt&#39;, content)

// ä½¿ç”¨ writeFile çš„æ–¹å¼è¿½åŠ æ–‡ä»¶å†™å…¥
fs.writeFile(&#39;./åº§å³é“­.txt&#39;, content, {flag: &#39;a&#39;}, error =&gt; {
    if (error) {
        console.log(&#39;æ–‡ä»¶è¿½åŠ å†™å…¥å¤±è´¥&#39;)
        return;
    }
    console.log(&#39;æ–‡ä»¶è¿½åŠ å†™å…¥æˆåŠŸ&#39;)
})

console.log(&#39;hello world&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="_2-1-4-æµå¼å†™å…¥" tabindex="-1"><a class="header-anchor" href="#_2-1-4-æµå¼å†™å…¥" aria-hidden="true">#</a> 2.1.4 æµå¼å†™å…¥</h4><p>è¯­æ³•ï¼š <code>fs.createWriteStream(path, [options])</code></p><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>path</code>:æ–‡ä»¶è·¯å¾„</li><li><code>options</code>:é€‰é¡¹é…ç½®ï¼ˆ å¯é€‰ ï¼‰</li></ul><p>è¿”å›å€¼ï¼š <code>Object</code></p><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¯¼å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;);

// 2.åˆ›å»ºå†™å…¥æµå¯¹è±¡
const writeStream = fs.createWriteStream(&#39;./è§‚ä¹¦æœ‰æ„Ÿ.txt&#39;);

// 3.å†™å…¥å†…å®¹
writeStream.write(&#39;åŠäº©æ–¹å¡˜ä¸€é‰´å¼€\r\n&#39;)
writeStream.write(&#39;å¤©å…‰äº‘å½±å…±å¾˜å¾Š\r\n&#39;)
writeStream.write(&#39;é—®æ¸ é‚£å¾—æ¸…å¦‚è®¸\r\n&#39;)
writeStream.write(&#39;ä¸ºæœ‰æºå¤´æ´»æ°´æ¥\r\n&#39;)

// 4.å…³é—­é€šé“ ä¸æ˜¯å¿…é¡»
// writeStream.close();
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>ç¨‹åºæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ˜¯éœ€è¦æ¶ˆè€—èµ„æºçš„ï¼Œæµå¼å†™å…¥å¯ä»¥å‡å°‘æ‰“å¼€å…³é—­æ–‡ä»¶çš„æ¬¡æ•°ã€‚æµå¼å†™å…¥æ–¹å¼é€‚ç”¨äº<strong>å¤§æ–‡ä»¶å†™å…¥</strong>æˆ–è€…<strong>é¢‘ç¹å†™å…¥</strong>çš„åœºæ™¯, <code>writeFile</code> é€‚åˆäºå†™å…¥é¢‘ç‡è¾ƒä½çš„åœºæ™¯ã€‚</p></blockquote><h3 id="_2-2-æ–‡ä»¶è¯»å–" tabindex="-1"><a class="header-anchor" href="#_2-2-æ–‡ä»¶è¯»å–" aria-hidden="true">#</a> 2.2 æ–‡ä»¶è¯»å–</h3><p>æ–‡ä»¶è¯»å–é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯é€šè¿‡ç¨‹åºä»æ–‡ä»¶ä¸­å–å‡ºå…¶ä¸­çš„æ•°æ®ï¼Œæœ‰å¦‚ä¸‹å‡ ç§ <code>API</code>ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>readFile</td><td>å¼‚æ­¥è¯»å–</td></tr><tr><td>readFileSync</td><td>åŒæ­¥è¯»å–</td></tr><tr><td>createReadStream</td><td>æµå¼è¯»å–</td></tr></tbody></table><h4 id="_2-2-1-å¼‚æ­¥è¯»å–" tabindex="-1"><a class="header-anchor" href="#_2-2-1-å¼‚æ­¥è¯»å–" aria-hidden="true">#</a> 2.2.1 å¼‚æ­¥è¯»å–</h4><p>è¯­æ³•ï¼š <code>fs.readFile(path, [options], callback)</code></p><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>path</code>:æ–‡ä»¶è·¯å¾„</li><li><code>options</code>:é€‰é¡¹é…ç½®</li><li><code>callback</code>:å›è°ƒå‡½æ•°</li></ul><p>è¿”å›å€¼ï¼š <code>undefined</code></p><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;)

// 2.å¼‚æ­¥è¯»å–
fs.readFile(&#39;./åº§å³é“­.txt&#39;, (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ–‡ä»¶è¯»å–é”™è¯¯&#39;)
        return
    }
    console.log(data.toString())
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_2-2-2-åŒæ­¥è¯»å–" tabindex="-1"><a class="header-anchor" href="#_2-2-2-åŒæ­¥è¯»å–" aria-hidden="true">#</a> 2.2.2 åŒæ­¥è¯»å–</h4><p>è¯­æ³•ï¼š <code>fs.readFileSync(path, [options])</code></p><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>path</code>:æ–‡ä»¶è·¯å¾„</li><li><code>options</code>:é€‰é¡¹é…ç½®</li></ul><p>è¿”å›å€¼ï¼š <code>string</code> | <code>Buffer</code></p><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;)

// 2.åŒæ­¥è¯»å–
let data = fs.readFileSync(&#39;./åº§å³é“­.txt&#39;);
console.log(data.toString())
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_2-2-3-æµå¼è¯»å–" tabindex="-1"><a class="header-anchor" href="#_2-2-3-æµå¼è¯»å–" aria-hidden="true">#</a> 2.2.3 æµå¼è¯»å–</h4><p>è¯­æ³•ï¼š <code>fs.createReadStream(path, [options])</code></p><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>path</code>:æ–‡ä»¶è·¯å¾„</li><li><code>options</code>:é€‰é¡¹é…ç½®ï¼ˆå¯é€‰ï¼‰</li></ul><p>è¿”å›å€¼ï¼š<code>Object</code></p><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¯¼å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;)

// 2.åˆ›å»ºè¯»å–æµå¯¹è±¡
const rs = fs.createReadStream(&#39;./è§‚ä¹¦æœ‰æ„Ÿ.txt&#39;);

// 3.ç»‘å®š data äº‹ä»¶
rs.on(&#39;data&#39;, chunk =&gt; {
    // chunk:å—å„¿ã€å¤§å—å„¿
    console.log(chunk)
    console.log(chunk.length)
    console.log(chunk.toString())
})

// 4.ç»“æŸäº‹ä»¶ï¼ˆå¯é€‰ï¼‰
rs.on(&#39;end&#39;, () =&gt; {
    console.log(&#39;æ–‡ä»¶è¯»å–å®Œæˆ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_2-3-æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å" tabindex="-1"><a class="header-anchor" href="#_2-3-æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å" aria-hidden="true">#</a> 2.3 æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å</h3><p>åœ¨ <code>Node.js</code> ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>rename</code> æˆ– <code>renameSync</code> æ¥ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</p><p>è¯­æ³•ï¼š</p><ul><li><code>fs.rename(oldPath, newPath, callback)</code></li><li><code>fs.renameSync(oldPath, newPath)</code></li></ul><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>oldPath</code>:æ–‡ä»¶å½“å‰çš„è·¯å¾„</li><li><code>newPath</code>:æ–‡ä»¶æ–°çš„è·¯å¾„</li><li><code>callback</code>:æ“ä½œåçš„å›è°ƒ</li></ul><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¯¼å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;);

// 2.æ–‡ä»¶é‡å‘½å
// fs.rename(&#39;./åº§å³é“­-2.txt&#39;, &#39;./è¥¿æ±‰åå°†.txt&#39;, error =&gt; {
//     if (error) {
//         console.log(&#39;æ–‡ä»¶é‡å‘½åå¤±è´¥&#39;)
//            return ;
//     }
//     console.log(&#39;æ–‡ä»¶é‡å‘½åæˆåŠŸ&#39;)
// })

// 3.æ–‡ä»¶ç§»åŠ¨
// æ–‡ä»¶å¤¹å¦‚æœä¸å­˜åœ¨ï¼Œä¼šæŠ¥é”™è¯¯ Error: ENOENT: no such file or directory
fs.rename(&#39;./è¥¿æ±‰åå°†.txt&#39;, &#39;./æ–‡ä»¶/è¥¿æ±‰åå°†.txt&#39;, error =&gt; {
    if (error) {
        console.log(error, &#39;ç§»åŠ¨æ–‡ä»¶å‡ºé”™&#39;);
        return ;
    }
    console.log(&#39;æ“ä½œæˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_2-4-æ–‡ä»¶åˆ é™¤" tabindex="-1"><a class="header-anchor" href="#_2-4-æ–‡ä»¶åˆ é™¤" aria-hidden="true">#</a> 2.4 æ–‡ä»¶åˆ é™¤</h3><p>åœ¨ <code>Node.js</code> ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>unlink</code> æˆ– <code>unlinkSync</code> æˆ– <code>rm</code> æˆ– <code>rmSync</code> æ¥åˆ é™¤æ–‡ä»¶</p><p>è¯­æ³•ï¼š</p><ul><li><code>fs.unlink(path, callback)</code></li><li><code>fs.unlinkSync(path)</code></li></ul><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>path</code>:æ–‡ä»¶è·¯å¾„</li><li><code>callback</code>:æ“ä½œåçš„å›è°ƒ</li></ul><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;)

// 2.è°ƒç”¨ unlink æ–¹æ³•
// unlinkSync:åŒæ­¥åˆ é™¤
// fs.unlink(&#39;./åº§å³é“­-3.txt&#39;, error =&gt; {
//     if (error) {
//         console.log(&#39;åˆ é™¤æ–‡ä»¶é”™è¯¯&#39;, error)
//         return;
//     }
//     console.log(&#39;åˆ é™¤æ–‡ä»¶æˆåŠŸ&#39;)
// })

// 3.è°ƒç”¨ rm æ–¹æ³•
// rmSync:åŒæ­¥åˆ é™¤
fs.rm(&#39;./æ–‡ä»¶/è¥¿æ±‰åå°†.txt&#39;, error =&gt; {
    if (error) {
        console.log(&#39;æ–‡ä»¶åˆ é™¤å¤±è´¥&#39;, error)
        return;
    }
    console.log(&#39;æ–‡ä»¶åˆ é™¤æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_2-5-æ–‡ä»¶å¤¹æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_2-5-æ–‡ä»¶å¤¹æ“ä½œ" aria-hidden="true">#</a> 2.5 æ–‡ä»¶å¤¹æ“ä½œ</h3><p>åœ¨ <code>Node.js</code> ä¸­å¯ä»¥é€šè¿‡å¦‚ä¸‹ <code>API</code> å¯¹æ–‡ä»¶å¤¹è¿›è¡Œåˆ›å»ºã€è¯»å–ã€åˆ é™¤ç­‰æ“ä½œ</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>mkdir / mkdirSync</td><td>åˆ›å»ºæ–‡ä»¶å¤¹</td></tr><tr><td>readdir / readdirSync</td><td>è¯»å–æ–‡ä»¶å¤¹</td></tr><tr><td>rmdir / rmdirSync</td><td>åˆ é™¤æ–‡ä»¶å¤¹</td></tr></tbody></table><h4 id="_2-5-1-åˆ›å»ºæ–‡ä»¶å¤¹" tabindex="-1"><a class="header-anchor" href="#_2-5-1-åˆ›å»ºæ–‡ä»¶å¤¹" aria-hidden="true">#</a> 2.5.1 åˆ›å»ºæ–‡ä»¶å¤¹</h4><p>åœ¨ <code>Node.js</code> ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>mkdir</code> æˆ– <code>mkdirSync</code> æ¥åˆ›å»ºæ–‡ä»¶å¤¹</p><p>è¯­æ³•ï¼š</p><ul><li><code>fs.mkdir(path, [options], callback)</code></li><li><code>fs.mkdirSync(path, [options])</code></li></ul><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>path</code>:æ–‡ä»¶å¤¹è·¯å¾„</li><li><code>options</code>:é€‰é¡¹é…ç½®ï¼ˆå¯é€‰ï¼‰</li><li><code>callback</code>:æ“ä½œåçš„å›è°ƒ</li></ul><p>ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;)

// 2.åˆ›å»ºæ–‡ä»¶å¤¹
// mkdir make:åˆ¶ä½œ directory:ç›®å½•
fs.mkdir(&#39;./html&#39;, error =&gt; {
    if (error) {
        console.log(&#39;åˆ›å»ºç›®å½•å¤±è´¥&#39;, error)
        return;
    }
    console.log(&#39;åˆ›å»ºç›®å½•æˆåŠŸ&#39;)
})

// 3.é€’å½’åˆ›å»ºæ–‡ä»¶å¤¹
fs.mkdir(&#39;./a/b/c&#39;, {
    recursive: true
}, error =&gt; {
    if (error) {
        console.log(&quot;é€’å½’åˆ›å»ºæ–‡ä»¶å¤¹å¤±è´¥&quot;, error)
        return;
    }
    console.log(&#39;é€’å½’åˆ›å»ºæ–‡ä»¶å¤¹æˆåŠŸ&#39;)
})

// 4.é€’å½’åŒæ­¥åˆ›å»ºæ–‡ä»¶å¤¹
fs.mkdirSync(&#39;./a/b/c&#39;, {recursive: true});
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="_2-5-2-è¯»å–æ–‡ä»¶å¤¹" tabindex="-1"><a class="header-anchor" href="#_2-5-2-è¯»å–æ–‡ä»¶å¤¹" aria-hidden="true">#</a> 2.5.2 è¯»å–æ–‡ä»¶å¤¹</h4><p>åœ¨ <code>Node.js</code> ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>readdir</code> æˆ– <code>readdirSync</code> æ¥è¯»å–æ–‡ä»¶å¤¹</p><p>è¯­æ³•ï¼š</p><ul><li><code>fs.readdir(path, [options], callback)</code></li><li><code>fs.readdirSync(path, [options])</code></li></ul><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>path</code>:æ–‡ä»¶å¤¹è·¯å¾„</li><li><code>options</code>:é€‰é¡¹é…ç½®ï¼ˆå¯é€‰ï¼‰</li><li><code>callback</code>:æ“ä½œåçš„å›è°ƒ</li></ul><p>ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;)

// 2.è¯»å–æ–‡ä»¶å¤¹
// readdir read:è¯»å– dir:directory ç›®å½•
fs.readdir(&#39;./&#39;, (error, data) =&gt; {
    if (error) {
        console.log(&#39;è¯»å–æ–‡ä»¶å¤¹é”™è¯¯&#39;, error)
        return;
    }
    // [
    //     &#39;1-æ–‡ä»¶å†™å…¥.js&#39;,
    //     &#39;2-è¿½åŠ å†™å…¥.js&#39;,
    //     &#39;3-æµå¼å†™å…¥.js&#39;,
    //     &#39;4-æ–‡ä»¶è¯»å–.js&#39;,
    //     &#39;5-æµå¼è¯»å–.js&#39;,
    //     &#39;6-ç»ƒä¹ -æ–‡ä»¶å¤åˆ¶.js&#39;,
    //     &#39;7-æ–‡ä»¶é‡å‘½åä¸ç§»åŠ¨.js&#39;,
    //     &#39;8-åˆ é™¤æ–‡ä»¶.js&#39;,
    //     &#39;9-æ–‡ä»¶å¤¹æ“ä½œ.js&#39;,
    //     &#39;a&#39;,
    //     &#39;html&#39;,
    //     &#39;åº§å³é“­.txt&#39;,
    //     &#39;æ–‡ä»¶&#39;,
    //     &#39;è§‚ä¹¦æœ‰æ„Ÿ.txt&#39;
    // ]
    console.log(data)
})

//åŒæ­¥è¯»å–
// let data = fs.readdirSync(&#39;./&#39;);
// console.log(data);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h4 id="_2-5-3-åˆ é™¤æ–‡ä»¶å¤¹" tabindex="-1"><a class="header-anchor" href="#_2-5-3-åˆ é™¤æ–‡ä»¶å¤¹" aria-hidden="true">#</a> 2.5.3 åˆ é™¤æ–‡ä»¶å¤¹</h4><p>åœ¨ <code>Node.js</code> ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>rmdir</code> æˆ– <code>rmdirSync</code> æ¥åˆ é™¤æ–‡ä»¶å¤¹</p><p>è¯­æ³•ï¼š</p><ul><li><code>fs.rmdir(path, [options], callback)</code></li><li><code>fs.rmdirSync(path, [options])</code> å‚æ•°è¯´æ˜ï¼š</li><li><code>path</code>:æ–‡ä»¶å¤¹è·¯å¾„</li><li><code>options</code>:é€‰é¡¹é…ç½®ï¼ˆå¯é€‰ï¼‰</li><li><code>callback</code>:æ“ä½œåçš„å›è°ƒ</li></ul><p>ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;)

// 2.åˆ é™¤æ–‡ä»¶å¤¹
// fs.rmdir(&#39;./æ–‡ä»¶&#39;, error =&gt; {
//     if (error) {
//         console.log(&#39;åˆ é™¤æ–‡ä»¶å¤¹å¤±è´¥&#39;, error)
//         return;
//     }
//     console.log(&#39;åˆ é™¤æ–‡ä»¶å¤¹æˆåŠŸ&#39;)
// })

// 3.é€’å½’åˆ é™¤æ–‡ä»¶å¤¹
// é€’å½’åˆ é™¤æ–‡ä»¶å¤¹å¤±è´¥ [Error: ENOTEMPTY: directory not empty, rmdir &#39;E:\JavaEE\frontend\nodejs-study\2-fsæ–‡ä»¶ç³»ç»Ÿ\a&#39;]

// ä¸æ¨èä½¿ç”¨
// fs.rmdir(&#39;./a&#39;, {recursive: true}, error =&gt; {
//     if (error) {
//         console.log(&#39;é€’å½’åˆ é™¤æ–‡ä»¶å¤¹å¤±è´¥&#39;, error)
//         return ;
//     }
//     console.log(&#39;é€’å½’åˆ é™¤æ–‡ä»¶å¤¹æˆåŠŸ&#39;)
// })

// æ¨èä½¿ç”¨
fs.rm(&#39;./a&#39;, {recursive: true}, error =&gt; {
    if (error) {
        console.log(&#39;é€’å½’åˆ é™¤æ–‡ä»¶å¤±è´¥&#39;, error)
        return;
    }
    console.log(&#39;é€’å½’åˆ é™¤æ–‡ä»¶æˆåŠŸ&#39;)
})

//åŒæ­¥é€’å½’åˆ é™¤æ–‡ä»¶å¤¹
fs.rmdirSync(&#39;./a&#39;, {recursive: true})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="_2-6-æŸ¥çœ‹èµ„æºçŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#_2-6-æŸ¥çœ‹èµ„æºçŠ¶æ€" aria-hidden="true">#</a> 2.6 æŸ¥çœ‹èµ„æºçŠ¶æ€</h3><p>åœ¨ <code>Node.js</code> ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>stat</code> æˆ– <code>statSync</code> æ¥æŸ¥çœ‹èµ„æºçš„è¯¦ç»†ä¿¡æ¯</p><p>è¯­æ³•ï¼š</p><ul><li><code>fs.stat(path, [options], callback)</code></li><li><code>fs.statSync(path, [options])</code></li></ul><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>path</code>:æ–‡ä»¶å¤¹è·¯å¾„</li><li><code>options</code>:é€‰é¡¹é…ç½®ï¼ˆå¯é€‰ï¼‰</li><li><code>callback</code>:æ“ä½œåçš„å›è°ƒ</li></ul><p>ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;)

// 2.stat æ–¹æ³• status çš„ç¼©å†™ï¼šçŠ¶æ€
fs.stat(&#39;./è§‚ä¹¦æœ‰æ„Ÿ.txt&#39;, (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ“ä½œå¤±è´¥&#39;, error)
        return;
    }
    // Stats {
    //     dev: 985301708,
    //     mode: 33206,
    //     nlink: 1,
    //     uid: 0,
    //     gid: 0,
    //     rdev: 0,
    //     blksize: 4096,
    //     ino: 281474979770305,
    //     size: 92,
    //     blocks: 0,
    //     atimeMs: 1684373309132.9426,
    //     mtimeMs: 1684289136772.1648,
    //     ctimeMs: 1684289136772.1648,
    //     birthtimeMs: 1684289136770.7136,
    //     atime: 2023 - 05 - 18 T01: 28: 29.133 Z,
    //     mtime: 2023 - 05 - 17 T02: 05: 36.772 Z,
    //     ctime: 2023 - 05 - 17 T02: 05: 36.772 Z,
    //     birthtime: 2023 - 05 - 17 T02: 05: 36.771 Z
    // }
    console.log(data)
    console.log(data.isFile())
    console.log(data.isDirectory())
})

// 3.åŒæ­¥è·å–çŠ¶æ€
let data = fs.statSync(&#39;./è§‚ä¹¦æœ‰æ„Ÿ.txt&#39;);
console.log(data)
console.log(data.isFile())
console.log(data.isDirectory())
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>ç»“æœå€¼å¯¹è±¡ç»“æ„ï¼š</p><ul><li><code>size</code>:æ–‡ä»¶ä½“ç§¯</li><li><code>birthtime</code>:åˆ›å»ºæ—¶é—´</li><li><code>mtime</code>:æœ€åä¿®æ”¹æ—¶é—´</li><li><code>isFile</code>:æ£€æµ‹æ˜¯å¦ä¸ºæ–‡ä»¶</li><li><code>isDirectory</code>:æ£€æµ‹æ˜¯å¦ä¸ºæ–‡ä»¶å¤¹</li></ul><h3 id="_2-7-ç›¸å¯¹è·¯å¾„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_2-7-ç›¸å¯¹è·¯å¾„é—®é¢˜" aria-hidden="true">#</a> 2.7 ç›¸å¯¹è·¯å¾„é—®é¢˜</h3><p><code>fs</code> æ¨¡å—å¯¹èµ„æºè¿›è¡Œæ“ä½œæ—¶ï¼Œè·¯å¾„çš„å†™æ³•æœ‰ä¸¤ç§ï¼š</p><ul><li>ç›¸å¯¹è·¯å¾„ <ul><li><code>./åº§å³é“­.txt</code>:å½“å‰ç›®å½•ä¸‹çš„åº§å³é“­.txt</li><li><code>åº§å³é“­.txt</code>:ç­‰æ•ˆäºä¸Šé¢çš„å†™æ³•</li><li><code>../åº§å³é“­.txt</code>:å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ä¸­çš„åº§å³é“­.txt</li></ul></li><li>ç»å¯¹è·¯å¾„ <ul><li><code>D:/Program Files</code>:<code>windows</code> ç³»ç»Ÿä¸‹çš„ç»å¯¹è·¯å¾„</li><li><code>/usr/bin</code>:<code>Linux</code> ç³»ç»Ÿä¸‹çš„ç»å¯¹è·¯å¾„</li></ul></li></ul><blockquote><p>ç›¸å¯¹è·¯å¾„ä¸­æ‰€è°“çš„å½“å‰ç›®å½•ï¼ŒæŒ‡çš„æ˜¯<strong>å‘½ä»¤è¡Œçš„å·¥ä½œç›®å½•</strong>ï¼Œè€Œå¹¶éæ˜¯æ–‡ä»¶çš„æ‰€åœ¨ç›®å½•ã€‚æ‰€ä»¥å½“å‘½ä»¤è¡Œçš„å·¥ä½œç›®å½•ä¸æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸ä¸€è‡´æ—¶ï¼Œä¼šå‡ºç°ä¸€äº› <code>BUG</code>ã€‚</p></blockquote><h3 id="_2-8-dirname" tabindex="-1"><a class="header-anchor" href="#_2-8-dirname" aria-hidden="true">#</a> 2.8 <code>__dirname</code></h3><p><code>__dirname</code> ä¸ <code>require</code> ç±»ä¼¼ï¼Œéƒ½æ˜¯ <code>Node.js</code> ç¯å¢ƒä¸­çš„ &#39;å…¨å±€&#39; å˜é‡ <code>__dirname</code> ä¿å­˜ç€<strong>å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„</strong>ï¼Œå¯ä»¥ä½¿ç”¨ <code>__dirname</code> ä¸æ–‡ä»¶åæ‹¼æ¥æˆç»å¯¹è·¯å¾„ ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>let data = fs.readFileSync(__dirname + &#39;/data.txt&#39;);
console.log(data);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>ä½¿ç”¨ <code>fs</code> æ¨¡å—çš„æ—¶å€™ï¼Œå°½é‡ä½¿ç”¨ <code>__dirname</code> å°†è·¯å¾„è½¬åŒ–ä¸ºç»å¯¹è·¯å¾„ï¼Œè¿™æ ·å¯ä»¥é¿å…ç›¸å¯¹è·¯å¾„äº§ç”Ÿçš„ <code>Bug</code></p></blockquote><h3 id="_2-9-ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#_2-9-ç»ƒä¹ " aria-hidden="true">#</a> 2.9 ç»ƒä¹ </h3><p>å®ç°æ–‡ä»¶å¤åˆ¶çš„åŠŸèƒ½ ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>/**
 * éœ€æ±‚ï¼š
 *  å¤åˆ¶ã€åº§å³é“­.txtã€‘
 */

// 1.å¼•å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;);
// å…¨å±€å¯¹è±¡ï¼Œå³ global å¯¹è±¡çš„å±æ€§ï¼Œæ— é¡»å£°æ˜å³å¯è®¿é—®ã€‚å®ƒç”¨äºæè¿°å½“å‰ Node è¿›ç¨‹çŠ¶æ€çš„å¯¹è±¡ï¼Œæä¾›äº†ä¸€ä¸ªä¸æ“ä½œç³»ç»Ÿçš„ç®€å•æ¥å£ã€‚
const process = require(&#39;process&#39;)

// æ–¹å¼ä¸€ï¼šä½¿ç”¨ readFile
// 2.è¯»å–æ–‡ä»¶
// let data = fs.readFileSync(&#39;./åº§å³é“­.txt&#39;);

// // 3.å†™å…¥æ–‡ä»¶
// fs.writeFileSync(&#39;./åº§å³é“­-2.txt&#39;, data);

// // æŸ¥çœ‹ç³»ç»Ÿè€—è´¹å†…å­˜
// // rss: 19795968 å­—èŠ‚
// console.log(process.memoryUsage())

// æ–¹å¼äºŒï¼šä½¿ç”¨æµå¼æ“ä½œ
// 2.åˆ›å»ºæµå¼è¯»å–
let rs = fs.createReadStream(&#39;./åº§å³é“­.txt&#39;);

// 3.åˆ›å»ºæµå¼å†™å…¥
let ws = fs.createWriteStream(&#39;./åº§å³é“­-3.txt&#39;);

// // 4.ç»‘å®š data äº‹ä»¶
// rs.on(&#39;data&#39;, chunk =&gt; {
//     ws.write(chunk);
// })

// // 5.ç»‘å®š end äº‹ä»¶
// rs.on(&#39;end&#39;, () =&gt; {
//     // rss: 20885504 å­—èŠ‚ ç›¸æ¯”äºåŒæ­¥çš„æ–¹å¼å ç”¨å†…å­˜ä¼šæ¯”è¾ƒå°
//     console.log(process.memoryUsage())
// })

// 4.ä½¿ç”¨ pipe(ç®¡é“) å¯ç›´æ¥å¤åˆ¶
rs.pipe(ws)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h2 id="_3-path-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_3-path-æ¨¡å—" aria-hidden="true">#</a> 3. <code>path</code> æ¨¡å—</h2><p><code>path</code> æ¨¡å—æä¾›äº†<strong>æ“ä½œè·¯å¾„</strong>çš„åŠŸèƒ½ï¼Œæœ‰å¦‚ä¸‹å‡ ä¸ªè¾ƒä¸ºå¸¸ç”¨çš„ <code>API</code>ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>path.resolve</td><td>æ‹¼æ¥è§„èŒƒçš„ç»å¯¹è·¯å¾„å¸¸ç”¨</td></tr><tr><td>path.sep</td><td>è·å–æ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦</td></tr><tr><td>path.parse</td><td>è§£æè·¯å¾„å¹¶è¿”å›å¯¹è±¡</td></tr><tr><td>path.basename</td><td>è·å–è·¯å¾„çš„åŸºç¡€åç§°</td></tr><tr><td>path.dirname</td><td>è·å–è·¯å¾„çš„ç›®å½•å</td></tr><tr><td>path.extname</td><td>è·å¾—è·¯å¾„çš„æ‰©å±•å</td></tr></tbody></table><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ pathã€fs æ¨¡å—
const path = require(&#39;path&#39;)
const fs = require(&#39;fs&#39;)

// å†™å…¥æ–‡ä»¶
// fs.writeFileSync(__dirname + &#39;/index.html&#39;, &#39;love&#39;)
// E:\JavaEE\frontend\nodejs-study\3-pathæ¨¡å—/index.html
// console.log(__dirname + &#39;/index.html&#39;)

// ä½¿ç”¨ path è§£å†³
// E:\JavaEE\frontend\nodejs-study\3-pathæ¨¡å—\index.html
console.log(path.resolve(__dirname, &#39;./index.html&#39;))
// E:\JavaEE\frontend\nodejs-study\3-pathæ¨¡å—\index.html
console.log(path.resolve(__dirname, &#39;index.html&#39;))
// E:\index.html\test
console.log(path.resolve(__dirname, &#39;/index.html&#39;, &#39;./test&#39;))

// åˆ†éš”ç¬¦
// \ windows:\ linux:/
console.log(path.sep)

// parse æ–¹æ³• __dirname &#39;å…¨å±€å˜é‡&#39;
// __filename &#39;å…¨å±€å˜é‡&#39; æ–‡ä»¶çš„ç»å¯¹è·¯å¾„
console.log(__filename)

let str = &#39;E:\\JavaEE\\frontend\\nodejs-study\\3-pathæ¨¡å—\\index.html&#39;;

// {
//     root: &#39;E:\\&#39;,
//     dir: &#39;E:\\JavaEE\\frontend\\nodejs-study\\3-pathæ¨¡å—&#39;,
//     base: &#39;index.html&#39;,
//     ext: &#39;.html&#39;,
//     name: &#39;index&#39;
// }
console.log(path.parse(str))

// index.html
console.log(path.basename(str))

// E:\JavaEE\frontend\nodejs-study\3-pathæ¨¡å—
console.log(path.dirname(str))

// .html
console.log(path.extname(str))
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h2 id="_4-http-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_4-http-æ¨¡å—" aria-hidden="true">#</a> 4. <code>http</code> æ¨¡å—</h2><h3 id="_4-1-åˆ›å»º-http-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_4-1-åˆ›å»º-http-æœåŠ¡" aria-hidden="true">#</a> 4.1 åˆ›å»º <code>http</code> æœåŠ¡</h3><h4 id="_4-1-1-æ“ä½œæ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#_4-1-1-æ“ä½œæ­¥éª¤" aria-hidden="true">#</a> 4.1.1 æ“ä½œæ­¥éª¤</h4><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ http æ¨¡å—
const http = require(&#39;http&#39;)

// 2.åˆ›å»º http æœåŠ¡
const server = http.createServer((request, response) =&gt; {

    // response.end è®¾ç½®å“åº”ä½“ å¿…é¡»è¦è¿”å›ï¼Œä¸”åªèƒ½è¿”å›ä¸€æ¬¡
    // å¤šä¸ª response.end æŠ¥é”™ Error [ERR_STREAM_WRITE_AFTER_END]: write after end
    // response.end(&quot;hello world&quot;)
    // response.end(&quot;hello world&quot;)

    // è§£å†³ä¸­æ–‡ä¹±ç 
    response.setHeader(&#39;content-type&#39;, &#39;text/html;charset=utf-8&#39;)
    response.end(&#39;ä½ å¥½ï¼Œä¸–ç•Œ&#39;)
})

// 3.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£
server.listen(9000, () =&gt; {
    console.log(&#39;http æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><p><code>http.createServer</code> é‡Œçš„å›è°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœºï¼šå½“æ¥æ”¶åˆ° <code>http</code> è¯·æ±‚çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œ</p></blockquote><h4 id="_4-1-2-æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_4-1-2-æµ‹è¯•" aria-hidden="true">#</a> 4.1.2 æµ‹è¯•</h4><p>æµè§ˆå™¨è¯·æ±‚å¯¹åº”ç«¯å£ <code>http://127.0.0.1:9000</code></p><h4 id="_4-1-3-æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#_4-1-3-æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> 4.1.3 æ³¨æ„äº‹é¡¹</h4><ul><li>å‘½ä»¤è¡Œ <code>ctrl + c</code> åœæ­¢æœåŠ¡</li><li>å½“æœåŠ¡å¯åŠ¨åï¼Œæ›´æ–°ä»£ç å¿…é¡»é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ</li><li>å“åº”å†…å®¹ä¸­æ–‡ä¹±ç çš„è§£å†³åŠæ³•<div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>response.setHeader(&#39;content-type&#39;, &#39;text/html;charset=utf-8&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>ç«¯å£å·è¢«å ç”¨ <ul><li>å…³é—­å½“å‰æ­£åœ¨è¿è¡Œç›‘å¬ç«¯å£çš„æœåŠ¡</li><li>ä¿®æ”¹å…¶ä»–ç«¯å£å·</li><li>å¦‚æœç«¯å£è¢«å…¶ä»–ç¨‹åºå ç”¨ï¼Œå¯ä»¥ä½¿ç”¨<strong>èµ„æºç›‘è§†å™¨</strong>æ‰¾åˆ°å ç”¨ç«¯å£çš„ç¨‹åºï¼Œç„¶åä½¿ç”¨<strong>ä»»åŠ¡ç®¡ç†å™¨</strong>å…³é—­å¯¹åº”çš„ç¨‹åº</li></ul></li></ul><h3 id="_4-2-è·å–-http-è¯·æ±‚æŠ¥æ–‡" tabindex="-1"><a class="header-anchor" href="#_4-2-è·å–-http-è¯·æ±‚æŠ¥æ–‡" aria-hidden="true">#</a> 4.2 è·å– <code>http</code> è¯·æ±‚æŠ¥æ–‡</h3><p>æƒ³è¦è·å–è¯·æ±‚çš„æ•°æ®ï¼Œéœ€è¦é€šè¿‡ <code>request</code> å¯¹è±¡</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>request.method</td><td>è¯·æ±‚æ–¹æ³•</td></tr><tr><td>request.httpVersion</td><td>è¯·æ±‚ç‰ˆæœ¬</td></tr><tr><td>request.url</td><td>è¯·æ±‚è·¯å¾„</td></tr><tr><td>require(&#39;url&#39;).parse(request.url).pathname</td><td>URL è·¯å¾„</td></tr><tr><td>require(&#39;url&#39;).parse(request.url, true).query</td><td>URL æŸ¥è¯¢å­—ç¬¦ä¸²</td></tr><tr><td>request.headers</td><td>è¯·æ±‚å¤´</td></tr><tr><td>request.on(&#39;data&#39;, function(chunk){})<br>request.on(&#39;end&#39;, function(){});</td><td>è¯·æ±‚ä½“</td></tr></tbody></table><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><code>request.url</code> åªèƒ½è·å–è·¯å¾„ä»¥åŠæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ— æ³•è·å– <code>URL</code> ä¸­çš„åŸŸåä»¥åŠåè®®çš„å†…å®¹</li><li><code>request.headers</code> å°†è¯·æ±‚ä¿¡æ¯è½¬åŒ–æˆä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†å±æ€§åéƒ½è½¬åŒ–æˆäº†ã€å°å†™ã€</li><li>å…³äºè·¯å¾„ï¼šå¦‚æœè®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œåªå¡«å†™äº† <code>IP</code> åœ°å€æˆ–è€…æ˜¯åŸŸåä¿¡æ¯ï¼Œæ­¤æ—¶è¯·æ±‚çš„è·¯å¾„ä¸ºã€/ã€</li><li>å…³äº <code>favicon.ico</code>ï¼šè¿™ä¸ªè¯·æ±‚æ˜¯å±äºæµè§ˆå™¨è‡ªåŠ¨å‘é€çš„è¯·æ±‚</li></ul><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ http æ¨¡å—
const http = require(&#39;http&#39;)

// 2.åˆ›å»ºæœåŠ¡
const server = http.createServer((request, response) =&gt; {
    // è·å–è¯·æ±‚çš„æ–¹æ³•
    console.log(request.method)
    // è·å–è¯·æ±‚çš„ url
    console.log(request.url)
    // è·å– http åè®®ç‰ˆæœ¬å·
    console.log(request.httpVersion)
    // è·å–è¯·æ±‚å¤´
    console.log(request.headers)
    // è·å–è¯·æ±‚ä¸»æœºåœ°å€
    console.log(request.headers.host)

    response.end(&quot;hello world&quot;)
})

// 3.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£â€˜
server.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ http æ¨¡å—
const http = require(&#39;http&#39;)

// 2.åˆ›å»ºæœåŠ¡
const server = http.createServer((request, response) =&gt; {

    // 1.å£°æ˜ä¸€ä¸ªå˜é‡
    let body = &#39;&#39;

    // 2.ç»‘å®š data äº‹ä»¶
    request.on(&#39;data&#39;, chunk =&gt; {
        body += chunk
    })

    // 3.ç»‘å®š end äº‹ä»¶
    request.on(&#39;end&#39;, () =&gt; {
        console.log(body)
        response.end(&quot;hello world&quot;)
    })

})

// 3.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£â€˜
server.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ http æ¨¡å—
const http = require(&#39;http&#39;)

// 1.å¯¼å…¥ url æ¨¡å—
const url = require(&#39;url&#39;)

// 2.åˆ›å»ºæœåŠ¡
const server = http.createServer((request, response) =&gt; {
    // request: http://127.0.0.1:9000/search?keyword=123&amp;username=chen

    // 2.è§£æ request.url
    // let res1 = url.parse(request.url)
    // Url {
    //     protocol: null,
    //     slashes: null,
    //     auth: null,
    //     host: null,
    //     port: null,
    //     hostname: null,
    //     hash: null,
    //     search: &#39;?keyword=123&amp;username=chen&#39;,
    //     query: &#39;keyword=123&amp;username=chen&#39;,
    //     pathname: &#39;/search&#39;,
    //     path: &#39;/search?keyword=123&amp;username=chen&#39;,
    //     href: &#39;/search?keyword=123&amp;username=chen&#39;
    // }
    // console.log(res1)


    // let res2 = url.parse(request.url, true)
    // Url {
    //     protocol: null,
    //     slashes: null,
    //     auth: null,
    //     host: null,
    //     port: null,
    //     hostname: null,
    //     hash: null,
    //     search: &#39;?keyword=123&amp;username=chen&#39;,
    //     query: [Object: null prototype] {
    //         keyword: &#39;123&#39;,
    //         username: &#39;chen&#39;
    //     },
    //     pathname: &#39;/search&#39;,
    //     path: &#39;/search?keyword=123&amp;username=chen&#39;,
    //     href: &#39;/search?keyword=123&amp;username=chen&#39;
    // }
    // console.log(res2)

    let res = url.parse(request.url, true)
    // è¯·æ±‚è·¯å¾„
    // /search
    console.log(res.pathname)
    // æŸ¥è¯¢å­—ç¬¦ä¸²
    // 123
    console.log(res.query.keyword)

    response.end(&#39;hello world&#39;)
})

// 3.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£â€˜
server.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ http æ¨¡å—
const http = require(&#39;http&#39;)

// 2.åˆ›å»ºæœåŠ¡
const server = http.createServer((request, response) =&gt; {
    // request: http://127.0.0.1:9000/search?keyword=123&amp;username=chen

    // ç¬¬äºŒä¸ªå‚æ•°è¦å†™å®Œæ•´ http://127.0.0.1  åªå†™ ip ä¼šæŠ¥é”™
    let url = new URL(request.url, &#39;http://127.0.0.1&#39;)

    // URL {
    //     href: &#39;http://127.0.0.1/search?keyword=123&amp;username=chen&#39;,
    //     origin: &#39;http://127.0.0.1&#39;,
    //     protocol: &#39;http:&#39;,
    //     username: &#39;&#39;,
    //     password: &#39;&#39;,
    //     host: &#39;127.0.0.1&#39;,
    //     hostname: &#39;127.0.0.1&#39;,
    //     port: &#39;&#39;,
    //     pathname: &#39;/search&#39;,
    //     search: &#39;?keyword=123&amp;username=chen&#39;,
    //     searchParams: URLSearchParams {
    //         &#39;keyword&#39; =&gt; &#39;123&#39;, &#39;username&#39; =&gt; &#39;chen&#39;
    //     },
    //     hash: &#39;&#39;
    // }
    // console.log(url)

    // è¯·æ±‚è·¯å¾„
    console.log(url.pathname)

    // è¯·æ±‚è·¯å¾„å‚æ•°
    console.log(url.searchParams.get(&#39;keyword&#39;))

    response.end(&#39;hello world&#39;)
})

// 3.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£â€˜
server.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="_4-3-è®¾ç½®-http-å“åº”æŠ¥æ–‡" tabindex="-1"><a class="header-anchor" href="#_4-3-è®¾ç½®-http-å“åº”æŠ¥æ–‡" aria-hidden="true">#</a> 4.3 è®¾ç½® <code>http</code> å“åº”æŠ¥æ–‡</h3><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>response.statusCode</td><td>è®¾ç½®å“åº”çŠ¶æ€ç </td></tr><tr><td>response.statusMessage</td><td>è®¾ç½®å“åº”çŠ¶æ€æè¿°</td></tr><tr><td>response.setHeader(&#39;é”®å&#39;, &#39;é”®å€¼&#39;)</td><td>è®¾ç½®å“åº”å¤´ä¿¡æ¯</td></tr><tr><td>response.write(&#39;xx&#39;)response.end(&#39;xxx&#39;)</td><td>è®¾ç½®å“åº”ä½“</td></tr></tbody></table><p><code>write</code> å’Œ <code>end</code> çš„ä¸¤ç§ä½¿ç”¨æƒ…å†µï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.write å’Œ end çš„ç»“åˆä½¿ç”¨ å“åº”ä½“ç›¸å¯¹åˆ†æ•£
response.write(&#39;xx&#39;);
response.write(&#39;xx&#39;);
response.write(&#39;xx&#39;);

 //æ¯ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨å¤„ç†çš„æ—¶å€™å¿…é¡»è¦æ‰§è¡Œ end æ–¹æ³•ï¼Œä¸”åªèƒ½æ‰§è¡Œä¸€æ¬¡
response.end();

// 2.å•ç‹¬ä½¿ç”¨ end æ–¹æ³• å“åº”ä½“ç›¸å¯¹é›†ä¸­
response.end(&#39;xxx&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥ http æ¨¡å—
const http = require(&#39;http&#39;)

// 2.åˆ›å»ºæœåŠ¡
const server = http.createServer((request, response) =&gt; {

    // 1.è®¾ç½®å“åº”çŠ¶æ€ç 
    // response.statusCode = 200
    // response.statusCode = 404

    // 2.è®¾ç½®å“åº”ä¿¡æ¯ ä¸å¸¸ç”¨
    // response.statusMessage = &#39;hello world&#39;

    // 3.è®¾ç½®å“åº”å¤´
    response.setHeader(&#39;content-type&#39;, &#39;text/html;charset=utf-8&#39;)
    response.setHeader(&#39;Server&#39;, &#39;Node.js&#39;)
    response.setHeader(&#39;myHeader&#39;, &#39;myHeader&#39;)
    response.setHeader(&#39;test&#39;, [&#39;love&#39;, &#39;love&#39;, &#39;love&#39;])

    // 4.è®¾ç½®å“åº”ä½“
    response.write(&#39;love\r\n&#39;)
    response.write(&#39;love\r\n&#39;)
    response.write(&#39;love\r\n&#39;)
    response.write(&#39;love\r\n&#39;)

    response.end(&#39;hello world&#39;)

})

// 3.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£â€˜
server.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="_4-4-ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#_4-4-ç»ƒä¹ " aria-hidden="true">#</a> 4.4 ç»ƒä¹ </h3><h4 id="_4-4-1-http-è¯·æ±‚ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#_4-4-1-http-è¯·æ±‚ç»ƒä¹ " aria-hidden="true">#</a> 4.4.1 <code>http</code> è¯·æ±‚ç»ƒä¹ </h4><p>éœ€æ±‚ï¼š å½“è¯·æ±‚æ–¹å¼ä¸º <code>get</code> è¯·æ±‚æ—¶ï¼Œè¯·æ±‚è·¯å¾„ä¸º <code>/login</code> è¿”å› <code>login</code> å½“è¯·æ±‚æ–¹å¼ä¸º <code>get</code> è¯·æ±‚æ—¶ï¼Œè¯·æ±‚è·¯å¾„ä¸º <code>/register</code> è¿”å› <code>register</code></p><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>/**
 * éœ€æ±‚ï¼š
 *  å½“è¯·æ±‚æ–¹å¼ä¸º get è¯·æ±‚æ—¶ï¼Œè¯·æ±‚è·¯å¾„ä¸º /login è¿”å› login
 *  å½“è¯·æ±‚æ–¹å¼ä¸º get è¯·æ±‚æ—¶ï¼Œè¯·æ±‚è·¯å¾„ä¸º /register è¿”å› register
 */

// 1.å¼•å…¥ http æ¨¡å—
const http = require(&#39;http&#39;)

// 2.åˆ›å»ºæœåŠ¡
const server = http.createServer((request, response) =&gt; {

    // è¯·æ±‚æ–¹å¼
    let { method } = request

    // è¯·æ±‚è·¯å¾„
    let { pathname } = new URL(request.url, &#39;http://127.0.0.1&#39;)

    if (method === &#39;GET&#39; &amp;&amp; pathname === &#39;/login&#39;) {
        response.end(&#39;login&#39;)
    } else if (method === &#39;GET&#39; &amp;&amp; pathname === &#39;/register&#39;) {
        response.end(&#39;register&#39;)
    } else {
        response.end(&#39;hello world&#39;)
    }
})

// 3.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£â€˜
server.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h4 id="_4-4-1-http-å“åº”ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#_4-4-1-http-å“åº”ç»ƒä¹ " aria-hidden="true">#</a> 4.4.1 <code>http</code> å“åº”ç»ƒä¹ </h4><p>éœ€æ±‚ï¼š å›ä¸€ä¸ª 4 è¡Œ 3 åˆ—çš„è¡¨æ ¼ï¼Œä¸”è¦æ±‚è¡¨æ ¼æœ‰éš”è¡Œæ¢è‰²æ•ˆæœï¼Œä¸”ç‚¹å‡»å•å…ƒæ ¼èƒ½é«˜äº®æ˜¾ç¤º</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>/**
 * éœ€æ±‚ï¼š
 *  è¿”å›ä¸€ä¸ª4è¡Œ3åˆ—çš„è¡¨æ ¼ï¼Œä¸”è¦æ±‚è¡¨æ ¼æœ‰éš”è¡Œæ¢è‰²æ•ˆæœï¼Œä¸”ç‚¹å‡»å•å…ƒæ ¼èƒ½é«˜äº®æ˜¾ç¤º
 */


// 1.å¼•å…¥ http æ¨¡å—
const http = require(&#39;http&#39;)

// 2.åˆ›å»ºæœåŠ¡
const server = http.createServer((request, response) =&gt; {

    response.end(`
    &lt;!DOCTYPE html&gt;
        &lt;html lang=&quot;en&quot;&gt;

        &lt;head&gt;
            &lt;meta charset=&quot;UTF-8&quot;&gt;
            &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
            &lt;title&gt;Document&lt;/title&gt;
            &lt;style&gt;
                td {
                    padding: 20px 40px;
                }

                table tr:nth-child(odd) {
                    background: rgb(179, 165, 201);
                }

                table tr:nth-child(even) {
                    background: #fcb;
                }

                table,
                td {
                    border-collapse: collapse;
                }
            &lt;/style&gt;
        &lt;/head&gt;

        &lt;body&gt;
            &lt;table border=&quot;1&quot;&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/table&gt;
            &lt;script&gt;
                //è·å–æ‰€æœ‰çš„ td
                let tds = document.querySelectorAll(&#39;td&#39;);
                //éå†
                tds.forEach(item =&gt; {
                    item.onclick = function () {
                        this.style.background = &#39;#222&#39;;
                    }
                })
            &lt;/script&gt;
        &lt;/body&gt;

        &lt;/html&gt;
    `)

})

// 3.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£â€˜
server.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br></div></div><p>ä»£ç ä¼˜åŒ–ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>/**
 * éœ€æ±‚ï¼š
 *  è¿”å›ä¸€ä¸ª4è¡Œ3åˆ—çš„è¡¨æ ¼ï¼Œä¸”è¦æ±‚è¡¨æ ¼æœ‰éš”è¡Œæ¢è‰²æ•ˆæœï¼Œä¸”ç‚¹å‡»å•å…ƒæ ¼èƒ½é«˜äº®æ˜¾ç¤º
 */


// 1.å¼•å…¥ http æ¨¡å—
const http = require(&#39;http&#39;)

// 1.å¼•å…¥ fs æ¨¡å—
const fs = require(&#39;fs&#39;)

// 2.åˆ›å»ºæœåŠ¡
const server = http.createServer((request, response) =&gt; {

    // 2.è¯»å–æ–‡ä»¶å†…å®¹
    let file = fs.readFileSync(__dirname + &#39;/10-table.html&#39;)

    response.end(file)

})

// 3.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£â€˜
server.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_4-5-é™æ€èµ„æºæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_4-5-é™æ€èµ„æºæœåŠ¡" aria-hidden="true">#</a> 4.5 é™æ€èµ„æºæœåŠ¡</h3><blockquote><p>é™æ€èµ„æºæ˜¯æŒ‡<strong>å†…å®¹é•¿æ—¶é—´ä¸å‘ç”Ÿæ”¹å˜çš„èµ„æº</strong>ï¼Œä¾‹å¦‚å›¾ç‰‡ã€è§†é¢‘ã€<code>CSS</code> æ–‡ä»¶ã€<code>JS</code> æ–‡ä»¶ã€<code>HTML</code> æ–‡ä»¶ã€å­—ä½“æ–‡ä»¶ç­‰ã€‚</p></blockquote><blockquote><p>åŠ¨æ€èµ„æºæ˜¯æŒ‡<strong>å†…å®¹ç»å¸¸æ›´æ–°çš„èµ„æº</strong>ï¼Œä¾‹å¦‚ç™¾åº¦é¦–é¡µã€ç½‘æ˜“é¦–é¡µã€äº¬ä¸œæœç´¢åˆ—è¡¨é¡µé¢ç­‰ã€‚</p></blockquote><h4 id="_4-5-1-ç½‘é¡µä¸­çš„-url" tabindex="-1"><a class="header-anchor" href="#_4-5-1-ç½‘é¡µä¸­çš„-url" aria-hidden="true">#</a> 4.5.1 ç½‘é¡µä¸­çš„ <code>URL</code></h4><blockquote><p>ç½‘é¡µä¸­çš„ <code>URL</code> ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼šç›¸å¯¹è·¯å¾„ä¸ç»å¯¹è·¯å¾„</p></blockquote><p>ç»å¯¹è·¯å¾„å¯é æ€§å¼ºï¼Œè€Œä¸”ç›¸å¯¹å®¹æ˜“ç†è§£ï¼Œåœ¨é¡¹ç›®ä¸­è¿ç”¨è¾ƒå¤š</p><table><thead><tr><th>å½¢å¼</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>http://xxx.com/web</td><td>ç›´æ¥å‘ç›®æ ‡èµ„æºå‘é€è¯·æ±‚ï¼Œå®¹æ˜“ç†è§£ï¼Œç½‘ç«™çš„å¤–é“¾ä¼šç”¨åˆ°æ­¤å½¢å¼</td></tr><tr><td>//xxx.com/web</td><td>ä¸é¡µé¢ <code>URL</code> çš„åè®®æ‹¼æ¥å½¢æˆå®Œæ•´ <code>URL</code> å†å‘é€è¯·æ±‚ï¼Œå¤§å‹ç½‘ç«™ç”¨çš„æ¯”è¾ƒå¤š</td></tr><tr><td>/web</td><td>ä¸é¡µé¢ <code>URL</code> çš„åè®®ã€ä¸»æœºåã€ç«¯å£æ‹¼æ¥å½¢æˆå®Œæ•´ <code>URL</code> å†å‘é€è¯·æ±‚ï¼Œä¸­å°å‹ç½‘ç«™</td></tr></tbody></table><p>ç›¸å¯¹è·¯å¾„åœ¨å‘é€è¯·æ±‚æ—¶ï¼Œéœ€è¦ä¸å½“å‰é¡µé¢ <code>URL</code> è·¯å¾„è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°å®Œæ•´ <code>URL</code> åï¼Œå†å‘é€è¯·æ±‚ ä¾‹å¦‚å½“å‰ç½‘é¡µ <code>URL</code> ä¸º <code>http://www.xxx.com/course/h5.html</code></p><table><thead><tr><th>å½¢å¼</th><th>æœ€ç»ˆçš„ <code>URL</code></th></tr></thead><tbody><tr><td>./css/app.css</td><td>http://www.xxx.com/course/css/app.css</td></tr><tr><td>js/app.js</td><td>http://www.xxx.com/course/js/app.js</td></tr><tr><td>../img/logo.png</td><td>http://www.xxx.com/img/logo.png</td></tr><tr><td>../../mp4/show.mp4</td><td>http://www.atguigu.com/mp4/show.mp4</td></tr></tbody></table><h4 id="_4-5-2-è®¾ç½®èµ„æºç±»å‹-mime-ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_4-5-2-è®¾ç½®èµ„æºç±»å‹-mime-ç±»å‹" aria-hidden="true">#</a> 4.5.2 è®¾ç½®èµ„æºç±»å‹ï¼ˆ<code>mime</code> ç±»å‹ï¼‰</h4><blockquote><p>åª’ä½“ç±»å‹ï¼ˆé€šå¸¸ç§°ä¸º <code>Multipurpose Internet Mail Extensions</code> æˆ– <code>MIME</code> ç±»å‹ ï¼‰æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨æ¥è¡¨ç¤ºæ–‡æ¡£ã€æ–‡ä»¶æˆ–å­—èŠ‚æµçš„æ€§è´¨å’Œæ ¼å¼ã€‚</p></blockquote><p><code>mime</code> ç±»å‹ç»“æ„ï¼š <code>[type]/[subType]</code></p><p>ä¾‹å¦‚ï¼š <code>text/html</code> <code>text/css</code> <code>image/jpeg</code> <code>image/png</code> <code>application/json</code></p><p><code>http</code> æœåŠ¡å¯ä»¥è®¾ç½®å“åº”å¤´ <code>Content-Type</code> æ¥è¡¨æ˜å“åº”ä½“çš„ <code>mime</code> ç±»å‹ï¼Œæµè§ˆå™¨ä¼šæ ¹æ®è¯¥ç±»å‹å†³å®šå¦‚ä½•å¤„ç†èµ„æº ä¸‹é¢æ˜¯å¸¸è§æ–‡ä»¶å¯¹åº”çš„ <code>mime</code> ç±»å‹ï¼š</p><div class="language-Json ext-Json line-numbers-mode"><pre class="language-Json"><code>{
    html: &#39;text/html&#39;,
    css: &#39;text/css&#39;,
    js: &#39;text/javascript&#39;,
    png: &#39;image/png&#39;,
    jpg: &#39;image/jpeg&#39;,
    gif: &#39;image/gif&#39;,
    mp4: &#39;video/mp4&#39;,
    mp3: &#39;audio/mpeg&#39;,
    json: &#39;application/json&#39;
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>è¯´æ˜ï¼šå¯¹äºæœªçŸ¥çš„èµ„æºç±»å‹ï¼Œå¯ä»¥é€‰æ‹© <code>application/octet-stream</code> ç±»å‹ï¼Œæµè§ˆå™¨åœ¨é‡åˆ°è¯¥ç±»å‹çš„å“åº”æ—¶ï¼Œä¼šå¯¹å“åº”ä½“å†…å®¹è¿›è¡Œç‹¬ç«‹å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯<strong>ä¸‹è½½</strong>ã€‚</p></blockquote><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>/**
 * éœ€æ±‚ï¼š
 *  æ ¹æ®ä¸åŒçš„è¯·æ±‚è·¯å¾„ï¼Œè¿”å›ä¸åŒçš„æ–‡ä»¶
 */

// 1.å¼•å…¥æ¨¡å—
const http = require(&#39;http&#39;)
const fs = require(&#39;fs&#39;)

// 2.åˆ›å»ºæœåŠ¡
const server = http.createServer((request, response) =&gt; {

    // è·å–è¯·æ±‚è·¯å¾„
    let { pathname } = new URL(request.url, &#39;https://127.0.0.1:9000&#39;)
    if (pathname === &#39;/&#39;) {
        // è·å–è¦å“åº”çš„æ–‡ä»¶
        let data = fs.readFileSync(__dirname + &#39;/11-table.html&#39;)
        // è®¾ç½®å“åº”
        response.end(data)
    } else if (pathname === &#39;/index.css&#39;) {
        // è·å–è¦å“åº”çš„æ–‡ä»¶
        let data = fs.readFileSync(__dirname + &#39;/index.css&#39;)
        // è®¾ç½®å“åº”
        response.end(data)
    } else if (pathname === &#39;/index.js&#39;) {
        // è·å–è¦å“åº”çš„æ–‡ä»¶
        let data = fs.readFileSync(__dirname + &#39;/index.js&#39;)
        // è®¾ç½®å“åº”
        response.end(data)
    } else {
        response.end(`&lt;h1&gt;404 Not Found&lt;/h1&gt;`)
    }
})

// 3.å¯åŠ¨æœåŠ¡ï¼Œå¹¶ç›‘å¬ç«¯å£â€˜
server.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>ä»£ç ä¼˜åŒ–ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>/**
 * éœ€æ±‚ï¼š
 *  åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡ï¼Œç«¯å£ä¸º 9000ï¼Œæ»¡è¶³å¦‚ä¸‹éœ€æ±‚
 *      GET  /index.html        å“åº”  page/index.html çš„æ–‡ä»¶å†…å®¹
 *      GET  /css/app.css       å“åº”  page/css/app.css çš„æ–‡ä»¶å†…å®¹
 *      GET  /images/logo.png   å“åº”  page/images/logo.png çš„æ–‡ä»¶å†…å®¹
 */

// 1.å¼•å…¥æ¨¡å—
const http = require(&#39;http&#39;)
const fs = require(&#39;fs&#39;)
const path = require(&#39;path&#39;)

// 2.åˆ›å»ºæœåŠ¡
const server = http.createServer((request, response) =&gt; {

    // è·å–æ–‡ä»¶æ ¹è·¯å¾„
    let root = path.resolve(__dirname + &#39;/page&#39;)
    // è·å–æ–‡ä»¶è·¯å¾„
    let { pathname } = new URL(request.url, &#39;https://127.0.0.1:9000&#39;)
    // æ‹¼æ¥æ–‡ä»¶è·¯å¾„
    let filePath = root + pathname

    // è·å–æ–‡ä»¶
    fs.readFile(filePath, (error, data) =&gt; {
        // è®¾ç½®å­—ç¬¦é›†ï¼Œè§£å†³æ‰“å¼€æ–‡ä»¶ä¸­æ–‡ä¹±ç çš„é—®é¢˜
        response.setHeader(&#39;content-type&#39;, &#39;text/html;charset=utf-8&#39;)

        if (error) {
            response.end(&#39;è¯»å–æ–‡ä»¶é”™è¯¯&#39;)
        }

        response.end(data)
        return;
    })
})

// 3.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£
server.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>ä»£ç ä¼˜åŒ–ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>/**
 * éœ€æ±‚ï¼š
 *  åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡ï¼Œç«¯å£ä¸º 9000ï¼Œæ»¡è¶³å¦‚ä¸‹éœ€æ±‚
 *      GET  /index.html        å“åº”  page/index.html çš„æ–‡ä»¶å†…å®¹
 *      GET  /css/app.css       å“åº”  page/css/app.css çš„æ–‡ä»¶å†…å®¹
 *      GET  /images/logo.png   å“åº”  page/images/logo.png çš„æ–‡ä»¶å†…å®¹
 *  æ ¹æ®ä¸åŒçš„æ–‡ä»¶ç±»å‹ï¼Œè¿”å›ä¸åŒçš„ç±»å‹
 */

// 1.å¼•å…¥æ¨¡å—
const http = require(&#39;http&#39;)
const fs = require(&#39;fs&#39;)
const path = require(&#39;path&#39;)

// å£°æ˜ä¸€ä¸ªå˜é‡
let mimes = {
    html: &#39;text/html&#39;,
    css: &#39;text/css&#39;,
    js: &#39;text/javascript&#39;,
    png: &#39;image/png&#39;,
    jpg: &#39;image/jpeg&#39;,
    gif: &#39;image/gif&#39;,
    mp4: &#39;video/mp4&#39;,
    mp3: &#39;audio/mpeg&#39;,
    json: &#39;application/json&#39;
}

// 2.åˆ›å»ºæœåŠ¡
const server = http.createServer((request, response) =&gt; {

    // è·å–æ–‡ä»¶æ ¹è·¯å¾„
    let root = path.resolve(__dirname + &#39;/page&#39;)
    // è·å–æ–‡ä»¶è·¯å¾„
    let {
        pathname
    } = new URL(request.url, &#39;https://127.0.0.1:9000&#39;)
    // æ‹¼æ¥æ–‡ä»¶è·¯å¾„
    let filePath = root + pathname

    // è·å–æ–‡ä»¶
    fs.readFile(filePath, (error, data) =&gt; {

        if (error) {
            // è®¾ç½®å­—ç¬¦é›†ï¼Œè§£å†³æ‰“å¼€æ–‡ä»¶ä¸­æ–‡ä¹±ç çš„é—®é¢˜
            response.setHeader(&#39;content-type&#39;, &#39;text/html;charset=utf-8&#39;)
            switch(error.code) {
                case &#39;ENOENT&#39;:
                    response.statusCode = 404
                    response.end(`&lt;h1&gt;404 Not Found&lt;/h1&gt;`)
                    break;
                case &#39;EPERM&#39;:
                    response.statusCode = 403
                    response.end(`&lt;h1&gt;403 Forbidden&lt;/h1&gt;`)
                    break;
                default:
                    response.statusCode = 500
                    response.end(`&lt;h1&gt;500 Internal &lt;/h1&gt;`)
                    break;
            }
            return;
        }

        // è·å–æ–‡ä»¶åç¼€
        let ext = path.extname(filePath).slice(1)
        // è·å–å¯¹åº”çš„ç±»å‹
        let type = mimes[ext]
        if (type) {
            // åŒ¹é…åˆ°äº†
            if (ext === &#39;html&#39;) {
                response.setHeader(&#39;content-type&#39;, type + &#39;;charset=utf-8&#39;)
            } else {
                response.setHeader(&#39;content-type&#39;, type)
            }
        } else {
            // æ²¡æœ‰åŒ¹é…åˆ°
            // è¿™ç§è¿”å›æ ¼å¼å¯ä»¥å®ç°ä¸‹è½½æ•ˆæœ
            response.setHeader(&#39;content-type&#39;, &#39;application/octet-stream&#39;)
        }

        response.end(data)
    })
})

// 3.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£
server.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br></div></div><h4 id="_4-5-3-get-å’Œ-post-è¯·æ±‚çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_4-5-3-get-å’Œ-post-è¯·æ±‚çš„åŒºåˆ«" aria-hidden="true">#</a> 4.5.3 <code>GET</code> å’Œ <code>POST</code> è¯·æ±‚çš„åŒºåˆ«</h4><ul><li><code>GET</code> å’Œ <code>POST</code> æ˜¯ <code>http</code> åè®®è¯·æ±‚çš„ä¸¤ç§æ–¹å¼ã€‚</li><li><code>GET</code> ä¸»è¦ç”¨æ¥è·å–æ•°æ®ï¼Œ<code>POST</code> ä¸»è¦ç”¨æ¥æäº¤æ•°æ®</li><li><code>GET</code> å¸¦å‚æ•°è¯·æ±‚æ˜¯å°†å‚æ•°ç¼€åˆ° <code>URL</code> ä¹‹åï¼Œåœ¨åœ°å€æ ä¸­è¾“å…¥ <code>URL</code> è®¿é—®ç½‘ç«™å°±æ˜¯ <code>GET</code> è¯·æ±‚ï¼Œ<code>POST</code> å¸¦å‚æ•°è¯·æ±‚æ˜¯å°†å‚æ•°æ”¾åˆ°è¯·æ±‚ä½“ä¸­</li><li><code>POST</code> è¯·æ±‚ç›¸å¯¹ <code>GET</code> å®‰å…¨ä¸€äº›ï¼Œå› ä¸ºåœ¨æµè§ˆå™¨ä¸­å‚æ•°ä¼šæš´éœ²åœ¨åœ°å€æ </li><li><code>GET</code> è¯·æ±‚å¤§å°æœ‰é™åˆ¶ï¼Œä¸€èˆ¬ä¸º <code>2K</code>ï¼Œè€Œ <code>POST</code> è¯·æ±‚åˆ™æ²¡æœ‰å¤§å°é™åˆ¶</li></ul><h2 id="_5-æ¨¡å—åŒ–" tabindex="-1"><a class="header-anchor" href="#_5-æ¨¡å—åŒ–" aria-hidden="true">#</a> 5. æ¨¡å—åŒ–</h2><h3 id="_5-1-åŸºç¡€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_5-1-åŸºç¡€æ¦‚å¿µ" aria-hidden="true">#</a> 5.1 åŸºç¡€æ¦‚å¿µ</h3><blockquote><p>æ¨¡å—åŒ–ï¼šå°†ä¸€ä¸ªå¤æ‚çš„ç¨‹åºæ–‡ä»¶ä¾æ®ä¸€å®šè§„åˆ™ï¼ˆè§„èŒƒï¼‰æ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶çš„è¿‡ç¨‹ç§°ä¹‹ä¸º<strong>æ¨¡å—åŒ–</strong>ã€‚</p></blockquote><blockquote><p>æ¨¡å—ï¼šæ‹†åˆ†å‡ºçš„æ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ¨¡å—çš„å†…éƒ¨æ•°æ®æ˜¯ç§æœ‰çš„ï¼Œä¸è¿‡æ¨¡å—å¯ä»¥æš´éœ²å†…éƒ¨æ•°æ®ä»¥ä¾¿å…¶ä»–æ¨¡å—ä½¿ç”¨</p></blockquote><blockquote><p>æ¨¡å—åŒ–é¡¹ç›®ï¼šç¼–ç æ—¶æ˜¯æŒ‰ç…§æ¨¡å—ä¸€ä¸ªä¸€ä¸ªç¼–ç çš„ï¼Œ æ•´ä¸ªé¡¹ç›®å°±æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„é¡¹ç›®</p></blockquote><p>æ¨¡å—åŒ–å¥½å¤„ï¼š</p><ul><li>é˜²æ­¢å‘½åå†²çª</li><li>é«˜å¤ç”¨æ€§</li><li>é«˜ç»´æŠ¤æ€§</li></ul><h3 id="_5-2-æ¨¡å—æš´éœ²" tabindex="-1"><a class="header-anchor" href="#_5-2-æ¨¡å—æš´éœ²" aria-hidden="true">#</a> 5.2 æ¨¡å—æš´éœ²</h3><p>æ¨¡å—æš´éœ²çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ul><li><code>module.exports = value</code></li><li><code>exports.name = value</code></li></ul><blockquote><p>è¯´æ˜ï¼š</p><ul><li><code>module.exports</code> å¯ä»¥æš´éœ²ä»»æ„æ•°æ®å’Œæ–¹æ³•</li><li>ä¸èƒ½ä½¿ç”¨ <code>exports = value</code> çš„å½¢å¼æš´éœ²ï¼Œæ¨¡å—å†…éƒ¨ <code>module</code> ä¸ <code>exports</code> å…·æœ‰éšå¼å…³ç³» <code>exports = module.exports = {}</code>,<code>require</code> è¿”å›çš„æ˜¯ç›®æ ‡æ¨¡å—ä¸­ <code>module.exports</code> çš„å€¼</li></ul></blockquote><p>ä»£ç ç¤ºä¾‹ï¼š <code>hello.js</code></p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>const type = &#39;hello world&#39;

function helloWorld() {
    console.log(&#39;ä½ å¥½ï¼Œä¸–ç•Œ....&#39;)
}

// æš´éœ²æ•°æ®ã€æ–¹æ³•
module.exports = {
    type,
    helloWorld
}

// exports.type = type
// module.exports = helloWorld

// exports.type = type
// exports.helloWorld = helloWorld
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><code>index.js</code></p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¼•å…¥è‡ªå®šåº”æ¨¡å—
const hello = require(&#39;./hello&#39;)

// è°ƒç”¨æ¨¡å—æ•°æ®/æ–¹æ³•
console.log(hello)
hello.helloWorld()
// hello()
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_5-3-æ¨¡å—å¯¼å…¥" tabindex="-1"><a class="header-anchor" href="#_5-3-æ¨¡å—å¯¼å…¥" aria-hidden="true">#</a> 5.3 æ¨¡å—å¯¼å…¥</h3><p>åœ¨æ¨¡å—ä¸­ä½¿ç”¨ <code>require</code> ä¼ å…¥æ–‡ä»¶è·¯å¾„å³å¯å¼•å…¥æ–‡ä»¶ <code>require</code> ä½¿ç”¨çš„ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å¯¹äºè‡ªå·±åˆ›å»ºçš„æ¨¡å—ï¼Œå¯¼å…¥æ—¶è·¯å¾„å»ºè®®å†™<strong>ç›¸å¯¹è·¯å¾„</strong>ï¼Œä¸”ä¸èƒ½çœç•¥ <code>./</code> å’Œ <code>../</code></li><li><code>js</code> å’Œ <code>json</code> æ–‡ä»¶å¯¼å…¥æ—¶å¯ä»¥ä¸ç”¨å†™åç¼€ï¼Œ<code>c/c++</code> ç¼–å†™çš„ <code>node</code> æ‰©å±•æ–‡ä»¶ä¹Ÿå¯ä»¥ä¸å†™åç¼€ï¼Œä½†æ˜¯ä¸€èˆ¬ç”¨ä¸åˆ°</li><li>å¦‚æœå¯¼å…¥å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œä¼šä»¥ <code>js</code> æ–‡ä»¶è¿›è¡Œå¤„ç†</li><li>å¦‚æœå¯¼å…¥çš„è·¯å¾„æ˜¯ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ™ä¼šé¦–å…ˆæ£€æµ‹è¯¥æ–‡ä»¶å¤¹ä¸‹ <code>package.json</code> æ–‡ä»¶ä¸­ <code>main</code> å±æ€§å¯¹åº”çš„æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨åˆ™å¯¼å…¥ï¼Œåä¹‹å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ä¼šæŠ¥é”™ã€‚å¦‚æœ <code>main</code> å±æ€§ä¸å­˜åœ¨ï¼Œæˆ–è€… <code>package.json</code> ä¸å­˜åœ¨ï¼Œåˆ™ä¼šå°è¯•å¯¼å…¥æ–‡ä»¶å¤¹ä¸‹çš„ <code>index.js</code> å’Œ <code>index.json</code>ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æ‰¾åˆ°ï¼Œå°±ä¼šæŠ¥é”™</li><li>å¯¼å…¥ <code>node.js</code> å†…ç½®æ¨¡å—æ—¶ï¼Œç›´æ¥ <code>require</code> æ¨¡å—çš„åå­—å³å¯ï¼Œæ— éœ€åŠ  <code>./</code> å’Œ <code>../</code></li></ul><h3 id="_5-4-æ¨¡å—å¯¼å…¥æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_5-4-æ¨¡å—å¯¼å…¥æµç¨‹" aria-hidden="true">#</a> 5.4 æ¨¡å—å¯¼å…¥æµç¨‹</h3><p><code>require</code> å¯¼å…¥<strong>è‡ªå®šä¹‰æ¨¡å—</strong>çš„åŸºæœ¬æµç¨‹ï¼š</p><ol><li>å°†ç›¸å¯¹è·¯å¾„è½¬ä¸ºç»å¯¹è·¯å¾„ï¼Œå®šä½ç›®æ ‡æ–‡ä»¶</li><li>ç¼“å­˜æ£€æµ‹</li><li>è¯»å–ç›®æ ‡æ–‡ä»¶ä»£ç </li><li>åŒ…è£¹ä¸ºä¸€ä¸ªå‡½æ•°å¹¶æ‰§è¡Œï¼ˆè‡ªæ‰§è¡Œå‡½æ•°ï¼‰ï¼Œé€šè¿‡ <code>arguments.callee.toString()</code> æŸ¥çœ‹è‡ªæ‰§è¡Œå‡½æ•°</li><li>ç¼“å­˜æ¨¡å—çš„å€¼</li><li>è¿”å› <code>module.exports</code> çš„å€¼</li></ol><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>/**
 * require å¯¼å…¥åŸç† ä¼ªä»£ç 
 */

// 1.å¼•å…¥æ¨¡å—
const path = require(&#39;path&#39;)
const fs = require(&#39;fs&#39;)

// 2.å®šä¹‰ä¸€ä¸ªç¼“å­˜æ•°ç»„
let caches = []

function require(file) {
    // 3.å°†ç›¸å¯¹è·¯å¾„è½¬æˆç»å¯¹è·¯å¾„
    let absolutePath = path.resolve(__dirname, file)

    // 4.æ£€æµ‹æ˜¯å¦æœ‰ç¼“å­˜
    if (caches[absolutePath]) {
        return caches[absolutePath]
    }

    // 5.è¯»å–æ–‡ä»¶çš„ä»£ç 
    let code = fs.readFileSync(absolutePath).toString()
    // 6.å°è£…ä¸€ä¸ªå‡½æ•°
    let module = {}
    let exports = module.exports = {}

    (function (exports, require, module, __fileName, __dirname) {
        const test = {
            name: &#39;hello world&#39;
        }
        module.exports = test

        console.log(arguments.callee.toString())
    })(exports, require, module, __filename, __dirname)

    // 7.ç¼“å­˜ç»“æœ
    caches[absolutePath] = module.exports

    // 7.è¿”å› module.exports çš„å€¼
    return module.exports
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h2 id="_6-åŒ…ç®¡ç†å·¥å…·" tabindex="-1"><a class="header-anchor" href="#_6-åŒ…ç®¡ç†å·¥å…·" aria-hidden="true">#</a> 6. åŒ…ç®¡ç†å·¥å…·</h2><h3 id="_6-1-åŸºç¡€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_6-1-åŸºç¡€æ¦‚å¿µ" aria-hidden="true">#</a> 6.1 åŸºç¡€æ¦‚å¿µ</h3><p>åŒ…ï¼šè‹±æ–‡å•è¯æ˜¯ <code>package</code>ï¼Œä»£è¡¨äº†ä¸€ç»„ç‰¹å®šåŠŸèƒ½çš„æºç é›†åˆ åŒ…ç®¡ç†å·¥å…·ï¼šç®¡ç†<strong>åŒ…</strong>çš„åº”ç”¨è½¯ä»¶ï¼Œå¯ä»¥å¯¹<strong>åŒ…</strong>è¿›è¡Œä¸‹è½½å®‰è£…ã€æ›´æ–°ã€åˆ é™¤ã€ä¸Šä¼ ç­‰æ“ä½œã€‚å€ŸåŠ©åŒ…ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿå¼€å‘é¡¹ç›®ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚åŒ…ç®¡ç†å·¥å…·æ˜¯ä¸€ä¸ªé€šç”¨çš„æ¦‚å¿µï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰åŒ…ç®¡ç†å·¥å…·ï¼Œæ‰€ä»¥ æŒæ¡å¥½åŒ…ç®¡ç†å·¥å…·éå¸¸é‡è¦</p><p>å¸¸ç”¨çš„åŒ…ç®¡ç†å·¥å…·ï¼š</p><ul><li><code>npm</code></li><li><code>cnpm</code></li><li><code>yarn</code></li><li><code>pnpm</code></li></ul><h3 id="_6-2-npm" tabindex="-1"><a class="header-anchor" href="#_6-2-npm" aria-hidden="true">#</a> 6.2 <code>npm</code></h3><blockquote><p><code>npm</code> å…¨ç§° <code>Node Package Manager</code>,ç¿»è¯‘ä¸ºä¸­æ–‡æ„æ€æ˜¯<strong>Node çš„åŒ…ç®¡ç†å·¥å…·</strong></p></blockquote><blockquote><p><code>npm</code> æ˜¯ <code>Node.js</code> å®˜æ–¹å†…ç½®çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæ˜¯å¿…é¡»è¦æŒæ¡ä½çš„å·¥å…·</p></blockquote><p>å¸¸è§ä½¿ç”¨å‘½ä»¤ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>npm -v</code></td><td>æŸ¥çœ‹ç‰ˆæœ¬å·</td></tr><tr><td><code>npm init</code></td><td>å‘½ä»¤çš„ä½œç”¨æ˜¯å°†æ–‡ä»¶å¤¹åˆå§‹åŒ–ä¸ºä¸€ä¸ªåŒ…ï¼Œ äº¤äº’å¼åˆ›å»º <code>package.json</code> æ–‡ä»¶</td></tr><tr><td><code>npm s/search</code></td><td>æœç´¢åŒ…</td></tr><tr><td><code>npm install</code> <code>npm i</code></td><td>ä¸‹è½½å®‰è£…åŒ…</td></tr><tr><td><code>npm i -g</code></td><td>å…¨å±€å®‰è£…</td></tr><tr><td><code>npm i &lt;åŒ…å@ç‰ˆæœ¬å·&gt;</code></td><td>å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…</td></tr><tr><td><code>npm remove</code> <code>npm r</code></td><td>å±€éƒ¨åˆ é™¤ä¾èµ–</td></tr><tr><td><code>npm remove -g</code></td><td>å…¨å±€åˆ é™¤ä¾èµ–</td></tr></tbody></table><h4 id="_6-2-1-åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#_6-2-1-åˆå§‹åŒ–" aria-hidden="true">#</a> 6.2.1 åˆå§‹åŒ–</h4><p>åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼Œç„¶åä»¥æ­¤ç›®å½•ä½œä¸ºå·¥ä½œç›®å½•<strong>å¯åŠ¨å‘½ä»¤è¡Œå·¥å…·</strong>ï¼Œæ‰§è¡Œ <code>npm init</code>. <code>npm init</code> å‘½ä»¤çš„ä½œç”¨æ˜¯å°†æ–‡ä»¶å¤¹åˆå§‹åŒ–ä¸ºä¸€ä¸ª<strong>åŒ…</strong>ï¼Œäº¤äº’å¼åˆ›å»º <code>package.json</code> æ–‡ä»¶ã€‚ <code>package.json</code> æ–‡ä»¶æ˜¯åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œæ¯ä¸ªåŒ…éƒ½å¿…é¡»è¦æœ‰ï¼Œ <code>package.json</code> æ–‡ä»¶å†…å®¹ï¼š</p><div class="language-Json ext-Json line-numbers-mode"><pre class="language-Json"><code>{
    &quot;name&quot;: &quot;1-npm&quot;, #åŒ…çš„åå­—
    &quot;version&quot;: &quot;1.0.0&quot;, #åŒ…çš„ç‰ˆæœ¬
    &quot;description&quot;: &quot;&quot;, #åŒ…çš„æè¿°
    &quot;main&quot;: &quot;index.js&quot;, #åŒ…çš„å…¥å£æ–‡ä»¶
    &quot;scripts&quot;: { #è„šæœ¬é…ç½®
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
    },
    &quot;author&quot;: &quot;&quot;, #ä½œè€…
    &quot;license&quot;: &quot;ISC&quot; #å¼€æºè¯ä¹¦
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­è¿˜æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><code>name</code> ( åŒ…å ) ä¸èƒ½ä½¿ç”¨ä¸­æ–‡ã€å¤§å†™ï¼Œé»˜è®¤å€¼æ˜¯æ–‡ä»¶å¤¹çš„åç§° ï¼Œæ‰€ä»¥æ–‡ä»¶å¤¹åç§°ä¹Ÿä¸èƒ½ä½¿ç”¨ä¸­æ–‡å’Œå¤§å†™</li><li><code>version</code> ( ç‰ˆæœ¬å· )è¦æ±‚ <code>x.x.x</code> çš„å½¢å¼å®šä¹‰ï¼Œ <code>x</code> å¿…é¡»æ˜¯æ•°å­—ï¼Œé»˜è®¤å€¼æ˜¯ <code>1.0.0</code></li><li><code>ISC</code> è¯ä¹¦ä¸ <code>MIT</code> è¯ä¹¦åŠŸèƒ½ä¸Šæ˜¯ç›¸åŒçš„ï¼Œå…³äºå¼€æºè¯ä¹¦æ‰©å±•é˜…è¯» http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html</li><li><code>package.json</code> å¯ä»¥æ‰‹åŠ¨åˆ›å»ºä¸ä¿®æ”¹</li><li>ä½¿ç”¨ <code>npm init -y</code> æˆ–è€… <code>npm init --yes</code> æé€Ÿåˆ›å»º <code>package.json</code></li></ul></blockquote><h3 id="_6-2-2-åŒ…ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_6-2-2-åŒ…ç®¡ç†" aria-hidden="true">#</a> 6.2.2 åŒ…ç®¡ç†</h3><p>é€šè¿‡ <code>npm install</code> å’Œ <code>npm i</code> å‘½ä»¤å®‰è£…åŒ…</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm install uniq
npm i uniq
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¿è¡Œä¹‹åæ–‡ä»¶å¤¹ä¸‹ä¼šå¢åŠ ä¸¤ä¸ªèµ„æº</p><ul><li><code>node_modules</code> æ–‡ä»¶å¤¹å­˜æ”¾ä¸‹è½½çš„åŒ…ï¼Œ<code>node_modules</code> æ–‡ä»¶å¤¹å¤§å¤šæ•°æƒ…å†µéƒ½ä¸ä¼šå­˜å…¥ç‰ˆæœ¬åº“(<code>git</code>ã€<code>svn</code> ç­‰)</li><li><code>package-lock.json</code> åŒ…çš„é”æ–‡ä»¶ï¼Œç”¨æ¥é”å®šåŒ…çš„ç‰ˆæœ¬</li></ul><p>å¯ä»¥ä½¿ç”¨ <code>require</code> å¯¼å…¥ <code>npm</code> åŒ…</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¯¼å…¥ uniq åŒ…
const uniq = require(&#39;uniq&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>require</code> å¯¼å…¥çš„åŸºæœ¬æµç¨‹ï¼š</p><ul><li>åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ <code>node_modules</code> ä¸­å¯»æ‰¾åŒåçš„æ–‡ä»¶å¤¹</li><li>åœ¨ä¸Šçº§ç›®å½•ä¸­ä¸‹çš„ <code>node_modules</code> ä¸­å¯»æ‰¾åŒåçš„æ–‡ä»¶å¤¹ï¼Œç›´è‡³æ‰¾åˆ°ç£ç›˜æ ¹ç›®å½•</li></ul><p>å®‰è£…çš„åŒ…ï¼Œä¹Ÿç§°ä¸º<strong>ä¾èµ–</strong>ï¼Œ<strong>ä¾èµ–</strong>æœ‰<strong>ç”Ÿäº§ä¾èµ–</strong>ä¸<strong>å¼€å‘ä¾èµ–</strong>ï¼ŒäºŒè€…çš„ä½¿ç”¨å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç”Ÿäº§ä¾èµ–</td><td><code>npm i -S uniq</code> <code>npm i --save uniq</code></td><td><code>-S</code> ç­‰æ•ˆäº <code>--save</code>,<code>-S</code> æ˜¯é»˜è®¤é€‰é¡¹ åŒ…ä¿¡æ¯ä¿å­˜åœ¨ <code>package.json</code> ä¸­ <code>dependencies</code> å±æ€§</td></tr><tr><td>å¼€å‘ä¾èµ–</td><td><code>npm i -D less</code> <code>npm i --save-dev less</code></td><td><code>-D</code> ç­‰æ•ˆäº <code>--save-dev</code> åŒ…ä¿¡æ¯ä¿å­˜åœ¨ <code>package.json</code> ä¸­ <code>devDependencies</code> å±æ€§</td></tr></tbody></table><p>é¡¹ç›®ä¸­å¯èƒ½ä¼šé‡åˆ°ç‰ˆæœ¬ä¸åŒ¹é…çš„æƒ…å†µï¼Œæœ‰æ—¶å°±éœ€è¦å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm i jquery@1.11.2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¯ä»¥æ‰§è¡Œå®‰è£…é€‰é¡¹ <code>-g</code> è¿›è¡Œå…¨å±€å®‰è£…</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm i -g nodemon
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å…¨å±€å®‰è£…å®Œæˆä¹‹åå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œçš„ä»»ä½•ä½ç½®è¿è¡Œ <code>nodemon</code> å‘½ä»¤ï¼Œè¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯<strong>è‡ªåŠ¨é‡å¯ Node åº”ç”¨ç¨‹åº</strong></p><blockquote><p>è¯´æ˜ï¼š</p><ul><li>å…¨å±€å®‰è£…çš„å‘½ä»¤ä¸å—å·¥ä½œç›®å½•ä½ç½®å½±å“</li><li>å¯ä»¥é€šè¿‡ <code>npm root -g</code> å¯ä»¥æŸ¥çœ‹å…¨å±€å®‰è£…åŒ…çš„ä½ç½®</li><li>ä¸æ˜¯æ‰€æœ‰çš„åŒ…éƒ½é€‚åˆå…¨å±€å®‰è£…ï¼Œåªæœ‰å…¨å±€ç±»çš„å·¥å…·æ‰é€‚åˆï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹åŒ…çš„å®˜æ–¹æ–‡æ¡£æ¥ç¡®å®š</li></ul></blockquote><p>é¡¹ç›®ä¸­å¯èƒ½éœ€è¦åˆ é™¤æŸäº›ä¸éœ€è¦çš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>## å±€éƒ¨åˆ é™¤
npm remove uniq
npm r uniq
## å…¨å±€åˆ é™¤
npm remove -g nodemon
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_6-2-3-å¯åŠ¨é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_6-2-3-å¯åŠ¨é¡¹ç›®" aria-hidden="true">#</a> 6.2.3 å¯åŠ¨é¡¹ç›®</h3><p>å¯ä»¥é€šè¿‡é…ç½® <code>package.json</code> ä¸­çš„ <code>scripts</code> å±æ€§æ¥å¯åŠ¨é¡¹ç›®</p><div class="language-Json ext-Json line-numbers-mode"><pre class="language-Json"><code>{
    &quot;scripts&quot;: {
        &quot;server&quot;: &quot;node server.js&quot;,
        &quot;start&quot;: &quot;node index.js&quot;,
    },
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>é…ç½®å®Œæˆä¹‹åï¼Œæ‰§è¡Œå‘½ä»¤å¯åŠ¨é¡¹ç›®</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm run server
npm run start
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸è¿‡ <code>start</code> æ¯”è¾ƒç‰¹åˆ«ï¼Œä½¿ç”¨æ—¶å¯ä»¥çœç•¥ <code>run</code></p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm start
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p><code>npm run</code> æœ‰è‡ªåŠ¨å‘ä¸Šçº§ç›®å½•æŸ¥æ‰¾çš„ç‰¹æ€§ï¼Œè·Ÿ <code>require</code> å‡½æ•°ä¸€æ ·</p></blockquote><h3 id="_6-3-cnpm" tabindex="-1"><a class="header-anchor" href="#_6-3-cnpm" aria-hidden="true">#</a> 6.3 <code>cnpm</code></h3><p><code>cnpm</code> æ˜¯ä¸€ä¸ªæ·˜å®æ„å»ºçš„ <code>npmjs.com</code> çš„å®Œæ•´é•œåƒï¼Œä¹Ÿç§°ä¸º<strong>æ·˜å®é•œåƒ</strong>ï¼Œç½‘å€ï¼šhttps://npmmirror.com/ã€‚ <code>cnpm</code> æœåŠ¡éƒ¨ç½²åœ¨å›½å†…é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥æé«˜åŒ…çš„ä¸‹è½½é€Ÿåº¦ã€‚å®˜æ–¹ä¹Ÿæä¾›äº†ä¸€ä¸ªå…¨å±€å·¥å…·åŒ… <code>cnpm</code>ï¼Œæ“ä½œå‘½ä»¤ä¸ <code>npm</code> å¤§ä½“ç›¸åŒã€‚</p><p>å¯ä»¥é€šè¿‡ <code>npm</code> æ¥å®‰è£… <code>cnpm</code> å·¥å…·ï¼š</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm install -g cnpm --registry=https://registry.npmmirror.com
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¸¸ç”¨æ“ä½œå‘½ä»¤ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>cnpm init</code> / <code>cnpm init</code></td><td>åˆå§‹åŒ–</td></tr><tr><td><code>cnpm i uniq</code> <code>cnpm i -S uniq</code> <code>cnpm i -D uniq</code> <code>cnpm i -g nodemon</code></td><td>å®‰è£…åŒ…</td></tr><tr><td><code>cnpm i</code></td><td>å®‰è£…é¡¹ç›®ä¾èµ–</td></tr><tr><td><code>cnpm r uniq</code></td><td>åˆ é™¤</td></tr></tbody></table><p>ç”¨ <code>npm</code> ä¹Ÿå¯ä»¥ä½¿ç”¨æ·˜å®é•œåƒï¼Œé…ç½®çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ul><li>ç›´æ¥é…ç½®</li><li>å·¥å…·é…ç½®</li></ul><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯å®Œæˆé…ç½®ï¼š</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm config set registry https://registry.npmmirror.com/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä½¿ç”¨ <code>nrm</code> é…ç½® <code>npm</code> çš„é•œåƒåœ°å€ <code>npm registry manager</code></p><ol><li>å®‰è£… <code>nrm</code><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm i -g nrm
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>ä¿®æ”¹é•œåƒ<div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code> nrm use taobao
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸï¼ˆé€‰åšï¼‰<div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm config list
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div>æ£€æŸ¥ <code>registry</code> åœ°å€æ˜¯å¦ä¸º <code>https://registry.npmmirror.com/</code>, å¦‚æœæ˜¯åˆ™è¡¨æ˜æˆåŠŸ</li></ol><blockquote><p>è¡¥å……è¯´æ˜ï¼š</p><ul><li>å»ºè®®ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼è¿›è¡Œé•œåƒé…ç½®ï¼Œå› ä¸ºåç»­ä¿®æ”¹èµ·æ¥ä¼šæ¯”è¾ƒæ–¹ä¾¿</li><li>è™½ç„¶ <code>cnpm</code> å¯ä»¥æé«˜é€Ÿåº¦ï¼Œä½†æ˜¯ <code>npm</code> ä¹Ÿå¯ä»¥é€šè¿‡æ·˜å®é•œåƒè¿›è¡ŒåŠ é€Ÿï¼Œæ‰€ä»¥ <code>npm</code> çš„ä½¿ç”¨ç‡è¿˜æ˜¯é«˜äº <code>cnpm</code></li></ul></blockquote><h3 id="_6-4-yarn" tabindex="-1"><a class="header-anchor" href="#_6-4-yarn" aria-hidden="true">#</a> 6.4 <code>yarn</code></h3><p><code>yarn</code> æ˜¯ç”± <code>Facebook</code> åœ¨ 2016 å¹´æ¨å‡ºçš„æ–°çš„ <code>Javascript</code> åŒ…ç®¡ç†å·¥å…·ï¼Œå®˜æ–¹ç½‘å€ï¼šhttps://yarnpkg.com/</p><p><code>yarn</code> ç‰¹ç‚¹ï¼š</p><ul><li>é€Ÿåº¦è¶…å¿«ï¼š<code>yarn</code> ç¼“å­˜äº†æ¯ä¸ªä¸‹è½½è¿‡çš„åŒ…ï¼Œæ‰€ä»¥å†æ¬¡ä½¿ç”¨æ—¶æ— éœ€é‡å¤ä¸‹è½½ã€‚åŒæ—¶åˆ©ç”¨å¹¶è¡Œä¸‹è½½ä»¥æœ€å¤§åŒ–èµ„æºåˆ©ç”¨ç‡ï¼Œå› æ­¤å®‰è£…é€Ÿåº¦æ›´å¿«ã€‚</li><li>è¶…çº§å®‰å…¨ï¼šåœ¨æ‰§è¡Œä»£ç ä¹‹å‰ï¼Œ<code>yarn</code> ä¼šé€šè¿‡ç®—æ³•æ ¡éªŒæ¯ä¸ªå®‰è£…åŒ…çš„å®Œæ•´æ€§</li><li>è¶…çº§å¯é ï¼šä½¿ç”¨è¯¦ç»†ã€ç®€æ´çš„é”æ–‡ä»¶æ ¼å¼å’Œæ˜ç¡®çš„å®‰è£…ç®—æ³•ï¼Œ<code>yarn</code> èƒ½å¤Ÿä¿è¯åœ¨ä¸åŒç³»ç»Ÿä¸Šæ— å·®å¼‚çš„å·¥ä½œ</li></ul><p>å¯ä»¥ä½¿ç”¨ <code>npm</code> å®‰è£… <code>yarn</code></p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm i -g yarn
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>yarn</code> å¸¸ç”¨å‘½ä»¤ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>yarn init</code> / <code>yarn init -y</code></td><td>åˆå§‹åŒ–</td></tr><tr><td><code>yarn add uniq</code> ç”Ÿäº§ä¾èµ– <code>yarn add less --dev</code> å¼€å‘ä¾èµ– <code>yarn global add nodemon</code> å…¨å±€å®‰è£…</td><td>å®‰è£…åŒ…</td></tr><tr><td><code>yarn remove uniq</code> åˆ é™¤é¡¹ç›®ä¾èµ–åŒ… <code>yarn global remove nodemon</code> å…¨å±€åˆ é™¤åŒ…</td><td>åˆ é™¤åŒ…</td></tr><tr><td><code>yarn</code>/<code>yarn install</code></td><td>å®‰è£…é¡¹ç›®ä¾èµ–</td></tr><tr><td><code>yarn</code> # ä¸éœ€è¦æ·»åŠ  <code>run</code></td><td>è¿è¡Œå‘½ä»¤åˆ«å</td></tr></tbody></table><p>å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤é…ç½®æ·˜å®é•œåƒ</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>yarn config set registry https://registry.npmmirror.com/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æŸ¥çœ‹ <code>yarn</code> çš„é…ç½®é¡¹</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>yarn config list
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>npm</code> å’Œ <code>yarn</code> é€‰æ‹©ï¼š</p><ul><li>ä¸ªäººé¡¹ç›®ï¼šå¦‚æœæ˜¯ä¸ªäººé¡¹ç›®ï¼Œ å“ªä¸ªå·¥å…·éƒ½å¯ä»¥ ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥é€‰æ‹©</li><li>å…¬å¸é¡¹ç›®ï¼šå¦‚æœæ˜¯å…¬å¸è¦æ ¹æ®é¡¹ç›®ä»£ç æ¥é€‰æ‹©ï¼Œå¯ä»¥ é€šè¿‡<strong>é”æ–‡ä»¶</strong>åˆ¤æ–­é¡¹ç›®çš„åŒ…ç®¡ç†å·¥å…· <ul><li><code>npm</code> çš„é”æ–‡ä»¶ä¸º <code>package-lock.json</code></li><li><code>yarn</code> çš„é”æ–‡ä»¶ä¸º <code>yarn.lock</code></li></ul></li></ul><blockquote><p>åˆ‡è®°ï¼šåŒ…ç®¡ç†å·¥å…·ä¸è¦æ··ç€ç”¨</p></blockquote><h3 id="_6-5-ç®¡ç†å‘å¸ƒåŒ…" tabindex="-1"><a class="header-anchor" href="#_6-5-ç®¡ç†å‘å¸ƒåŒ…" aria-hidden="true">#</a> 6.5 ç®¡ç†å‘å¸ƒåŒ…</h3><p>å¯ä»¥å°†è‡ªå·±å¼€å‘çš„å·¥å…·åŒ…å‘å¸ƒåˆ° <code>npm</code> æœåŠ¡ä¸Šï¼Œæ–¹ä¾¿è‡ªå·±å’Œå…¶ä»–å¼€å‘è€…ä½¿ç”¨ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºæ–‡ä»¶ <code>index.js</code>ï¼Œ åœ¨æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°ï¼Œä½¿ç”¨ <code>module.exports</code> æš´éœ²</li><li><code>npm</code> åˆå§‹åŒ–å·¥å…·åŒ…ï¼Œ<code>package.json</code> å¡«å†™åŒ…çš„ä¿¡æ¯ (åŒ…çš„åå­—æ˜¯å”¯ä¸€çš„)</li><li>æ³¨å†Œè´¦å·ï¼šhttps://www.npmjs.com/signup</li><li>æ¿€æ´»è´¦å·ï¼ˆä¸€å®šè¦æ¿€æ´»è´¦å·ï¼‰</li><li>ä¿®æ”¹ä¸ºå®˜æ–¹çš„å®˜æ–¹é•œåƒ(å‘½ä»¤è¡Œä¸­è¿è¡Œ <code>nrm use npm</code>)</li><li>å‘½ä»¤è¡Œä¸‹ <code>npm login</code> å¡«å†™ç›¸å…³ç”¨æˆ·ä¿¡æ¯</li><li>å‘½ä»¤è¡Œä¸‹ <code>npm publish</code> æäº¤åŒ…</li></ol><p>åç»­å¯ä»¥å¯¹è‡ªå·±å‘å¸ƒçš„åŒ…è¿›è¡Œæ›´æ–°ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>æ›´æ–°åŒ…ä¸­çš„ä»£ç </li><li>æµ‹è¯•ä»£ç æ˜¯å¦å¯ç”¨</li><li>ä¿®æ”¹ <code>package.json</code> ä¸­çš„ç‰ˆæœ¬å·</li><li>å‘å¸ƒæ›´æ–°å‘½ä»¤ <code>npm publish</code></li></ol><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ é™¤åŒ…</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm unpublish --force
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>åˆ é™¤åŒ…éœ€è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼Œhttps://docs.npmjs.com/policies/unpublish</p><ul><li>æ˜¯åŒ…çš„ä½œè€…</li><li>å‘å¸ƒå°äº 24 å°æ—¶</li><li>å¤§äº 24 å°æ—¶åï¼Œæ²¡æœ‰å…¶ä»–åŒ…ä¾èµ–ï¼Œå¹¶ä¸”æ¯å‘¨å°äº 300 ä¸‹è½½é‡ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªç»´æŠ¤è€…</li></ul><h3 id="_6-6-nvm" tabindex="-1"><a class="header-anchor" href="#_6-6-nvm" aria-hidden="true">#</a> 6.6 <code>nvm</code></h3><blockquote><p><code>nvm</code> å…¨ç§° <code>Node Version Manager</code> é¡¾åæ€ä¹‰å®ƒæ˜¯ç”¨æ¥ç®¡ç† <code>Node</code> ç‰ˆæœ¬çš„å·¥å…·ï¼Œæ–¹ä¾¿åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„ <code>Node.js</code>ã€‚</p></blockquote><blockquote><p><code>nvm</code> çš„ä½¿ç”¨éå¸¸çš„ç®€å•ï¼Œè·Ÿ <code>npm</code> çš„ä½¿ç”¨æ–¹æ³•ç±»ä¼¼ã€‚</p></blockquote><blockquote><p>ä¸‹è½½åœ°å€ https://github.com/coreybutler/nvm-windows/releases</p></blockquote><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>nvm list available</code></td><td>æ˜¾ç¤ºæ‰€æœ‰å¯ä»¥ä¸‹è½½çš„ <code>Node.js</code> ç‰ˆæœ¬</td></tr><tr><td><code>nvm list</code></td><td>æ˜¾ç¤ºå·²å®‰è£…çš„ç‰ˆæœ¬</td></tr><tr><td><code>nvm install 18.12.1</code></td><td>å®‰è£… <code>18.12.1</code> ç‰ˆæœ¬çš„ <code>Node.js</code></td></tr><tr><td><code>nvm install latest</code></td><td>å®‰è£…æœ€æ–°ç‰ˆçš„ <code>Node.js</code></td></tr><tr><td><code>nvm uninstall 18.12.1</code></td><td>åˆ é™¤æŸä¸ªç‰ˆæœ¬çš„ <code>Node.js</code></td></tr><tr><td><code>nvm use 18.12.1</code></td><td>åˆ‡æ¢ <code>18.12.1</code> çš„ <code>Node.js</code></td></tr></tbody></table><h2 id="_7-express-æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#_7-express-æ¡†æ¶" aria-hidden="true">#</a> 7. <code>express</code> æ¡†æ¶</h2><h3 id="_7-1-ä»‹ç»ä¸ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_7-1-ä»‹ç»ä¸ä½¿ç”¨" aria-hidden="true">#</a> 7.1 ä»‹ç»ä¸ä½¿ç”¨</h3><blockquote><p><code>express</code> æ˜¯ä¸€ä¸ªåŸºäº <code>Node.js</code> å¹³å°çš„æç®€ã€çµæ´»çš„ <code>WEB</code> åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®˜æ–¹ç½‘å€ï¼š<code>https://www.expressjs.com.cn/</code></p></blockquote><blockquote><p>ç®€å•æ¥è¯´ï¼Œ<code>express</code> æ˜¯ä¸€ä¸ªå°è£…å¥½çš„å·¥å…·åŒ…ï¼Œå°è£…äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä¾¿äºæˆ‘ä»¬å¼€å‘ <code>web</code> åº”ç”¨ï¼ˆ<code>http</code> æœåŠ¡ï¼‰</p></blockquote><p><code>express</code> ä¸‹è½½ <code>express</code> æœ¬èº«æ˜¯ä¸€ä¸ª <code>npm</code> åŒ…ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ <code>npm</code> å®‰è£…ï¼š</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm init
npm i express
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>express</code> åˆä½“éªŒï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// 2.åˆ›å»ºæœåŠ¡
const app = express()

// 3.åˆ›å»ºè·¯ç”±
app.get(&#39;/hello&#39;, (req, resp) =&gt; {
    resp.end(&#39;hello world&#39;)
})

// 4.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£
app.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_7-2-è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#_7-2-è·¯ç”±" aria-hidden="true">#</a> 7.2 è·¯ç”±</h3><h4 id="_7-2-1-è·¯ç”±åˆä½“éªŒ" tabindex="-1"><a class="header-anchor" href="#_7-2-1-è·¯ç”±åˆä½“éªŒ" aria-hidden="true">#</a> 7.2.1 è·¯ç”±åˆä½“éªŒ</h4><blockquote><p>å®˜æ–¹å®šä¹‰ï¼šè·¯ç”±ç¡®å®šäº†åº”ç”¨ç¨‹åºå¦‚ä½•å“åº”å®¢æˆ·ç«¯å¯¹ç‰¹å®šç«¯ç‚¹çš„è¯·æ±‚ã€‚</p></blockquote><p>ä¸€ä¸ªè·¯ç”±çš„ç»„æˆæœ‰è¯·æ±‚æ–¹æ³•ã€è·¯å¾„ã€å›è°ƒå‡½æ•°ç»„æˆã€‚ <code>express</code> ä¸­æä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨è·¯ç”±ï¼Œä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>app.&lt;method&gt;(pathï¼Œcallback)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¼•å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// 2.åˆ›å»ºæœåŠ¡
const app = express()

// 3.åˆ›å»ºè·¯ç”±
// get è¯·æ±‚
app.get(&#39;/hello&#39;, (req, resp) =&gt; {
    resp.end(&#39;hello world&#39;)
})

// é¦–é¡µè·¯ç”±
app.get(&#39;/&#39;, (req, resp) =&gt; {
    resp.end(&#39;home&#39;)
})

// post è¯·æ±‚
app.post(&#39;/login&#39;, (req, resp) =&gt; {
    resp.end(&#39;login&#39;)
})

// æ‰€æœ‰çš„è¯·æ±‚æ–¹å¼éƒ½å¯ä»¥
app.all(&#39;/register&#39;, (req, resp) =&gt; {
    resp.end(&#39;register&#39;)
})

// 404
app.all(&#39;*&#39;, (req, resp) =&gt; {
    resp.end(`&lt;h1&gt;404 Not Found&lt;/h1&gt;`)
})

// 4.å¯åŠ¨æœåŠ¡å¹¶ç›‘å¬ç«¯å£
app.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h4 id="_7-2-2-è·å–è¯·æ±‚å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_7-2-2-è·å–è¯·æ±‚å‚æ•°" aria-hidden="true">#</a> 7.2.2 è·å–è¯·æ±‚å‚æ•°</h4><p><code>express</code> æ¡†æ¶å°è£…äº†ä¸€äº› <code>API</code> æ¥æ–¹ä¾¿è·å–è¯·æ±‚æŠ¥æ–‡ä¸­çš„æ•°æ®ï¼Œå¹¶ä¸”å…¼å®¹åŸç”Ÿ <code>http</code> æ¨¡å—çš„è·å–æ–¹å¼.ã€‚ ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¼•å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const app = express()

// åˆ›å»ºè·¯ç”±
app.get(&#39;/hello&#39;, (req, resp) =&gt; {

    // åŸç”Ÿæ–¹å¼
    // console.log(req.method)
    // console.log(req.url)
    // console.log(req.httpVersion)
    // console.log(req.headers)

    // express æ“ä½œ
    console.log(req.path)
    console.log(req.query)
    // è·å–è¯·æ±‚ip
    console.log(req.ip)

    resp.end(&#39;hello world&#39;)
})

// ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><code>express</code> æ¡†æ¶ä¹Ÿå¯ä»¥è·å–åˆ°è·¯ç”±å‚æ•°ã€‚è·¯ç”±å‚æ•°æŒ‡çš„æ˜¯ <code>URL</code> è·¯å¾„ä¸­çš„å‚æ•°ï¼ˆæ•°æ®ï¼‰ã€‚ ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¯¼å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const app = express()

// åˆ›å»ºè·¯ç”±
app.get(&#39;/:id/:token&#39;, (req, resp) =&gt; {
    console.log(req.params.id, req.params.token)
    resp.end(&#39;hello world&#39;)
})

// ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>express</code> å¯ä»¥ä½¿ç”¨ <code>body-parser</code> åŒ…å¤„ç†è¯·æ±‚ä½“ã€‚ å®‰è£… <code>body-parser</code></p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm i body-parser
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>/**
 * éœ€æ±‚ï¼š
 *  GET   /login  æ˜¾ç¤ºè¡¨å•ç½‘é¡µ
 *  POST  /login  è·å–è¡¨å•ä¸­çš„ã€ç”¨æˆ·åã€å’Œã€å¯†ç ã€
 */

// å¯¼å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// ä½¿ç”¨ body-parser è·å–è¯·æ±‚ä½“æ•°æ®
// å®‰è£… body-parser
// npm i body-parser
// å¯¼å…¥
const bodyParser = require(&#39;body-parser&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const app = express()

// è§£æ json è¯·æ±‚æ ¼å¼çš„è¯·æ±‚ä½“ä¸­é—´ä»¶
const jsonParser = bodyParser.json()

// è§£æ queryString è¯·æ±‚æ ¼å¼çš„è¯·æ±‚ä½“ä¸­é—´ä»¶
const urlencodedParser = bodyParser.urlencoded({extended: false})

// åˆ›å»ºè·¯ç”±
app.get(&#39;/login&#39;, (req, resp) =&gt; {
    resp.sendFile(__dirname + &#39;/11-form.html&#39;)
})

app.post(&#39;/login&#39;, urlencodedParser, (req, resp) =&gt; {

    // è·å–ç”¨æˆ·åå’Œå¯†ç 
    console.log(req.body)
    resp.send(&#39;ç™»å½•æˆåŠŸ&#39;)
})

app.all(&#39;*&#39;, (req, resp) =&gt; {
    resp.send(`&lt;h1&gt;404 Not Found&lt;/h1&gt;`)
})

// ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h4 id="_7-2-3-è®¾ç½®å“åº”" tabindex="-1"><a class="header-anchor" href="#_7-2-3-è®¾ç½®å“åº”" aria-hidden="true">#</a> 7.2.3 è®¾ç½®å“åº”</h4><p><code>express</code> æ¡†æ¶å°è£…äº†ä¸€äº› <code>API</code> æ¥æ–¹ä¾¿ç»™å®¢æˆ·ç«¯å“åº”æ•°æ®ï¼Œå¹¶ä¸”å…¼å®¹åŸç”Ÿ <code>http</code> æ¨¡å—çš„è·å–æ–¹å¼ã€‚ ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¼•å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const app = express()

// åˆ›å»ºè·¯ç”±
app.get(&#39;/hello&#39;, (req, resp) =&gt; {
    // åŸç”Ÿå“åº”
    // resp.statusCode = 404
    // resp.statusMessage = &#39;Not Found&#39;
    // resp.setHeader(&#39;aaaa&#39;, &#39;bbbb&#39;)
    // resp.write(&#39;hello express &#39;)

    // express æ“ä½œ
    // resp.status(500)
    // resp.set(&#39;aaa&#39;, &#39;123&#39;)
    // è‡ªåŠ¨è¿”å› utf8 ç¼–ç ã€‚æ­¤æ—¶æ— éœ€å†å†™ resp.end()
    // resp.send(&#39;hello express &#39;)

    // å¯ä»¥é“¾å¼è°ƒç”¨
    resp.status(500).set(&#39;xxx&#39;, &#39;yyy&#39;).send(&#39;ä½ å¥½ï¼Œä¸–ç•Œ&#39;)
})

// ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>è¿˜å¯ä»¥è®¾ç½®å…¶ä»–å“åº”ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¯¼å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const app = express()

// åˆ›å»ºè·¯ç”±
app.get(&#39;/hello&#39;, (req, resp) =&gt; {
    // resp.end(&#39;hello world&#39;)

    // é‡å®šå‘
    // resp.redirect(&#39;https://www.baidu.com&#39;)

    // ä¸‹è½½å“åº”
    // resp.download(__dirname + &#39;/singers.json&#39;)

    // è¿”å›json
    // resp.json({
    //     username: &#39;å¼ ä¸‰&#39;,
    //     age: 18
    // })

    // è¿”å›æ–‡ä»¶å†…å®¹
    resp.sendFile(__dirname + &#39;/2-form.html&#39;)
})

// ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h4 id="_7-2-4-è·¯ç”±æ¨¡å—åŒ–" tabindex="-1"><a class="header-anchor" href="#_7-2-4-è·¯ç”±æ¨¡å—åŒ–" aria-hidden="true">#</a> 7.2.4 è·¯ç”±æ¨¡å—åŒ–</h4><p>å¯¹è·¯ç”±è¿›è¡Œæ¨¡å—åŒ–ï¼Œå¯ä»¥æ›´å¥½çš„ç®¡ç†è·¯ç”±ã€‚</p><p><code>admin.js</code> è·¯ç”±</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¯¼å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const router = express()

// åˆ›å»ºè·¯ç”±
router.get(&#39;/admin&#39;, (req, resp) =&gt; {
    resp.send(&#39;åå°é¦–é¡µ&#39;)
})

router.get(&#39;/setting&#39;, (req, resp) =&gt; {
    resp.send(&#39;ä¸ªäººè®¾ç½®&#39;)
})

module.exports = router
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>home.js</code> è·¯ç”±</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¯¼å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const router = express()

// åˆ›å»ºè·¯ç”±
router.get(&#39;/&#39;, (req, resp) =&gt; {
    resp.send(&#39;å‰å°é¦–é¡µ&#39;)
})

router.get(&#39;/home&#39;, (req, resp) =&gt; {
    resp.send(&#39;home&#39;)
})

module.exports = router
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>index.js</code> è·¯ç”±</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¯¼å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const app = express()

// åˆ›å»ºè·¯ç”±
// å¯¼å…¥è·¯ç”±
const admin = require(&#39;./routes/admin&#39;)
const home = require(&#39;./routes/home&#39;)

app.use(admin)
app.use(home)

app.all(&#39;*&#39;, (req, resp) =&gt; {
    resp.send(`&lt;h1&gt;404 Not Found&lt;/h1&gt;`)
})

// ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_7-3-ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_7-3-ä¸­é—´ä»¶" aria-hidden="true">#</a> 7.3 ä¸­é—´ä»¶</h3><blockquote><p>ä¸­é—´ä»¶ï¼ˆ<code>Middleware</code>ï¼‰æœ¬è´¨æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚å¯ä»¥åƒè·¯ç”±å›è°ƒä¸€æ ·è®¿é—®è¯·æ±‚å¯¹è±¡ï¼ˆ<code>request</code>ï¼‰ï¼Œå“åº”å¯¹è±¡ï¼ˆ<code>response</code>ï¼‰ã€‚</p></blockquote><blockquote><p>ä¸­é—´ä»¶çš„ä½œç”¨å°±æ˜¯ä½¿ç”¨å‡½æ•°å°è£…å…¬å…±æ“ä½œï¼Œç®€åŒ–ä»£ç ã€‚</p></blockquote><p>ä¸­é—´ä»¶æœ‰ä¸¤ç§ç±»å‹ï¼š</p><ul><li>å…¨å±€ä¸­é—´ä»¶</li><li>è·¯ç”±ä¸­é—´ä»¶</li></ul><h4 id="_7-3-1-å…¨å±€ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_7-3-1-å…¨å±€ä¸­é—´ä»¶" aria-hidden="true">#</a> 7.3.1 å…¨å±€ä¸­é—´ä»¶</h4><blockquote><p>æ¯ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾æœåŠ¡ç«¯ä¹‹åéƒ½ä¼šæ‰§è¡Œå…¨å±€ä¸­é—´ä»¶å‡½æ•°ã€‚</p></blockquote><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>/**
 * éœ€æ±‚ï¼š
 *  è®°å½•æ¯ä¸ªè¯·æ±‚çš„ ip å’Œ url
 */

// å¼•å…¥æ¨¡å—
const express = require(&#39;express&#39;)
const fs = require(&#39;fs&#39;)
const path = require(&#39;path&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const app = express()

// åˆ›å»ºå…¨å±€è·¯ç”±ä¸­é—´ä»¶
let globalMiddleware = (req, resp, next) =&gt; {
    // è·å– url å’Œ ip
    let {ip, url} = req
    // ä½¿ç”¨è¿½åŠ çš„æ–¹å¼è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶
    fs.appendFileSync(path.resolve(__dirname, &#39;./access.log&#39;), `${ip} ${url} \r\n`)
    // è°ƒç”¨ next
    next()
}

// ä½¿ç”¨å…¨å±€è·¯ç”±ä¸­é—´ä»¶
app.use(globalMiddleware)

// åˆ›å»ºè·¯ç”±
app.get(&#39;/home&#39;, (req, resp) =&gt; {
    resp.send(&#39;å‰å°é¦–é¡µ&#39;)
})

app.get(&#39;/admin&#39;, (req, resp) =&gt; {
    resp.send(&#39;åå°é¦–é¡µ&#39;)
})

app.all(&#39;*&#39;, (req, resp) =&gt; {
    resp.send(`&lt;h1&gt;404 Not Found&lt;/h1&gt;`)
})

// ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h4 id="_7-3-2-è·¯ç”±ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_7-3-2-è·¯ç”±ä¸­é—´ä»¶" aria-hidden="true">#</a> 7.3.2 è·¯ç”±ä¸­é—´ä»¶</h4><p>å¦‚æœåªéœ€è¦å¯¹æŸä¸€äº›è·¯ç”±è¿›è¡ŒåŠŸèƒ½å°è£…ï¼Œåˆ™å°±éœ€è¦è·¯ç”±ä¸­é—´ä»¶ã€‚ è°ƒç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>app.get(&#39;/è·¯å¾„&#39;,`ä¸­é—´ä»¶å‡½æ•°`,(request,response)=&gt;{
});

app.get(&#39;/è·¯å¾„&#39;,`ä¸­é—´ä»¶å‡½æ•°1`,`ä¸­é—´ä»¶å‡½æ•°2`,(request,response)=&gt;{
});
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>/**
 * éœ€æ±‚ï¼š
 *  é’ˆå¯¹ /admin  /setting çš„è¯·æ±‚, è¦æ±‚ URL æºå¸¦ code=521 å‚æ•°, å¦‚æœªæºå¸¦æç¤ºã€æš—å·é”™è¯¯ã€
 */
// å¼•å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const app = express()

// åˆ›å»ºè·¯ç”±ä¸­é—´ä»¶
let routerMiddleware = (req, resp, next) =&gt; {
    // è·å– code
    let { code } = req.query

    if (code !== &#39;521&#39;) {
        resp.send(&#39;æš—å·é”™è¯¯&#39;)
        return;
    }
    next()
}

// åˆ›å»ºè·¯ç”±
app.get(&#39;/home&#39;, (req, resp) =&gt; {
    resp.send(&#39;å‰å°é¦–é¡µ&#39;)
})

app.get(&#39;/admin&#39;, routerMiddleware, (req, resp) =&gt; {
    resp.send(&#39;åå°é¦–é¡µ&#39;)
})

app.get(&#39;/setting&#39;, routerMiddleware, (req, resp) =&gt; {
    resp.send(&#39;ä¸ªäººè®¾ç½®&#39;)
})

app.all(&#39;*&#39;, (req, resp) =&gt; {
    resp.send(`&lt;h1&gt;404 Not Found&lt;/h1&gt;`)
})

// ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h4 id="_7-3-3-é™æ€èµ„æºä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_7-3-3-é™æ€èµ„æºä¸­é—´ä»¶" aria-hidden="true">#</a> 7.3.3 é™æ€èµ„æºä¸­é—´ä»¶</h4><p><code>express</code> å†…ç½®å¤„ç†é™æ€èµ„æºçš„ä¸­é—´ä»¶ã€‚</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¯¼å…¥æ¨¡å—
const express = require(&#39;express&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const app = express()

// åˆ›å»ºè·¯ç”±
app.get(&#39;/&#39;, (req, resp) =&gt; {
    resp.send(&#39;å‰å°é¦–é¡µ&#39;)
})

// é™æ€èµ„æºä¸­é—´ä»¶è®¾ç½®
// &#39;/&#39; è·¯å¾„é»˜è®¤è®¿é—® idnex.htmlï¼Œå¦‚æœä¸åŠ¨æ€èµ„æºçš„è¯·æ±‚è·¯å¾„ä¸€è‡´æ—¶ï¼Œè°å…ˆåŠ è½½å°±è°å…ˆè¿”å›
app.use(express.static(__dirname + &#39;/public&#39;))

app.all(&#39;*&#39;, (req, resp) =&gt; {
    resp.send(`&lt;h1&gt;404 Not Found&lt;/h1&gt;`)
})

// ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(9000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><blockquote><p>æ³¨æ„äº‹é¡¹:</p><ul><li>index.html æ–‡ä»¶ä¸ºé»˜è®¤æ‰“å¼€çš„èµ„æº</li><li>å¦‚æœé™æ€èµ„æºä¸è·¯ç”±è§„åˆ™åŒæ—¶åŒ¹é…ï¼Œè°å…ˆåŒ¹é…è°å°±å“åº”</li><li>è·¯ç”±å“åº”åŠ¨æ€èµ„æºï¼Œé™æ€èµ„æºä¸­é—´ä»¶å“åº”é™æ€èµ„æº</li></ul></blockquote><h3 id="_7-4-ejs-æ¨¡æ¿å¼•æ“" tabindex="-1"><a class="header-anchor" href="#_7-4-ejs-æ¨¡æ¿å¼•æ“" aria-hidden="true">#</a> 7.4 <code>EJS</code> æ¨¡æ¿å¼•æ“</h3><blockquote><p>æ¨¡æ¿å¼•æ“æ˜¯åˆ†ç¦»<strong>ç”¨æˆ·ç•Œé¢å’Œä¸šåŠ¡æ•°æ®</strong>çš„ä¸€ç§æŠ€æœ¯ã€‚</p></blockquote><blockquote><p><code>EJS</code> æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ <code>Javascript</code> çš„æ¨¡æ¿å¼•æ“ã€‚å®˜ç½‘: https://ejs.co/ ä¸­æ–‡ç«™ï¼šhttps://ejs.bootcss.com/</p></blockquote><h4 id="_7-4-1-ejs-åˆä½“éªŒ" tabindex="-1"><a class="header-anchor" href="#_7-4-1-ejs-åˆä½“éªŒ" aria-hidden="true">#</a> 7.4.1 <code>EJS</code> åˆä½“éªŒ</h4><p>ä¸‹è½½å®‰è£… <code>EJS</code></p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm i ejs --save
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å®‰è£… ejs
// npm i ejs
// å¯¼å…¥æ¨¡å—
const ejs = require(&#39;ejs&#39;)
const fs = require(&#39;fs&#39;)

// å£°æ˜å˜é‡
let text = &#39;ä¸­å›½&#39;
let weather = &#39;è‰³é˜³é«˜ç…§ï¼Œä¸‡é‡Œæ— äº‘&#39;
let str = fs.readFileSync(__dirname + &#39;/1-html.html&#39;).toString()

let result = ejs.render(str, {text, weather})
console.log(result)

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-Html ext-Html line-numbers-mode"><pre class="language-Html"><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;æˆ‘çˆ±ä½ &lt;%= text %&gt;&lt;/h1&gt;&lt;/h1&gt;
    &lt;h2&gt;&lt;%= weather %&gt;&lt;/h1&gt;&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_7-4-2-ejs-å¸¸ç”¨è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#_7-4-2-ejs-å¸¸ç”¨è¯­æ³•" aria-hidden="true">#</a> 7.4.2 <code>EJS</code> å¸¸ç”¨è¯­æ³•</h4><p>å­—ç¬¦ä¸²è¾“å‡º</p><div class="language-Html ext-Html line-numbers-mode"><pre class="language-Html"><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;æˆ‘çˆ±ä½ &lt;%= text %&gt;&lt;/h1&gt;&lt;/h1&gt;
    &lt;h2&gt;&lt;%= weather %&gt;&lt;/h1&gt;&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>åˆ—è¡¨æ¸²æŸ“</p><div class="language-Html ext-Html line-numbers-mode"><pre class="language-Html"><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;ul&gt;
        &lt;% list.forEach( item =&gt; {%&gt;
            &lt;li&gt;&lt;%= item %&gt;&lt;/li&gt;
        &lt;% })%&gt;
    &lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ¡ä»¶åˆ¤æ–­</p><div class="language-Html ext-Html line-numbers-mode"><pre class="language-Html"><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;% if (isLogin) { %&gt;
        &lt;span&gt;æ¬¢è¿å›æ¥&lt;/span&gt;
    &lt;% } else { %&gt;
        &lt;button&gt;ç™»å½•&lt;/button&gt;  &lt;button&gt;æ³¨å†Œ&lt;/button&gt;
    &lt;% } %&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_7-5-è„šæ‰‹æ¶" tabindex="-1"><a class="header-anchor" href="#_7-5-è„šæ‰‹æ¶" aria-hidden="true">#</a> 7.5 è„šæ‰‹æ¶</h3><blockquote><p>è„šæ‰‹æ¶ï¼šå¯ä»¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ªåº”ç”¨çš„æ¡†æ¶ï¼Œåº”ç”¨æ¡†æ¶æ˜¯æŒ‡åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­å¸¸ç”¨çš„ç›®å½•æˆ–æ–‡ä»¶ï¼Œæ¯”å¦‚ï¼šcss ç›®å½•ã€js ç›®å½•ç­‰ï¼Œä»¥æé«˜å¼€å‘æ•ˆç‡ã€‚</p></blockquote><blockquote><p><code>express-generator</code> æ˜¯å®ç° <code>express</code> æ¡†æ¶çš„è„šæ‰‹æ¶ã€‚</p></blockquote><p>å®‰è£… <code>express-generator</code></p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm i express-generator -g
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>åˆå§‹åŒ–</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>express --view=ejs é¡¹ç›®åŒ…å
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>package.json</code> æ–‡ä»¶</p><div class="language-JSON ext-JSON line-numbers-mode"><pre class="language-JSON"><code>{
  &quot;name&quot;: &quot;15-express-generator&quot;,
  &quot;version&quot;: &quot;0.0.0&quot;,
  &quot;private&quot;: true,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node ./bin/www&quot;
  },
  &quot;dependencies&quot;: {
    &quot;cookie-parser&quot;: &quot;~1.4.4&quot;,
    &quot;debug&quot;: &quot;~2.6.9&quot;,
    &quot;ejs&quot;: &quot;~2.6.1&quot;,
    &quot;express&quot;: &quot;~4.16.1&quot;,
    &quot;http-errors&quot;: &quot;~1.6.3&quot;,
    &quot;morgan&quot;: &quot;~1.9.1&quot;
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>è¿›å…¥é¡¹ç›®ï¼Œå®‰è£…ä¾èµ–</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm i
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¯åŠ¨é¡¹ç›®</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm start
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æµè§ˆå™¨è®¿é—®ï¼Œç«¯å£é»˜è®¤æ˜¯ï¼š<code>3000</code><code>localhost:3000</code></p><h2 id="_8-mongodb" tabindex="-1"><a class="header-anchor" href="#_8-mongodb" aria-hidden="true">#</a> 8. <code>MongoDB</code></h2><h3 id="_8-1-åŸºç¡€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_8-1-åŸºç¡€æ¦‚å¿µ" aria-hidden="true">#</a> 8.1 åŸºç¡€æ¦‚å¿µ</h3><blockquote><p><code>MongoDB</code> æ˜¯ä¸€ä¸ªåŸºäº<strong>åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨</strong>çš„æ•°æ®åº“ï¼Œå®˜æ–¹åœ°å€ï¼šhttps://www.mongodb.com/,ä¸‹è½½åœ°å€ï¼š https://www.mongodb.com/try/download/community</p></blockquote><blockquote><p><code>MongoDB</code> æ“ä½œè¯­æ³•ä¸ <code>JavaScript</code> ç±»ä¼¼ï¼Œå®¹æ˜“ä¸Šæ‰‹ï¼Œå­¦ä¹ æˆæœ¬ä½ã€‚</p></blockquote><p><code>MongoDB</code> ä¸­æœ‰ä¸‰ä¸ªé‡è¦æ¦‚å¿µéœ€è¦æŒæ¡ï¼š</p><ul><li>æ•°æ®åº“ï¼ˆ<code>Database</code>ï¼‰ æ˜¯ä¸€ä¸ªæ•°æ®ä»“åº“ï¼Œæ•°æ®åº“æœåŠ¡ä¸‹å¯ä»¥åˆ›å»ºå¾ˆå¤šæ•°æ®åº“ï¼Œæ•°æ®åº“ä¸­å¯ä»¥å­˜æ”¾å¾ˆå¤šé›†åˆ</li><li>é›†åˆï¼ˆ<code>Collection</code>ï¼‰ é›†åˆç±»ä¼¼äº <code>JS</code> ä¸­çš„æ•°ç»„ï¼Œåœ¨é›†åˆä¸­å¯ä»¥å­˜æ”¾å¾ˆå¤šæ–‡æ¡£</li><li>æ–‡æ¡£ï¼ˆ<code>Document</code>ï¼‰ æ–‡æ¡£æ˜¯æ•°æ®åº“ä¸­çš„æœ€å°å•ä½ï¼Œç±»ä¼¼äº <code>JS</code> ä¸­çš„å¯¹è±¡</li></ul><p>å¯ä»¥é€šè¿‡ <code>JSON</code> æ–‡ä»¶æ¥ç†è§£ <code>MongoDB</code> ä¸­çš„æ¦‚å¿µï¼š ä¸€ä¸ª <code>JSON</code> æ–‡ä»¶å¥½æ¯”æ˜¯ä¸€ä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ª <code>Mongodb</code> æœåŠ¡ä¸‹å¯ä»¥æœ‰ <code>N</code> ä¸ªæ•°æ®åº“ï¼›<code>JSON</code> æ–‡ä»¶ä¸­çš„ä¸€çº§å±æ€§çš„æ•°ç»„å€¼å¥½æ¯”æ˜¯é›†åˆï¼›æ•°ç»„ä¸­çš„å¯¹è±¡å¥½æ¯”æ˜¯æ–‡æ¡£å¯¹è±¡ä¸­çš„å±æ€§ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¹‹ä¸ºå­—æ®µã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªé¡¹ç›®ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ªé›†åˆä¼šå­˜å‚¨åŒä¸€ç§ç±»å‹çš„æ•°æ®ã€‚</p><h3 id="_8-2-æ“ä½œå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_8-2-æ“ä½œå‘½ä»¤" aria-hidden="true">#</a> 8.2 æ“ä½œå‘½ä»¤</h3><h4 id="_8-2-1-æ•°æ®åº“å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_8-2-1-æ•°æ®åº“å‘½ä»¤" aria-hidden="true">#</a> 8.2.1 æ•°æ®åº“å‘½ä»¤</h4><p>æ˜¾ç¤ºæ‰€æœ‰çš„æ•°æ®åº“</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>show dbs
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>åˆ‡æ¢åˆ°æŒ‡å®šçš„æ•°æ®åº“ï¼Œå¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>use æ•°æ®åº“å
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„æ•°æ®åº“</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>db
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>åˆ é™¤å½“å‰æ•°æ®åº“</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>use åº“å
db.dropDatabase()
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_8-2-2-é›†åˆå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_8-2-2-é›†åˆå‘½ä»¤" aria-hidden="true">#</a> 8.2.2 é›†åˆå‘½ä»¤</h4><p>åˆ›å»ºé›†åˆ</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>db.createCollection(&#39;é›†åˆåç§°&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰é›†åˆ</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>show collections
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>åˆ é™¤æŸä¸ªé›†åˆ</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>db.é›†åˆå.drop()
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é‡å‘½åé›†åˆ</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>db.é›†åˆå.renameCollection(&#39;newName&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_8-2-3-æ–‡æ¡£å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_8-2-3-æ–‡æ¡£å‘½ä»¤" aria-hidden="true">#</a> 8.2.3 æ–‡æ¡£å‘½ä»¤</h4><p>æ’å…¥æ–‡æ¡£</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>db.é›†åˆå.insert(æ–‡æ¡£å¯¹è±¡)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æŸ¥è¯¢æ–‡æ¡£</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>db.é›†åˆå.find(æŸ¥è¯¢æ¡ä»¶)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>_id</code> æ˜¯ <code>MongoDB</code> è‡ªåŠ¨ç”Ÿæˆçš„å”¯ä¸€ç¼–å·ï¼Œç”¨æ¥å”¯ä¸€æ ‡è¯†æ–‡æ¡£</p><p>æ›´æ–°æ–‡æ¡£</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>db.é›†åˆå.update(æŸ¥è¯¢æ¡ä»¶,æ–°çš„æ–‡æ¡£)
db.é›†åˆå.update({name:&#39;å¼ ä¸‰&#39;},{$set:{age:19}})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>åˆ é™¤æ–‡æ¡£</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>db.é›†åˆå.remove(æŸ¥è¯¢æ¡ä»¶)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_8-3-mongooose" tabindex="-1"><a class="header-anchor" href="#_8-3-mongooose" aria-hidden="true">#</a> 8.3 <code>Mongooose</code></h3><h4 id="_8-4-1-ä»‹ç»ä¸ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_8-4-1-ä»‹ç»ä¸ä½¿ç”¨" aria-hidden="true">#</a> 8.4.1 ä»‹ç»ä¸ä½¿ç”¨</h4><blockquote><p><code>Mongoose</code> æ˜¯ä¸€ä¸ª <strong>å¯¹è±¡æ–‡æ¡£æ¨¡å‹åº“</strong>ï¼Œå¯ä»¥æ–¹ä¾¿ä½¿ç”¨ä»£ç æ“ä½œ <code>MongoDB</code> æ•°æ®åº“,å®˜ç½‘ http://www.mongoosejs.net/ã€‚</p></blockquote><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// 1.å¯¼å…¥ mongoose
const mongoose = require(&#39;mongoose&#39;)

// è®¾ç½® strictQuery ä¸º true
mongoose.set(&#39;strictQuery&#39;, true)

// 2.è¿æ¥ mongodb æœåŠ¡
mongoose.connect(&#39;mongodb://127.0.0.1:27017/test&#39;)

// 3.è®¾ç½®è¿æ¥æˆåŠŸçš„å›è°ƒå‡½æ•°
mongoose.connection.once(&#39;open&#39;, () =&gt; {
    // åˆ›å»ºæ–°æ–‡æ¡£

    // 1ã€åˆ›å»ºæ–‡æ¡£çš„ç»“æ„æ¨¡å‹
    let bookSchema = new mongoose.Schema({
        name: String,
        author: String,
        price: Number
    });

    // 2ã€åˆ›å»ºæ–‡æ¡£æ¨¡å‹å¯¹è±¡ï¼Œç”¨äºæ“ä½œæ–‡æ¡£
    // book å°±æ˜¯é›†åˆåï¼Œmongoose ä¼šé»˜è®¤åŠ ä¸Š s,åœ¨mongodbæ•°æ®åº“ä¸­æ˜¾ç¤ºçš„æ˜¯ books
    let bookModel = mongoose.model(&#39;book&#39;, bookSchema);

    // 3ã€æ“ä½œæ–‡æ¡£-æ–°å¢
    bookModel.create({
        name: &quot;æµ·è¾¹çš„å¡å¤«å¡&quot;,
        author: &#39;æ ‘ä¸Šæ˜¥æ ‘&#39;,
        price: 49
    }, (err, data) =&gt; {
        // åˆ¤æ–­æ˜¯å¦æœ‰é”™è¯¯
        if (err) {
            console.log(&#39;æ–‡æ¡£æ–°å¢å¤±è´¥&#39;, err)
            return;
        }
        console.log(&#39;æ–‡æ¡£æ–°å¢æˆåŠŸ&#39;, data)
    });

    console.log(&#39;è¿æ¥æˆåŠŸ&#39;)
})

// 4.è®¾ç½®è¿æ¥å¤±è´¥çš„å›è°ƒå‡½æ•°
mongoose.connection.on(&#39;error&#39;, () =&gt; {
    console.log(&#39;è¿æ¥å¤±è´¥&#39;)
})

// 5.è®¾ç½®è¿æ¥å…³é—­çš„å›è°ƒå‡½æ•°
mongoose.connection.on(&#39;close&#39;, () =&gt; {
    console.log(&#39;è¿æ¥å…³é—­&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h4 id="_8-4-2-å­—æ®µæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_8-4-2-å­—æ®µæ“ä½œ" aria-hidden="true">#</a> 8.4.2 å­—æ®µæ“ä½œ</h4><p>æ–‡æ¡£ç»“æ„å¯é€‰çš„å¸¸ç”¨å­—æ®µç±»å‹åˆ—è¡¨</p><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>String</code></td><td>å­—ç¬¦ä¸²</td></tr><tr><td><code>Number</code></td><td>æ•°å­—</td></tr><tr><td><code>Boolean</code></td><td>å¸ƒå°”å€¼</td></tr><tr><td><code>Array</code></td><td>æ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>[]</code> æ¥æ ‡è¯†</td></tr><tr><td><code>Date</code></td><td>æ—¥æœŸ</td></tr><tr><td><code>Buffer</code></td><td><code>Buffer</code> å¯¹è±¡</td></tr><tr><td><code>Mixed</code></td><td>ä»»æ„ç±»å‹ï¼Œéœ€è¦ä½¿ç”¨ <code>mongoose.Schema.Types.Mixed</code> æŒ‡å®š</td></tr><tr><td><code>ObjectId</code></td><td>å¯¹è±¡ <code>ID</code>ï¼Œéœ€è¦ä½¿ç”¨ <code>mongoose.Schema.Types.ObjectId</code> æŒ‡å®š</td></tr><tr><td><code>Decimal128</code></td><td>é«˜ç²¾åº¦æ•°å­—ï¼Œéœ€è¦ä½¿ç”¨ <code>mongoose.Schema.Types.Decimal128</code> æŒ‡å®š</td></tr></tbody></table><p><code>Mongoose</code> æœ‰ä¸€äº›å†…å»ºéªŒè¯å™¨ï¼Œå¯ä»¥å¯¹å­—æ®µå€¼è¿›è¡ŒéªŒè¯</p><p>å¿…å¡«é¡¹</p><div class="language-JSON ext-JSON line-numbers-mode"><pre class="language-JSON"><code>name: {
    type: String,
    // è®¾ç½®æ˜¯å¦å¿…å¡«
    // name: ValidatorError: Path `name` is required.
    required: true
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>é»˜è®¤å€¼</p><div class="language-JSON ext-JSON line-numbers-mode"><pre class="language-JSON"><code>author: {
    type: String,
    // è®¾ç½®é»˜è®¤å€¼
    default: &#39;åŒ¿å&#39;
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æšä¸¾å€¼</p><div class="language-JSON ext-JSON line-numbers-mode"><pre class="language-JSON"><code>tages: {
    type: String,
    // æšä¸¾
    // tages: ValidatorError: `æ¶ç©º` is not a valid enum value for path `tages`.
    enum: [&#39;è¨€æƒ…&#39;, &#39;å†å²&#39;, &#39;åŠ±å¿—&#39;]
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å”¯ä¸€å€¼</p><div class="language-JSON ext-JSON line-numbers-mode"><pre class="language-JSON"><code>name: {
    type: String,
    // æ˜¯å¦å”¯ä¸€
    unique: true
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>unique</code> éœ€è¦<strong>é‡å»ºé›†åˆ</strong>æ‰èƒ½æœ‰æ•ˆæœã€‚</p><blockquote><p>æ°¸è¿œä¸è¦ç›¸ä¿¡ç”¨æˆ·çš„è¾“å…¥!</p></blockquote><h4 id="_8-4-3-å¢åˆ æ”¹æŸ¥" tabindex="-1"><a class="header-anchor" href="#_8-4-3-å¢åˆ æ”¹æŸ¥" aria-hidden="true">#</a> 8.4.3 å¢åˆ æ”¹æŸ¥</h4><p>æ’å…¥ä¸€æ¡</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>bookModel.create({
    name: &quot;æµ·è¾¹çš„å¡å¤«å¡&quot;,
    author: &#39;æ ‘ä¸Šæ˜¥æ ‘&#39;,
    price: 49
}, (err, data) =&gt; {
    // åˆ¤æ–­æ˜¯å¦æœ‰é”™è¯¯
    if (err) {
        console.log(&#39;æ–‡æ¡£æ–°å¢å¤±è´¥&#39;, err)
        return;
    }
    console.log(&#39;æ–‡æ¡£æ–°å¢æˆåŠŸ&#39;, data)
});
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æ‰¹é‡æ’å…¥</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>bookModel.insertMany([{
        name: &#39;è¥¿æ¸¸è®°&#39;,
        author: &#39;å´æ‰¿æ©&#39;,
        price: 19.9,
    }, {
        name: &#39;çº¢æ¥¼æ¢¦&#39;,
        author: &#39;æ›¹é›ªèŠ¹&#39;,
        price: 29.9,
    }, {
        name: &#39;ä¸‰å›½æ¼”ä¹‰&#39;,
        author: &#39;ç½—è´¯ä¸­&#39;,
        price: 25.9,
    }, {
        name: &#39;æ°´æµ’ä¼ &#39;,
        author: &#39;æ–½è€åºµ&#39;,
        price: 20.9,
    }, {
        name: &#39;æ´»ç€&#39;,
        author: &#39;ä½™å&#39;,
        price: 19.9,
    }, {
        name: &#39;ç‹‚é£™&#39;,
        author: &#39;å¾çºªå‘¨&#39;,
        price: 68,
    }, {
        name: &#39;å¤§é­èƒ½è‡£&#39;,
        author: &#39;é»‘ç”·çˆµ&#39;,
        price: 9.9,
    },
    {
        name: &#39;çŸ¥åŒ—æ¸¸&#39;,
        author: &#39;æ´›æ°´&#39;,
        price: 59,
    }, {
        name: &#39;é“å›&#39;,
        author: &#39;è·ƒåƒæ„&#39;,
        price: 59,
    }, {
        name: &#39;ä¸ƒç…ç¢‘&#39;,
        author: &#39;æ¸¸æ³³çš„çŒ«&#39;,
        price: 29,
    }, {
        name: &#39;ç‹¬æ¸¸&#39;,
        author: &#39;é…’ç²¾è¿‡æ•&#39;,
        price: 15,
    }, {
        name: &#39;å¤§æ³¼çŒ´&#39;,
        author: &#39;ç”²é±¼ä¸æ˜¯é¾Ÿ&#39;,
        price: 26,
    },
    {
        name: &#39;é»‘æš—ç‹è€…&#39;,
        author: &#39;å¤ç¾²&#39;,
        price: 39,
    },
    {
        name: &#39;ä¸äºŒå¤§é“&#39;,
        author: &#39;æ–‡åˆ€æ‰‹äºˆ&#39;,
        price: 89,
    },
    {
        name: &#39;å¤§æ³¼çŒ´&#39;,
        author: &#39;ç”²é±¼ä¸æ˜¯é¾Ÿ&#39;,
        price: 59,
    },
    {
        name: &#39;é•¿å®‰çš„è”æ&#39;,
        author: &#39;é©¬ä¼¯åº¸&#39;,
        price: 45,
    },
    {
        name: &#39;å‘½è¿&#39;,
        author: &#39;è”¡å´‡è¾¾&#39;,
        price: 59.8,
    },
    {
        name: &#39;å¦‚é›ªå¦‚å±±&#39;,
        author: &#39;å¼ å¤©ç¿¼&#39;,
        price: 58,
    },
    {
        name: &#39;ä¸‰ä½“&#39;,
        author: &#39;åˆ˜æ…ˆæ¬£&#39;,
        price: 23,
    },
    {
        name: &#39;ç§‹å›­&#39;,
        author: &#39;æ¨æœ¬èŠ¬&#39;,
        price: 38,
    },
    {
        name: &#39;ç™¾å¹´å­¤ç‹¬&#39;,
        author: &#39;èŒƒæ™”&#39;,
        price: 39.5,
    },
    {
        name: &#39;åœ¨ç»†é›¨ä¸­å‘¼å–Š&#39;,
        author: &#39;ä½™å&#39;,
        price: 25,
    },
], (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ‰¹é‡æ–°å¢å¤±è´¥&#39;, error)
        return
    }
    console.log(&#39;æ‰¹é‡æ–°å¢æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br></div></div><p>åˆ é™¤ä¸€æ¡æ•°æ®</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>bookModel.deleteOne({name: &#39;è¥¿æ¸¸è®°&#39;}, (error, data) =&gt; {
    if (error) {
        console.log(&#39;åˆ é™¤æ–‡æ¡£å¤±è´¥&#39;, data)
        return
    }
    console.log(&#39;åˆ é™¤æ–‡æ¡£æˆåŠŸ&#39;, data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ‰¹é‡åˆ é™¤</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>bookModel.deleteMany({
    name: &#39;æµ·è¾¹çš„å¡å¤«å¡&#39;
}, (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ‰¹é‡åˆ é™¤å¤±è´¥&#39;, error)
        return
    }
    console.log(&#39;æ‰¹é‡åˆ é™¤æˆåŠŸ&#39;, data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ›´æ–°ä¸€æ¡æ•°æ®</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>bookModel.updateOne({
    name: &#39;æµ·è¾¹çš„å¡å¤«å¡&#39;
}, {
    name: &#39;è¥¿æ¸¸è®°&#39;,
    author: &#39;å´æ‰¿æ©&#39;,
    price: 59
}, (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ›´æ–°æ–‡æ¡£å¤±è´¥&#39;, error)
        return;
    }

    console.log(&#39;æ›´æ–°æ–‡æ¡£æˆåŠŸ&#39;, data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>æ‰¹é‡æ›´æ–°æ•°æ®</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code> bookModel.updateMany({
    name: &#39;æµ·è¾¹çš„å¡å¤«å¡&#39;
}, {
    price: 89
}, (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ‰¹é‡æ›´æ–°æ–‡æ¡£å¤±è´¥&#39;, error)
        return
    }
    console.log(&#39;æ‰¹é‡æ›´æ–°æ–‡æ¡£æˆåŠŸ&#39;, data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>æŸ¥è¯¢ä¸€æ¡æ•°æ®</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>bookModel.findOne({name: &#39;è¥¿æ¸¸è®°&#39;}, (error, data) =&gt; {
    if (error) {
        console.log(&#39;è¯»å–å•ä¸ªæ–‡æ¡£é”™è¯¯&#39;, error)
        return
    }
    console.log(&#39;è¯»å–å•ä¸ªæ–‡æ¡£æˆåŠŸ&#39;, data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ‰¹é‡æŸ¥è¯¢æ•°æ®</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>bookModel.find({name: &#39;è¥¿æ¸¸è®°&#39;}, (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ–‡æ¡£è¯»å–é”™è¯¯&#39;, error)
        return;
    }
    console.log(&#39;æ–‡æ¡£è¯»å–æˆåŠŸ&#39;, data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_8-4-4-æ¡ä»¶æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#_8-4-4-æ¡ä»¶æ§åˆ¶" aria-hidden="true">#</a> 8.4.4 æ¡ä»¶æ§åˆ¶</h4><p>åœ¨ <code>MongoDB</code> ä¸èƒ½ <code>&gt;</code>ã€<code>&lt;</code>ã€<code>&gt;=</code>ã€<code>&lt;=</code>ã€<code>!==</code> ç­‰è¿ç®—ç¬¦ï¼Œéœ€è¦ä½¿ç”¨æ›¿ä»£ç¬¦å·ï¼š</p><p><code>&gt;</code> ä½¿ç”¨ <code>$gt</code><code>&lt;</code> ä½¿ç”¨ <code>$lt</code><code>&gt;=</code> ä½¿ç”¨ <code>$gte</code><code>&lt;=</code> ä½¿ç”¨ <code>$lte</code><code>!==</code> ä½¿ç”¨ <code>$ne</code></p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// è·å–ä»·æ ¼ å°äº 20 çš„å›¾ä¹¦
bookModel.find({price: {$lt: 20}}, (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ–‡æ¡£è¯»å–é”™è¯¯&#39;, error)
        return;
    }
    console.log(&#39;æ–‡æ¡£è¯»å–æˆåŠŸ&#39;, data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>é€»è¾‘è¿ç®— <code>$or</code> é€»è¾‘æˆ–çš„æƒ…å†µ</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>//æ›¹é›ªèŠ¹ æˆ–è€… ä½™åçš„ä¹¦
bookModel.find({
    $or: [
        {
            author: &#39;æ›¹é›ªèŠ¹&#39;
        },
        {
            author: &#39;ä½™å&#39;
        }
    ]
}, (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ–‡æ¡£è¯»å–é”™è¯¯&#39;, error)
        return
    }
    console.log(&#39;æ–‡æ¡£è¯»å–æˆåŠŸ&#39;, data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><code>$and</code> é€»è¾‘ä¸çš„æƒ…å†µ</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>//ä»·æ ¼å¤§äºç­‰äº 30 ä¸”å°äº 70
bookModel.find({
    $and: [
        {
            price: {
                $gte: 30
            }
        }, {
            price: {
                $lt: 70
            }
        }
    ]
}, (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ–‡æ¡£è¯»å–é”™è¯¯&#39;, error)
        return;
    }
    console.log(&#39;æ–‡æ¡£è¯»å–æˆåŠŸ&#39;, data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>æ­£åˆ™åŒ¹é… æ¡ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>JS</code> çš„æ­£åˆ™è¯­æ³•ï¼Œé€šè¿‡æ­£åˆ™å¯ä»¥è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>//æ­£åˆ™è¡¨è¾¾å¼, æœç´¢ä¹¦ç±åç§°ä¸­å¸¦æœ‰ `ä¸‰` çš„å›¾ä¹¦
let queryCondition = &#39;ä¸‰&#39;
bookModel.find({name: /ä¸‰/}, (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ–‡æ¡£è¯»å–é”™è¯¯&#39;, error)
        return;
    }
    console.log(&#39;æ–‡æ¡£è¯»å–æˆåŠŸ&#39;, data)
})

bookModel.find({name: new RegExp(queryCondition)}, (error, data) =&gt; {
    if (error) {
        console.log(&#39;æ–‡æ¡£è¯»å–é”™è¯¯&#39;, error)
        return;
    }
    console.log(&#39;æ–‡æ¡£è¯»å–æˆåŠŸ&#39;, data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_8-4-5-ä¸ªæ€§åŒ–è¯»å–" tabindex="-1"><a class="header-anchor" href="#_8-4-5-ä¸ªæ€§åŒ–è¯»å–" aria-hidden="true">#</a> 8.4.5 ä¸ªæ€§åŒ–è¯»å–</h4><p>å­—æ®µç­›é€‰</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// åªæŸ¥è¯¢ ä¹¦å ä½œè€…
// 1:æŸ¥è¯¢ 0:ä¸æŸ¥è¯¢
bookModel.find().select({name: 1, author: 1, _id: 0}).exec((error, data) =&gt; {
    if (error) {
        console.log(&#39;æ–‡æ¡£è¯»å–é”™è¯¯&#39;, error)
        return
    }
    console.log(&#39;æ–‡æ¡£è¯»å–æˆåŠŸ&#39;, data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ•°æ®æ’åº</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¯¹æ•°æ®è¿›è¡Œæ’åº
// 1:å‡åº -1:é™åº
bookModel.find({author: &#39;ä½™å&#39;}).select({name: 1, price: 1}).sort({price: -1}).exec((error, data) =&gt; {
    if (error) {
        console.log(&#39;æ–‡ä»¶è¯»å–é”™è¯¯&#39;, error)
        return
    }
    console.log(data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ•°æ®æˆªå–</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// æ•°æ®åˆ—è¡¨é›†åˆæˆªå–
// å¯ç”¨äºåˆ†é¡µ
bookModel.find()
    .select({name: 1, author: 1, _id: 0})
    .sort({price: -1})
    .skip(2)
    .limit(3)
    .exec((error, data) =&gt; {
        if (error) {
            console.log(&#39;æ–‡ä»¶è¯»å–é”™è¯¯&#39;, error)
            return
        }
        console.log(data)
    })
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_9-æ¥å£" tabindex="-1"><a class="header-anchor" href="#_9-æ¥å£" aria-hidden="true">#</a> 9. æ¥å£</h2><h3 id="_9-1-restful-api" tabindex="-1"><a class="header-anchor" href="#_9-1-restful-api" aria-hidden="true">#</a> 9.1 <code>RESTful API</code></h3><p><code>RESTful API</code> æ˜¯ä¸€ç§ç‰¹æ®Šé£æ ¼çš„æ¥å£ï¼Œä¸»è¦ç‰¹ç‚¹æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š</p><ul><li><code>URL</code> ä¸­çš„è·¯å¾„è¡¨ç¤ºèµ„æº ï¼Œè·¯å¾„ä¸­ä¸èƒ½æœ‰åŠ¨è¯ ï¼Œä¾‹å¦‚ <code>create</code> , <code>delete</code> , <code>update</code> ç­‰è¿™äº›éƒ½ä¸èƒ½æœ‰</li><li>æ“ä½œèµ„æºè¦ä¸ <code>HTTP</code> è¯·æ±‚æ–¹æ³•å¯¹åº”</li><li>æ“ä½œç»“æœè¦ä¸ <code>HTTP</code> å“åº”çŠ¶æ€ç å¯¹åº”</li></ul><p>è§„åˆ™ç¤ºä¾‹ï¼š</p><table><thead><tr><th>æ“ä½œ</th><th>è¯·æ±‚ç±»å‹</th><th>URL</th></tr></thead><tbody><tr><td>æ–°å¢æ­Œæ›²</td><td><code>POST</code></td><td><code>/song</code></td></tr><tr><td>åˆ é™¤æ­Œæ›²</td><td><code>DELETE</code></td><td><code>/song/10</code></td></tr><tr><td>ä¿®æ”¹æ­Œæ›²</td><td><code>PUT</code></td><td><code>/song/10</code></td></tr><tr><td>ä¿®æ”¹æ­Œæ›²</td><td><code>PATCH</code></td><td><code>/song/10</code></td></tr><tr><td>è·å–æ‰€æœ‰æ­Œæ›²</td><td><code>GET</code></td><td><code>/song</code></td></tr><tr><td>è·å–å•ä¸ªæ­Œæ›²</td><td><code>GET</code></td><td><code>/song/10</code></td></tr></tbody></table><h3 id="_9-2-json-server" tabindex="-1"><a class="header-anchor" href="#_9-2-json-server" aria-hidden="true">#</a> 9.2 <code>json-server</code></h3><blockquote><p><code>json-server</code> æœ¬èº«æ˜¯ä¸€ä¸ª <code>JS</code> ç¼–å†™çš„å·¥å…·åŒ…ï¼Œå¯ä»¥å¿«é€Ÿæ­å»º <code>RESTful API</code> æœåŠ¡ã€‚</p></blockquote><p>å®˜æ–¹åœ°å€: https://github.com/typicode/json-server</p><p>æ“ä½œæ­¥éª¤ï¼š å…¨å±€å®‰è£… <code>json-server</code></p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>npm i -g json-server
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>åˆ›å»º <code>JSON</code> æ–‡ä»¶ï¼ˆ<code>db.json</code>ï¼‰ï¼Œç¼–å†™åŸºæœ¬ç»“æ„</p><div class="language-JSON ext-JSON line-numbers-mode"><pre class="language-JSON"><code>{
    &quot;song&quot;: [
        { &quot;id&quot;: 1, &quot;name&quot;: &quot;å¹²æ¯&quot;, &quot;singer&quot;: &quot;äº”æœˆå¤©&quot; },
        { &quot;id&quot;: 2, &quot;name&quot;: &quot;å½“&quot;, &quot;singer&quot;: &quot;åŠ¨åŠ›ç«è½¦&quot; },
        { &quot;id&quot;: 3, &quot;name&quot;: &quot;ä¸èƒ½è¯´çš„ç§˜å¯†&quot;, &quot;singer&quot;: &quot;å‘¨æ°ä¼¦&quot; }
    ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä»¥ <code>JSON</code> æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ä½œä¸ºå·¥ä½œç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><div class="language-Bash ext-Bash line-numbers-mode"><pre class="language-Bash"><code>json-server --watch db.json
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é»˜è®¤ç›‘å¬ç«¯å£ä¸º <code>3000</code></p><h2 id="_10-ä¼šè¯æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#_10-ä¼šè¯æ§åˆ¶" aria-hidden="true">#</a> 10. ä¼šè¯æ§åˆ¶</h2><blockquote><p>æ‰€è°“ä¼šè¯æ§åˆ¶å°±æ˜¯å¯¹ä¼šè¯è¿›è¡Œæ§åˆ¶ã€‚<code>HTTP</code> æ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œå®ƒæ²¡æœ‰åŠæ³•åŒºåˆ†å¤šæ¬¡çš„è¯·æ±‚æ˜¯å¦æ¥è‡ªäºåŒä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œæ— æ³•åŒºåˆ†ç”¨æˆ·è€Œäº§å“ä¸­åˆå¤§é‡å­˜åœ¨çš„è¿™æ ·çš„éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡<strong>ä¼šè¯æ§åˆ¶</strong>æ¥è§£å†³è¯¥é—®é¢˜ã€‚</p></blockquote><p>å¸¸è§çš„ä¼šè¯æ§åˆ¶æŠ€æœ¯æœ‰ä¸‰ç§ï¼š</p><ul><li><code>cookie</code></li><li><code>session</code></li><li><code>token</code></li></ul><h3 id="_10-1-cookie" tabindex="-1"><a class="header-anchor" href="#_10-1-cookie" aria-hidden="true">#</a> 10.1 <code>cookie</code></h3><blockquote><p><code>cookie</code> æ˜¯ <code>HTTP</code> æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®ï¼Œ<strong>ä¿å­˜åœ¨æµè§ˆå™¨ç«¯</strong>çš„ä¸€å°å—æ•°æ®ä¸”æ˜¯æŒ‰ç…§åŸŸååˆ’åˆ†ä¿å­˜çš„ã€‚</p></blockquote><p><code>express</code> ä¸­å¯ä»¥ä½¿ç”¨ <code>cookie-parser</code> æ¥è¿›è¡Œå¯¹ <code>cookie</code> çš„æ“ä½œã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¯¼å…¥express
const express = require(&#39;express&#39;)
const cookieParser = require(&#39;cookie-parser&#39;)

// åˆ›å»ºåº”ç”¨å¯¹è±¡
const app = express()
app.use(cookieParser())

// åˆ›å»ºè·¯ç”±
app.get(&#39;/&#39;, (req, resp) =&gt; {
    resp.send(&#39;home&#39;)
})

// è®¾ç½®cookie
app.get(&#39;/set-cookie&#39;, (req, resp) =&gt; {
    // åœ¨æµè§ˆå™¨å…³é—­æ—¶ä¼šé”€æ¯
    // resp.cookie(&#39;name&#39;, &#39;zhangsan&#39;)

    // è®¾ç½® cookie çš„è¿‡æœŸæ—¶é—´ã€‚è®¾ç½®ä¸€åˆ†é’Ÿä»¥åè¿‡æœŸ
    resp.cookie(&#39;name&#39;, &#39;lisi&#39;, {maxAge: 60 * 1000})

    resp.send(&#39;hello world&#39;)
})

// è·å– cookie
app.get(&#39;/get-cookie&#39;, (req, resp) =&gt; {
    console.log(req.cookies)
    resp.send(`æ¬¢è¿æ‚¨${req.cookies.name}`)
})

// åˆ é™¤ cookie
app.get(&#39;/remove-cookie&#39;, (req, resp) =&gt; {
    resp.clearCookie(&#39;name&#39;)
    resp.send(&#39;åˆ é™¤cookieæˆåŠŸ&#39;)
})

// ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(3000, () =&gt; {
    console.log(&#39;æœåŠ¡å¯åŠ¨æˆåŠŸ&#39;)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><blockquote><p>ä¸åŒæµè§ˆå™¨ä¸­çš„ <code>cookie</code> æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¸å…±äº«ã€‚</p></blockquote><h3 id="_10-2-session" tabindex="-1"><a class="header-anchor" href="#_10-2-session" aria-hidden="true">#</a> 10.2 <code>session</code></h3><blockquote><p><code>session</code> æ˜¯ä¿å­˜åœ¨<strong>æœåŠ¡å™¨ç«¯</strong>çš„ä¸€å—å„¿æ•°æ® ï¼Œä¿å­˜å½“å‰è®¿é—®ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ã€‚</p></blockquote><p><code>express</code> ä¸­å¯ä»¥ä½¿ç”¨ <code>express-session</code> å¯¹ <code>session</code> è¿›è¡Œæ“ä½œã€‚ ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¼•å…¥æ¨¡å—
const express = require(&#39;express&#39;)
const session = require(&#39;express-session&#39;)
const MongoStore = require(&#39;connect-mongo&#39;)

// åˆ›å»ºåº”ç”¨æœåŠ¡
const app = express()
// è®¾ç½® session çš„ä¸­é—´ä»¶
app.use(session({
    // è®¾ç½® cookie çš„ nameï¼Œé»˜è®¤å€¼æ˜¯ï¼šconnect.sid
    name: &#39;sid&#39;,
    // å‚ä¸åŠ å¯†çš„å­—ç¬¦ä¸²ï¼ˆåˆç§°ç­¾åï¼‰  åŠ ç›
    secret: &#39;123456&#39;,
    // æ˜¯å¦ä¸ºæ¯æ¬¡è¯·æ±‚éƒ½è®¾ç½®ä¸€ä¸ªcookieç”¨æ¥å­˜å‚¨sessionçš„id
    saveUninitialized: false,
    // æ˜¯å¦åœ¨æ¯æ¬¡è¯·æ±‚æ—¶é‡æ–°ä¿å­˜session  20 åˆ†é’Ÿ    4:00  4:20
    resave: true,
    store: MongoStore.create({
        //æ•°æ®åº“çš„è¿æ¥é…ç½®
        mongoUrl: &#39;mongodb://127.0.0.1:27017/test&#39;
    }),
    cookie: {
        // å¼€å¯åå‰ç«¯æ— æ³•é€šè¿‡ JS æ“ä½œ
        httpOnly: true,
        // è¿™ä¸€æ¡ æ˜¯æ§åˆ¶ sessionID çš„è¿‡æœŸæ—¶é—´çš„ï¼ï¼ï¼ 5åˆ†é’Ÿè¿‡æœŸ
        maxAge: 5 * 60 * 1000
    }
}))

// åˆ›å»ºè·¯ç”±
app.get(&#39;/&#39;, (req, resp) =&gt; {
    resp.send(&#39;home&#39;)
})

// ç™»å½•æ—¶è®¾ç½® session
app.get(&#39;/login&#39;, (req, resp) =&gt; {
    // æ ¡éªŒä¸€ä¸‹ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
    if (req.query.username === &#39;admin&#39; &amp;&amp; req.query.password === &#39;admin&#39;) {
        // è®¾ç½® session ä¿¡æ¯
        req.session.username = req.query.username
        req.session.uid = &#39;258aefccc&#39;
        resp.send(&#39;ç™»å½•æˆåŠŸ&#39;)
    } else {
        resp.send(&#39;ç™»å½•å¤±è´¥&#39;)
    }
})

// è·å– session
app.get(&#39;/cart&#39;, (req, resp) =&gt; {
    // æ£€æµ‹ session æ˜¯å¦å­˜åœ¨ç”¨æˆ·ä¿¡æ¯
    if (req.session.username) {
        resp.send(`æ¬¢è¿æ‚¨${req.session.username}`)
    } else {
        resp.send(&#39;è¯·å…ˆç™»å½•&#39;)
    }
})

// é€€å‡ºç™»å½•åˆ é™¤ session
app.get(&#39;/logout&#39;, (req, resp) =&gt; {
    req.session.destroy(() =&gt; {
        resp.send(&#39;æˆåŠŸé€€å‡ºç™»å½•&#39;)
    })
})

// ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(3000)

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><p><strong><code>session</code> å’Œ <code>cookie</code> çš„åŒºåˆ«</strong><code>cookie</code> å’Œ <code>session</code> çš„åŒºåˆ«ä¸»è¦æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š</p><ul><li>å­˜åœ¨çš„ä½ç½® <ul><li><code>cookie</code>ï¼šæµè§ˆå™¨ç«¯</li><li><code>session</code>ï¼šæœåŠ¡ç«¯</li></ul></li><li>å®‰å…¨æ€§ <ul><li><code>cookie</code> æ˜¯ä»¥æ˜æ–‡çš„æ–¹å¼å­˜æ”¾åœ¨å®¢æˆ·ç«¯çš„ï¼Œå®‰å…¨æ€§ç›¸å¯¹è¾ƒä½</li><li><code>session</code> å­˜æ”¾äºæœåŠ¡å™¨ä¸­ï¼Œæ‰€ä»¥å®‰å…¨æ€§<strong>ç›¸å¯¹è¾ƒå¥½</strong></li></ul></li><li>ç½‘ç»œä¼ è¾“é‡ <ul><li><code>cookie</code> è®¾ç½®å†…å®¹è¿‡å¤šä¼šå¢å¤§æŠ¥æ–‡ä½“ç§¯ï¼Œä¼šå½±å“ä¼ è¾“æ•ˆç‡</li><li><code>session</code> æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œåªæ˜¯é€šè¿‡ <code>cookie</code> ä¼ é€’ <code>id</code>ï¼Œæ‰€ä»¥ä¸å½±å“ä¼ è¾“æ•ˆç‡</li></ul></li><li>å­˜å‚¨é™åˆ¶ <ul><li>æµè§ˆå™¨é™åˆ¶å•ä¸ª <code>cookie</code> ä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡ <code>4K</code>ï¼Œä¸”å•ä¸ªåŸŸåä¸‹çš„å­˜å‚¨æ•°é‡ä¹Ÿæœ‰é™åˆ¶</li><li><code>session</code> æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸­ï¼Œæ‰€ä»¥æ²¡æœ‰è¿™äº›é™åˆ¶</li></ul></li></ul><h3 id="_10-3-token" tabindex="-1"><a class="header-anchor" href="#_10-3-token" aria-hidden="true">#</a> 10.3 <code>token</code></h3><blockquote><p><code>token</code> æ˜¯æœåŠ¡ç«¯ç”Ÿæˆå¹¶è¿”å›ç»™ <code>HTTP</code> å®¢æˆ·ç«¯çš„ä¸€ä¸²åŠ å¯†å­—ç¬¦ä¸²ï¼Œ <code>token</code> ä¸­ä¿å­˜ç€ç”¨æˆ·ä¿¡æ¯ã€‚</p></blockquote><p><code>token</code> çš„ç‰¹ç‚¹ï¼š</p><ul><li>æœåŠ¡ç«¯å‹åŠ›æ›´å°</li><li>æ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯</li><li>ç›¸å¯¹æ›´å®‰å…¨</li><li>æ•°æ®åŠ å¯†</li><li>å¯ä»¥é¿å… <code>CSRF</code>ï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰</li><li>æ‰©å±•æ€§æ›´å¼º</li><li>æœåŠ¡é—´å¯ä»¥å…±äº«</li><li>å¢åŠ æœåŠ¡èŠ‚ç‚¹æ›´ç®€å•</li></ul><p><code>JWT</code>ï¼ˆ<code>JSON Web Token</code>ï¼‰æ˜¯ç›®å‰æœ€æµè¡Œçš„è·¨åŸŸè®¤è¯è§£å†³æ–¹æ¡ˆï¼Œå¯ç”¨äºåŸºäº <code>token</code> çš„èº«ä»½éªŒè¯ <code>JWT</code> ä½¿ <code>token</code> çš„ç”Ÿæˆä¸æ ¡éªŒæ›´è§„èŒƒï¼Œå¯ä»¥ä½¿ç”¨ jsonwebtoken åŒ… æ¥æ“ä½œ <code>token</code>.</p><p>ä»£ç æ“ä½œï¼š</p><div class="language-JavaScript ext-JavaScript line-numbers-mode"><pre class="language-JavaScript"><code>// å¼•å…¥ jwt
const jwt = require(&#39;jsonwebtoken&#39;)

// ç”Ÿæˆ token
// jwt.sign(ç”¨æˆ·æ•°æ®ï¼ŒåŠ å¯†å­—ç¬¦ä¸²ï¼Œé…ç½®å¯¹è±¡)
let token = jwt.sign({
    username: &#39;admin&#39;
}, &#39;123456&#39;, {
    // å•ä½ç§’ 60ç§’åè¿‡æœŸ
    expiresIn: 60
})

// eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNjg1NTE5NTkzLCJleHAiOjE2ODU1MTk2NTN9.IP90SEMbkzaBGnxVDoq63IHWzQ8crbfapvYCylGZhhg
console.log(token)

// æ ¡éªŒ token
jwt.verify(token, &#39;123456&#39;, (error, data) =&gt; {
    if (error) {
        console.log(&#39;token æ ¡éªŒå¤±è´¥&#39;, error)
        return
    }
    console.log(data)
})
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/chenyl8848/chenyl8848.github.io/edit/master/docs/web/framework/nodejs/nodejs.md" rel="noopener noreferrer" target="_blank" arialabel="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" arialabelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2024/10/2 03:11:43</span></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 1063415880@qq.com">chenyl8848</span>,<!--]--><!--[--><span class="contributor" title="email: 1063415880@qq.com">cyl</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/web/framework/nodejs/" class="nav-link active prev" arialabel="Node.js"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><i class="icon iconfont icon-node-js"></i>Node.js</div></a><!----></nav><div class="giscus-wrapper input-top" style="display:block;"><giscus-widget repo="chenyl8848/chenyl8848.github.io" repoId="R_kgDOHJ-qSQ" category="Announcements" categoryId="DIC_kwDOHJ-qSc4COg8Z" lang="zh-CN" theme="light" mapping="pathname" inputPosition="top" reactionsEnabled="1" emitMetadata="0"></giscus-widget></div><!----></main><!--]--><footer class="footer-wrapper"><div class="footer">æ²¡æœ‰æœ€å¥½ï¼Œåªæœ‰æ›´å¥½ï¼</div><div class="copyright">Copyright Â© 2025 Javaé™ˆåºå‘˜</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.06d697e7.js" defer></script>
  </body>
</html>
