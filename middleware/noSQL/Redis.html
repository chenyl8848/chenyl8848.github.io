<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.38" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://chenyl8848.github.io/middleware/noSQL/Redis.html"><meta property="og:site_name" content="Java陈序员"><meta property="og:title" content="Redis 万字入门教程"><meta property="og:type" content="article"><meta property="og:updated_time" content="2024-10-14T03:34:11.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="Redis"><meta property="article:published_time" content="2022-04-10T00:00:00.000Z"><meta property="article:modified_time" content="2024-10-14T03:34:11.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_3316994_227lwxrw41z.css"><title>Redis 万字入门教程 | Java陈序员</title><meta name="description" content="Java陈序员的个人博客网站">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.7c8a6ce0.css">
    <link rel="modulepreload" href="/assets/app.06d697e7.js"><link rel="modulepreload" href="/assets/Redis.html.effc1435.js"><link rel="modulepreload" href="/assets/Redis.html.b68fe00a.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/" class="home-link"><img class="logo" src="/logo.webp" alt="Java陈序员"><!----><span class="site-name hide-in-pad">Java陈序员</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" arialabel="首页"><i class="icon iconfont icon-home"></i>首页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="后端"><span class="title"><i class="icon iconfont icon-rearend"></i>后端</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/rearend/java/" class="nav-link" arialabel="Java"><i class="icon iconfont icon-java"></i>Java<!----></a></li><li class="dropdown-item"><a href="/rearend/spring/" class="nav-link" arialabel="Spring"><i class="icon iconfont icon-spring"></i>Spring<!----></a></li><li class="dropdown-item"><a href="/rearend/springBoot/" class="nav-link" arialabel="Spring Boot"><i class="icon iconfont icon-springboot"></i>Spring Boot<!----></a></li><li class="dropdown-item"><a href="/rearend/microServices/" class="nav-link" arialabel="微服务"><i class="icon iconfont icon-microServices"></i>微服务<!----></a></li><li class="dropdown-item"><a href="/rearend/dataStructure/" class="nav-link" arialabel="数据结构"><i class="icon iconfont icon-dataStructure"></i>数据结构<!----></a></li><li class="dropdown-item"><a href="/rearend/algorithm/" class="nav-link" arialabel="算法"><i class="icon iconfont icon-algorithm"></i>算法<!----></a></li><li class="dropdown-item"><a href="/rearend/designPattern/" class="nav-link" arialabel="设计模式"><i class="icon iconfont icon-designPattern"></i>设计模式<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="中间件"><span class="title"><i class="icon iconfont icon-middleware"></i>中间件</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/middleware/database/" class="nav-link" arialabel="数据库"><i class="icon iconfont icon-database"></i>数据库<!----></a></li><li class="dropdown-item"><a href="/middleware/noSQL/" class="nav-link active" arialabel="NoSQL"><i class="icon iconfont icon-noSQL"></i>NoSQL<!----></a></li><li class="dropdown-item"><a href="/middleware/mq/" class="nav-link" arialabel="MQ"><i class="icon iconfont icon-MQ"></i>MQ<!----></a></li><li class="dropdown-item"><a href="/middleware/zookeeper/" class="nav-link" arialabel="ZooKeeper"><i class="icon iconfont icon-zookeeper"></i>ZooKeeper<!----></a></li><li class="dropdown-item"><a href="/middleware/elasticsearch/" class="nav-link" arialabel="ElasticSearch"><i class="icon iconfont icon-elasticsearch"></i>ElasticSearch<!----></a></li><li class="dropdown-item"><a href="/middleware/prometheus/" class="nav-link" arialabel="Prometheus"><i class="icon iconfont icon-prometheus"></i>Prometheus<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="服务器"><span class="title"><i class="icon iconfont icon-server"></i>服务器</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/server/linux/" class="nav-link" arialabel="Linux"><i class="icon iconfont icon-linux"></i>Linux<!----></a></li><li class="dropdown-item"><a href="/server/docker/" class="nav-link" arialabel="Docker"><i class="icon iconfont icon-docker"></i>Docker<!----></a></li><li class="dropdown-item"><a href="/server/kubernetes/" class="nav-link" arialabel="Kubernetes"><i class="icon iconfont icon-kubernetes"></i>Kubernetes<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="AI"><span class="title"><i class="icon iconfont icon-wuguan"></i>AI</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/ai/assistant/" class="nav-link" arialabel="AI 助手"><i class="icon iconfont icon-Cursor"></i>AI 助手<!----></a></li><li class="dropdown-item"><a href="/ai/framework/" class="nav-link" arialabel="AI 框架"><i class="icon iconfont icon-Aisucai"></i>AI 框架<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="前端"><span class="title"><i class="icon iconfont icon-wangye"></i>前端</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>框架</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/framework/js/" class="nav-link" arialabel="JavaScript"><i class="icon iconfont icon-java_script"></i>JavaScript<!----></a></li><li class="dropdown-subitem"><a href="/web/framework/nodejs/" class="nav-link" arialabel="Node.js"><i class="icon iconfont icon-node-js"></i>Node.js<!----></a></li><li class="dropdown-subitem"><a href="/web/framework/vue/" class="nav-link" arialabel="Vue.js"><i class="icon iconfont icon-vue"></i>Vue.js<!----></a></li><li class="dropdown-subitem"><a href="/web/framework/react/" class="nav-link" arialabel="React"><i class="icon iconfont icon-react"></i>React<!----></a></li><li class="dropdown-subitem"><a href="/web/framework/mp/" class="nav-link" arialabel="小程序"><i class="icon iconfont icon-xiaochengxu"></i>小程序<!----></a></li><li class="dropdown-subitem"><a href="/web/framework/blog/" class="nav-link" arialabel="Blog"><i class="icon iconfont icon-folder-vuepress"></i>Blog<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="索引"><span class="title"><i class="icon iconfont icon-index"></i>索引</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article/" class="nav-link" arialabel="文章"><i class="icon iconfont icon-articles"></i>文章<!----></a></li><li class="dropdown-item"><a href="/category/java/" class="nav-link" arialabel="分类"><i class="icon iconfont icon-category"></i>分类<!----></a></li><li class="dropdown-item"><a href="/tag/" class="nav-link" arialabel="标签"><i class="icon iconfont icon-tag"></i>标签<!----></a></li><li class="dropdown-item"><a href="/timeline/" class="nav-link" arialabel="时间轴"><i class="icon iconfont icon-timeLine"></i>时间轴<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzkzOTM3NjAzOQ==&amp;action=getalbum&amp;album_id=2783119709868212224&amp;scene=126&amp;sessionid=-659761542&amp;uin=&amp;key=&amp;devicetype=Windows+11+x64&amp;version=6309092b&amp;lang=zh_CN&amp;ascene=0&amp;session_us=gh_b840974cfe99" rel="noopener noreferrer" target="_blank" arialabel="开源项目" class="nav-link"><i class="icon iconfont icon-note"></i>开源项目<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><!----></div><div class="nav-item"><a class="repo-link" href="https://github.com/chenyl8848/chenyl8848.github.io" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" arialabelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" arialabelledby="outlook"><title id="outlook" lang="en">outlook icon</title><g fill="currentColor"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></g></svg><div class="outlook-dropdown"><!----></div></button></div><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/middleware/noSQL/" class="nav-link sidebar-link sidebar-page" arialabel="NoSQL"><i class="icon iconfont icon-noSQL"></i>NoSQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Redis</span><span class="arrow down"></span></button><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/middleware/noSQL/Redis.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" arialabel="Redis 万字入门教程"><!---->Redis 万字入门教程<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_1-nosql" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1. NoSQL"><!---->1. NoSQL<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_1-1-nosql-介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.1 NoSQL 介绍"><!---->1.1 NoSQL 介绍<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_1-2-nosql-四大分类" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.2 NoSQL 四大分类"><!---->1.2 NoSQL 四大分类<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_1-3-nosql-应用场景" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="1.3 NoSQL 应用场景"><!---->1.3 NoSQL 应用场景<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_2-redis" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2. Redis"><!---->2. Redis<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_2-1-redis-介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.1 Redis 介绍"><!---->2.1 Redis 介绍<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_2-2-redis-特点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.2 Redis 特点"><!---->2.2 Redis 特点<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_2-3-redis-安装" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="2.3 Redis 安装"><!---->2.3 Redis 安装<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-redis-数据库相关指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3. Redis 数据库相关指令"><!---->3. Redis 数据库相关指令<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-1-数据库操作指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3.1 数据库操作指令"><!---->3.1 数据库操作指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-2-key-操作指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3.2 Key 操作指令"><!---->3.2 Key 操作指令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-3-string-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3.3 String 类型"><!---->3.3 String 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-4-list-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3.4 List 类型"><!---->3.4 List 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-5-set-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3.5 Set 类型"><!---->3.5 Set 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-6-zset-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3.6 ZSet 类型"><!---->3.6 ZSet 类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-7-hash-类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="3.7 Hash 类型"><!---->3.7 Hash 类型<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_4-redis-持久化机制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4. Redis 持久化机制"><!---->4. Redis 持久化机制<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_4-1-快照-snapshot" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.1 快照(Snapshot)"><!---->4.1 快照(Snapshot)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_4-2-aof-只追加日志文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.2 AOF 只追加日志文件"><!---->4.2 AOF 只追加日志文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_4-3-aof-文件的重写" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.3 AOF 文件的重写"><!---->4.3 AOF 文件的重写<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_4-4-持久化总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="4.4 持久化总结"><!---->4.4 持久化总结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-java-操作-redis" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5. Java 操作 Redis"><!---->5. Java 操作 Redis<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-1-环境准备" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.1 环境准备"><!---->5.1 环境准备<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-2-操作-key-相关api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.2 操作 Key 相关API"><!---->5.2 操作 Key 相关API<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-3-操作-string-相关api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.3 操作 String 相关API"><!---->5.3 操作 String 相关API<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-4-操作-list-相关-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.4 操作 List 相关 API"><!---->5.4 操作 List 相关 API<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-5-操作-set-的相关-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.5 操作 Set 的相关 API"><!---->5.5 操作 Set 的相关 API<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-6-操作-zset-相关-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.6 操作 ZSet 相关 API"><!---->5.6 操作 ZSet 相关 API<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-7-操作-hash-相关-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="5.7 操作 Hash 相关 API"><!---->5.7 操作 Hash 相关 API<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_6-springboot-整合-redis" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6. SpringBoot 整合 Redis"><!---->6. SpringBoot 整合 Redis<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_6-1-环境准备" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.1 环境准备"><!---->6.1 环境准备<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_6-2-使用-stringredistemplate-和-redistemplate" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="6.2 使用 StringRedisTemplate 和 RedisTemplate"><!---->6.2 使用 StringRedisTemplate 和 RedisTemplate<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_7-redis-主从复制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="7. Redis 主从复制"><!---->7. Redis 主从复制<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_7-1-主从复制介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="7.1 主从复制介绍"><!---->7.1 主从复制介绍<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_7-2-搭建主从复制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="7.2 搭建主从复制"><!---->7.2 搭建主从复制<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_8-redis-sentinel-哨兵机制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8. Redis Sentinel 哨兵机制"><!---->8. Redis Sentinel 哨兵机制<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_8-1-sentinel-哨兵机制介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.1 Sentinel 哨兵机制介绍"><!---->8.1 Sentinel 哨兵机制介绍<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_8-2-搭建哨兵架构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.2 搭建哨兵架构"><!---->8.2 搭建哨兵架构<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_8-3-通过-springboot-操作哨兵" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="8.3 通过 SpringBoot 操作哨兵"><!---->8.3 通过 SpringBoot 操作哨兵<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_9-redis-集群" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9. Redis 集群"><!---->9. Redis 集群<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_9-1-集群介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.1 集群介绍"><!---->9.1 集群介绍<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_9-2-集群搭建" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="9.2 集群搭建"><!---->9.2 集群搭建<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_10-redis-实现分布式-session-管理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="10. Redis 实现分布式 Session 管理"><!---->10. Redis 实现分布式 Session 管理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_10-1-管理机制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="10.1 管理机制"><!---->10.1 管理机制<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/middleware/noSQL/Redis.html#_10-2-开发-session-管理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="10.2 开发 Session 管理"><!---->10.2 开发 Session 管理<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">MongoDB</span><span class="arrow right"></span></button><!--[--><!--[--><!----><!--]--><!----><!--]--></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Redis 万字入门教程</h1><div class="article-info"><span class="author-info" arialabel="作者🖊" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" arialabelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><a class="author-item" href="https://chenyl8848.github.io" target="_blank" rel="noopener noreferrer">Java陈序员</a></span><span property="author" content="Java陈序员"></span></span><!----><span class="date-info" arialabel="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" arialabelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2022年4月10日</span><meta property="datePublished" content="2022-04-10T00:00:00.000Z"></span><span class="category-info" arialabel="分类🌈" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" arialabelledby="category"><title id="category" lang="en">category icon</title><g fill="currentColor"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></g></svg><ul class="categories-wrapper"><li class="category category5 clickable" role="navigation">中间件</li><li class="category category7 clickable" role="navigation">NoSQL</li><meta property="articleSection" content="中间件,NoSQL"></ul></span><span arialabel="标签🏷" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" arialabelledby="tag"><title id="tag" lang="en">tag icon</title><g fill="currentColor"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></g></svg><ul class="tags-wrapper"><li class="tag tag3 clickable" role="navigation">Redis</li></ul><meta property="keywords" content="Redis"></span><span class="reading-time-info" arialabel="阅读时间⌛" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" arialabelledby="timer"><title id="timer" lang="en">timer icon</title><g fill="currentColor"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></g></svg><span>大约 28 分钟</span><meta property="timeRequired" content="PT28M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_1-nosql" class="router-link-active router-link-exact-active toc-link level2">1. NoSQL</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_1-1-nosql-介绍" class="router-link-active router-link-exact-active toc-link level3">1.1 NoSQL 介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_1-2-nosql-四大分类" class="router-link-active router-link-exact-active toc-link level3">1.2 NoSQL 四大分类</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_1-3-nosql-应用场景" class="router-link-active router-link-exact-active toc-link level3">1.3 NoSQL 应用场景</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_2-redis" class="router-link-active router-link-exact-active toc-link level2">2. Redis</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_2-1-redis-介绍" class="router-link-active router-link-exact-active toc-link level3">2.1 Redis 介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_2-2-redis-特点" class="router-link-active router-link-exact-active toc-link level3">2.2 Redis 特点</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_2-3-redis-安装" class="router-link-active router-link-exact-active toc-link level3">2.3 Redis 安装</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-redis-数据库相关指令" class="router-link-active router-link-exact-active toc-link level2">3. Redis 数据库相关指令</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-1-数据库操作指令" class="router-link-active router-link-exact-active toc-link level3">3.1 数据库操作指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-2-key-操作指令" class="router-link-active router-link-exact-active toc-link level3">3.2 Key 操作指令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-3-string-类型" class="router-link-active router-link-exact-active toc-link level3">3.3 String 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-4-list-类型" class="router-link-active router-link-exact-active toc-link level3">3.4 List 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-5-set-类型" class="router-link-active router-link-exact-active toc-link level3">3.5 Set 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-6-zset-类型" class="router-link-active router-link-exact-active toc-link level3">3.6 ZSet 类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_3-7-hash-类型" class="router-link-active router-link-exact-active toc-link level3">3.7 Hash 类型</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_4-redis-持久化机制" class="router-link-active router-link-exact-active toc-link level2">4. Redis 持久化机制</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_4-1-快照-snapshot" class="router-link-active router-link-exact-active toc-link level3">4.1 快照(Snapshot)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_4-2-aof-只追加日志文件" class="router-link-active router-link-exact-active toc-link level3">4.2 AOF 只追加日志文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_4-3-aof-文件的重写" class="router-link-active router-link-exact-active toc-link level3">4.3 AOF 文件的重写</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_4-4-持久化总结" class="router-link-active router-link-exact-active toc-link level3">4.4 持久化总结</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-java-操作-redis" class="router-link-active router-link-exact-active toc-link level2">5. Java 操作 Redis</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-1-环境准备" class="router-link-active router-link-exact-active toc-link level3">5.1 环境准备</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-2-操作-key-相关api" class="router-link-active router-link-exact-active toc-link level3">5.2 操作 Key 相关API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-3-操作-string-相关api" class="router-link-active router-link-exact-active toc-link level3">5.3 操作 String 相关API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-4-操作-list-相关-api" class="router-link-active router-link-exact-active toc-link level3">5.4 操作 List 相关 API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-5-操作-set-的相关-api" class="router-link-active router-link-exact-active toc-link level3">5.5 操作 Set 的相关 API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-6-操作-zset-相关-api" class="router-link-active router-link-exact-active toc-link level3">5.6 操作 ZSet 相关 API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_5-7-操作-hash-相关-api" class="router-link-active router-link-exact-active toc-link level3">5.7 操作 Hash 相关 API</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_6-springboot-整合-redis" class="router-link-active router-link-exact-active toc-link level2">6. SpringBoot 整合 Redis</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_6-1-环境准备" class="router-link-active router-link-exact-active toc-link level3">6.1 环境准备</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_6-2-使用-stringredistemplate-和-redistemplate" class="router-link-active router-link-exact-active toc-link level3">6.2 使用 StringRedisTemplate 和 RedisTemplate</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_7-redis-主从复制" class="router-link-active router-link-exact-active toc-link level2">7. Redis 主从复制</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_7-1-主从复制介绍" class="router-link-active router-link-exact-active toc-link level3">7.1 主从复制介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_7-2-搭建主从复制" class="router-link-active router-link-exact-active toc-link level3">7.2 搭建主从复制</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_8-redis-sentinel-哨兵机制" class="router-link-active router-link-exact-active toc-link level2">8. Redis Sentinel 哨兵机制</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_8-1-sentinel-哨兵机制介绍" class="router-link-active router-link-exact-active toc-link level3">8.1 Sentinel 哨兵机制介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_8-2-搭建哨兵架构" class="router-link-active router-link-exact-active toc-link level3">8.2 搭建哨兵架构</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_8-3-通过-springboot-操作哨兵" class="router-link-active router-link-exact-active toc-link level3">8.3 通过 SpringBoot 操作哨兵</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_9-redis-集群" class="router-link-active router-link-exact-active toc-link level2">9. Redis 集群</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_9-1-集群介绍" class="router-link-active router-link-exact-active toc-link level3">9.1 集群介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_9-2-集群搭建" class="router-link-active router-link-exact-active toc-link level3">9.2 集群搭建</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_10-redis-实现分布式-session-管理" class="router-link-active router-link-exact-active toc-link level2">10. Redis 实现分布式 Session 管理</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_10-1-管理机制" class="router-link-active router-link-exact-active toc-link level3">10.1 管理机制</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/middleware/noSQL/Redis.html#_10-2-开发-session-管理" class="router-link-active router-link-exact-active toc-link level3">10.2 开发 Session 管理</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><h1 id="redis-万字入门教程" tabindex="-1"><a class="header-anchor" href="#redis-万字入门教程" aria-hidden="true">#</a> Redis 万字入门教程</h1><blockquote><p><a href="https://www.bilibili.com/video/BV1jD4y1Q7tU?spm_id_from=333.999.0.0" target="_blank" rel="noopener noreferrer">学习视频【编程不良人】<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/Redis_Mindmap.png" alt="" loading="lazy"></p><h2 id="_1-nosql" tabindex="-1"><a class="header-anchor" href="#_1-nosql" aria-hidden="true">#</a> 1. NoSQL</h2><h3 id="_1-1-nosql-介绍" tabindex="-1"><a class="header-anchor" href="#_1-1-nosql-介绍" aria-hidden="true">#</a> 1.1 NoSQL 介绍</h3><p><strong>NoSQL</strong>(<code>Not Only SQL</code> )，意即<strong>不仅仅是 SQL</strong>,泛指<strong>非关系型的数据库</strong>。NoSQL 这个技术门类，早期就有人提出，发展至2009年趋势越发高涨。</p><p>随着互联网网站的兴起，传统的关系数据库在应付动态网站，特别是超大规模和高并发的纯动态网站已经显得力不从心，暴露了很多难以克服的问题。如<strong>商城网站中对商品数据频繁查询、对热搜商品的排行统计、订单超时问题、以及微信朋友圈（音频，视频）存储</strong>等相关使用传统的关系型数据库实现就显得非常复杂，虽然能实现相应功能但是在性能上却不是那么乐观。NoSQL 这个技术门类的出现，更好的解决了这些问题，它告诉了世界不仅仅是 SQL.</p><h3 id="_1-2-nosql-四大分类" tabindex="-1"><a class="header-anchor" href="#_1-2-nosql-四大分类" aria-hidden="true">#</a> 1.2 NoSQL 四大分类</h3><ul><li>键值(Key-Value)存储数据库</li></ul><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 说明
  这一类数据库主要会使用到一个哈希表，这个表中有一个特定的键和一个指针指向特定的数据。

<span class="token list punctuation">2.</span> 特点
  Key/Value 模型对于 IT 系统来说的优势在于简单、易部署。  
  但是如果 DBA 只对部分值进行查询或更新的时候，Key/Value 就显得效率低下了。

<span class="token list punctuation">3.</span> 相关产品
  Tokyo Cabinet/Tyrant
  Redis
  SSDB
  Voldemort 
  Oracle BDB
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>列存储数据库</li></ul><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 说明
  这部分数据库通常是用来应对分布式存储的海量数据。

<span class="token list punctuation">2.</span> 特点
  键仍然存在，但是它们的特点是指向了多个列。这些列是由列家族来安排的。

<span class="token list punctuation">3.</span> 相关产品
  Cassandra、HBase、Riak
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>文档型数据库</li></ul><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 说明
  文档型数据库的灵感是来自于 Lotus Notes 办公软件的，而且它同第一种键值存储相类似该类型的数据模型是版本化的文档，半结构化的文档以特定的格式存储，比如 JSON.文档型数据库可以看作是键值数据库的升级版，允许之间嵌套键值，而且文档型数据库比键值数据库的查询效率更高。

<span class="token list punctuation">2.</span> 特点
  以文档形式存储

<span class="token list punctuation">3.</span> 相关产品
  MongoDB、CouchDB,国内也有文档型数据库 SequoiaDB,已经开源。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>图形(Graph)数据库</li></ul><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 说明
 图形结构的数据库同其他行列以及刚性结构的 SQL 数据库不同，它是使用灵活的图形模型，并且能够扩展到多个服务器上。
 NoSQL 数据库没有标准的查询语言(SQL)，因此进行数据库查询需要制定数据模型。许多 NoSQL 数据库都有 REST 式的数据接口或者查询 API.

<span class="token list punctuation">2.</span> 特点

<span class="token list punctuation">3.</span> 相关产品
 Neo4J、InfoGrid、 Infinite Graph
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-3-nosql-应用场景" tabindex="-1"><a class="header-anchor" href="#_1-3-nosql-应用场景" aria-hidden="true">#</a> 1.3 NoSQL 应用场景</h3><ul><li>数据模型比较简单</li><li>需要灵活性更强的IT系统</li><li>对数据库性能要求较高</li><li>不需要高度的数据一致性</li></ul><hr><h2 id="_2-redis" tabindex="-1"><a class="header-anchor" href="#_2-redis" aria-hidden="true">#</a> 2. Redis</h2><h3 id="_2-1-redis-介绍" tabindex="-1"><a class="header-anchor" href="#_2-1-redis-介绍" aria-hidden="true">#</a> 2.1 Redis 介绍</h3><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623121234046.png" alt="" loading="lazy"></p><blockquote><p>Redis is an open source (BSD licensed), in-memory data structure store, used as a database, cache and message broker.</p></blockquote><p>Redis 是一个遵循 BSD 开源的基于内存数据存储库，可用于作为数据库、缓存 、消息中间件。</p><p><strong>总结: Redis 是一个内存型的数据库</strong>。</p><h3 id="_2-2-redis-特点" tabindex="-1"><a class="header-anchor" href="#_2-2-redis-特点" aria-hidden="true">#</a> 2.2 Redis 特点</h3><ul><li>Redis 是一个高性能 Key/Value 内存型数据库</li><li>Redis 支持丰富的数据类型</li><li>Redis 支持持久化</li><li>Redis 单线程、单进程</li></ul><h3 id="_2-3-redis-安装" tabindex="-1"><a class="header-anchor" href="#_2-3-redis-安装" aria-hidden="true">#</a> 2.3 Redis 安装</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">0.</span> 准备环境
  <span class="token list punctuation">-</span> vmware15.x+
  <span class="token list punctuation">-</span> centos7.x+

<span class="token list punctuation">1.</span> 下载 Redis 源码包
  https://redis.io/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623121621195.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">2.</span> 下载完整源码包
  redis-4.0.10.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623123918876.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">3.</span> 将下载的 Redis 安装包上传到 Linux 中
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623124327319.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">4.</span> 解压缩文件
  tar -zxvf redis-4.0.10.tar.gz
  ll
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623124522026.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">5.</span> 安装 gcc  
  yum install -y gcc

<span class="token list punctuation">6.</span> 进入解压缩目录执行如下命令
  make MALLOC=libc

<span class="token list punctuation">7.</span> 编译完成后执行如下命令
  make install PREFIX=/usr/redis

<span class="token list punctuation">8.</span> 进入 /usr/redis 目录启动 Redis 服务 
  ./redis-server
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623125420505.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">9.</span> Redis 服务端口默认是 6379

<span class="token list punctuation">10.</span> 进入 bin 目录执行客户端连接操作
  ./redis-cli –p 6379
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623125716013.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">11.</span>  连接成功出现上面界面连接成功
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><h2 id="_3-redis-数据库相关指令" tabindex="-1"><a class="header-anchor" href="#_3-redis-数据库相关指令" aria-hidden="true">#</a> 3. Redis 数据库相关指令</h2><h3 id="_3-1-数据库操作指令" tabindex="-1"><a class="header-anchor" href="#_3-1-数据库操作指令" aria-hidden="true">#</a> 3.1 数据库操作指令</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> Redis 库说明
  使用 Redis 的默认配置启动 Redis 服务后，默认会存在 16 个库，编号从 0-15
  可以使用 select 库的编号 来选择一个 Redis 的库

<span class="token list punctuation">2.</span> Redis 操作库的指令
  清空当前的库 FLUSHDB
  清空全部的库 FLUSHALL

<span class="token list punctuation">3.</span> Redis 客户端显示中文
  ./redis-cli -p 7000 --raw
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-2-key-操作指令" tabindex="-1"><a class="header-anchor" href="#_3-2-key-操作指令" aria-hidden="true">#</a> 3.2 Key 操作指令</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> DEL 指令
  语法：DEL key [key ...] 
  作用：删除给定的一个或多个 key,不存在的 key 会被忽略
  可用版本：&gt;= 1.0.0
  返回值：被删除 key 的数量 

<span class="token list punctuation">2.</span> EXISTS 指令
  语法：EXISTS key
  作用：检查给定 key 是否存在
  可用版本：&gt;= 1.0.0
  返回值：若 key 存在，返回 1,否则返回 0

<span class="token list punctuation">3.</span> EXPIRE
  语法：EXPIRE key seconds
  作用：为给定 key 设置生存时间，当 key 过期时(生存时间为0 )，它会被自动删除。
  可用版本： &gt;= 1.0.0
  时间复杂度： O(1)
  返回值：设置成功返回 1

<span class="token list punctuation">4.</span> KEYS
  语法：KEYS pattern
  作用：查找所有符合给定模式 pattern 的 key
  语法:
	  KEYS <span class="token italic"><span class="token punctuation">*</span><span class="token content"> 匹配数据库中所有 key
	  KEYS h?llo 匹配 hello、hallo 和 hxllo 等
	  KEYS h</span><span class="token punctuation">*</span></span>llo 匹配 hllo 和 heeeeello 等
	  KEYS h[ae]llo 匹配 hello 和 hallo,但不匹配 hillo,特殊符号用 &quot;\&quot; 隔开
  可用版本：&gt;= 1.0.0
  返回值：符合给定模式的 key 列表

<span class="token list punctuation">5.</span> MOVE
  语法：MOVE key db
  作用：将当前数据库的 key 移动到给定的数据库 db 当中
  可用版本：&gt;= 1.0.0
  返回值：移动成功返回 1, 失败则返回 0

<span class="token list punctuation">6.</span> PEXPIRE
  语法：PEXPIRE key milliseconds
  作用：这个命令和 EXPIRE 命令的作用类似，但是它以毫秒为单位设置 key 的生存时间，而不像 EXPIRE 命令以秒为单位
  可用版本：&gt;= 2.6.0
  时间复杂度：O(1)
  返回值：设置成功，返回 1,key 不存在或设置失败，返回 0

<span class="token list punctuation">7.</span> PEXPIREAT
  语法：PEXPIREAT key milliseconds-timestamp
  作用：这个命令和 EXPIREAT 命令类似，但它以毫秒为单位设置 key 的过期 Unix 时间戳，而不是像 EXPIREAT 以秒为单位
  可用版本：&gt;= 2.6.0
  返回值：如果生存时间设置成功，返回 1,当 key 不存在或没办法设置生存时间时，返回 0

<span class="token list punctuation">8.</span> TTL
  语法：TTL key
  作用：以秒为单位，返回给定 key 的剩余生存时间(TTL, time to live)
  可用版本：&gt;= 1.0.0
  返回值：
	  当 key 不存在时，返回 -2 
	  当 key 存在但没有设置剩余生存时间时，返回 -1 
	  否则，以秒为单位，返回 key 的剩余生存时间
  注意：在 Redis2.8 以前，当 key 不存在，或者 key 没有设置剩余生存时间时，命令都返回-1 

<span class="token list punctuation">9.</span> PTTL
  语法：PTTL key
  作用：这个命令类似于 TTL 命令，但它以毫秒为单位返回 key 的剩余生存时间，而不是像 TTL 命令以秒为单位
  可用版本：&gt;= 2.6.0
  返回值：
    当 key 不存在时，返回 -2
    当 key 存在但没有设置剩余生存时间时，返回 -1
  否则，以毫秒为单位，返回 key 的剩余生存时间
  注意：在 Redis2.8 以前，当 key 不存在，或者 key 没有设置剩余生存时间时，命令都返回 -1

<span class="token list punctuation">10.</span> RANDOMKEY
  语法：RANDOMKEY
  作用：从当前数据库中随机返回（不删除） 一个 key
  可用版本：&gt;= 1.0.0
  返回值：当数据库不为空时，返回一个 key,当数据库为空时，返回 nil

<span class="token list punctuation">11.</span> RENAME
  语法：RENAME key newkey
  作用：将 key 改名为 newkey,当 key 和 newkey 相同，或者 key 不存在时，返回一个错误；当 newkey 已经存在时，RENAME 命令将覆盖旧值
  可用版本：&gt;= 1.0.0
  返回值：改名成功时提示 OK,失败时候返回一个错误

<span class="token list punctuation">12.</span> TYPE
  语法：TYPE key
  作用：返回 key 所储存的值的类型
  可用版本：&gt;= 1.0.0
  返回值：
    none (key 不存在)
    string (字符串)
    list (列表)
    set (集合)
    zset (有序集)
    hash (哈希表)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br></div></div><h3 id="_3-3-string-类型" tabindex="-1"><a class="header-anchor" href="#_3-3-string-类型" aria-hidden="true">#</a> 3.3 String 类型</h3><ol><li>内存存储模型</li></ol><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623132104399.png" alt="" loading="lazy"></p><ol start="2"><li>常用操作命令</li></ol><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>set</td><td>设置一个key/value</td></tr><tr><td>get</td><td>根据key获得对应的value</td></tr><tr><td>mset</td><td>一次设置多个key value</td></tr><tr><td>mget</td><td>一次获得多个key的value</td></tr><tr><td>getset</td><td>获得原始key的值，同时设置新值</td></tr><tr><td>strlen</td><td>获得对应key存储value的长度</td></tr><tr><td>append</td><td>为对应key的value追加内容</td></tr><tr><td>getrange 索引0开始</td><td>截取value的内容</td></tr><tr><td>setex</td><td>设置一个key存活的有效期（秒）</td></tr><tr><td>psetex</td><td>设置一个key存活的有效期（毫秒）</td></tr><tr><td>setnx</td><td>存在不做任何操作,不存在添加</td></tr><tr><td>msetnx原子操作(只要有一个存在不做任何操作)</td><td>可以同时设置多个key,只有有一个存在都不保存</td></tr><tr><td>decr</td><td>进行数值类型的-1操作</td></tr><tr><td>decrby</td><td>根据提供的数据进行减法操作</td></tr><tr><td>Incr</td><td>进行数值类型的+1操作</td></tr><tr><td>incrby</td><td>根据提供的数据进行加法操作</td></tr><tr><td>Incrbyfloat</td><td>根据提供的数据加入浮点数</td></tr></tbody></table><h3 id="_3-4-list-类型" tabindex="-1"><a class="header-anchor" href="#_3-4-list-类型" aria-hidden="true">#</a> 3.4 List 类型</h3><p>List 类型相当于 Java 中 List 集合，<strong>元素有序且可以重复</strong>。</p><ol><li>内存存储模型</li></ol><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623161114380.png" alt="" loading="lazy"></p><ol start="2"><li>常用操作指令</li></ol><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>lpush</td><td>将某个值加入到一个 key 列表头部</td></tr><tr><td>lpushx</td><td>同 lpush,但是必须要保证这个 key 存在</td></tr><tr><td>rpush</td><td>将某个值加入到一个 key 列表末尾</td></tr><tr><td>rpushx</td><td>同 rpush,但是必须要保证这个 key 存在</td></tr><tr><td>lpop</td><td>返回和移除列表左边的第一个元素</td></tr><tr><td>rpop</td><td>返回和移除列表右边的第一个元素</td></tr><tr><td>lrange</td><td>获取某一个下标区间内的元素</td></tr><tr><td>llen</td><td>获取列表元素个数</td></tr><tr><td>lset</td><td>设置某一个指定索引的值(索引必须存在)</td></tr><tr><td>lindex</td><td>获取某一个指定索引位置的元素</td></tr><tr><td>lrem</td><td>删除重复元素</td></tr><tr><td>ltrim</td><td>保留列表中特定区间内的元素</td></tr><tr><td>linsert</td><td>在某一个元素之前，之后插入新元素</td></tr></tbody></table><h3 id="_3-5-set-类型" tabindex="-1"><a class="header-anchor" href="#_3-5-set-类型" aria-hidden="true">#</a> 3.5 Set 类型</h3><p>Set 类型相当于 Java 中的 Set 集合，<strong>元素无序且不可以重复</strong>。</p><ol><li>内存存储模型</li></ol><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623193634316.png" alt="" loading="lazy"></p><ol start="2"><li>常用命令</li></ol><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>sadd</td><td>为集合添加元素</td></tr><tr><td>smembers</td><td>显示集合中所有元素 无序</td></tr><tr><td>scard</td><td>返回集合中元素的个数</td></tr><tr><td>spop</td><td>随机返回一个元素 并将元素在集合中删除</td></tr><tr><td>smove</td><td>从一个集合中向另一个集合移动元素 必须是同一种类型</td></tr><tr><td>srem</td><td>从集合中删除一个元素</td></tr><tr><td>sismember</td><td>判断一个集合中是否含有这个元素</td></tr><tr><td>srandmember</td><td>随机返回元素</td></tr><tr><td>sdiff</td><td>去掉第一个集合中其它集合含有的相同元素</td></tr><tr><td>sinter</td><td>求交集</td></tr><tr><td>sunion</td><td>求和集</td></tr></tbody></table><h3 id="_3-6-zset-类型" tabindex="-1"><a class="header-anchor" href="#_3-6-zset-类型" aria-hidden="true">#</a> 3.6 ZSet 类型</h3><p>ZSet 类型是可排序的 Set 集合，但<strong>不可重复</strong>。</p><ol><li>内存模型</li></ol><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623194903967.png" alt="" loading="lazy"></p><ol start="2"><li>常用命令</li></ol><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>zadd</td><td>添加一个有序集合元素</td></tr><tr><td>zcard</td><td>返回集合的元素个数</td></tr><tr><td>zrange 升序 zrevrange 降序</td><td>返回一个范围内的元素</td></tr><tr><td>zrangebyscore</td><td>按照分数查找一个范围内的元素</td></tr><tr><td>zrank</td><td>返回排名</td></tr><tr><td>zrevrank</td><td>倒序排名</td></tr><tr><td>zscore</td><td>显示某一个元素的分数</td></tr><tr><td>zrem</td><td>移除某一个元素</td></tr><tr><td>zincrby</td><td>给某个特定元素加分</td></tr></tbody></table><h3 id="_3-7-hash-类型" tabindex="-1"><a class="header-anchor" href="#_3-7-hash-类型" aria-hidden="true">#</a> 3.7 Hash 类型</h3><p>Hash 类型中的 Value 是一个 Map 结构。</p><ol><li>内存模型</li></ol><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623200348408.png" alt="" loading="lazy"></p><ol start="2"><li>常用命令</li></ol><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>hset</td><td>设置一个 key/value 对</td></tr><tr><td>hget</td><td>获得一个 key 对应的 value</td></tr><tr><td>hgetall</td><td>获得所有的 key/value 对</td></tr><tr><td>hdel</td><td>删除某一个 key/value 对</td></tr><tr><td>hexists</td><td>判断一个 key 是否存在</td></tr><tr><td>hkeys</td><td>获得所有的 key</td></tr><tr><td>hvals</td><td>获得所有的 value</td></tr><tr><td>hmset</td><td>设置多个 key/value</td></tr><tr><td>hmget</td><td>获得多个 key的value</td></tr><tr><td>hsetnx</td><td>设置一个不存在的 key 的值</td></tr><tr><td>hincrby</td><td>为 value 进行加法运算</td></tr><tr><td>hincrbyfloat</td><td>为 value 加入浮点值</td></tr></tbody></table><hr><h2 id="_4-redis-持久化机制" tabindex="-1"><a class="header-anchor" href="#_4-redis-持久化机制" aria-hidden="true">#</a> 4. Redis 持久化机制</h2><p>client redis[内存] --&gt; 内存数据 - 数据持久化 --&gt; 磁盘</p><p>Redis 官方提供了两种不同的持久化方法来将数据存储到硬盘里面分别是：</p><ul><li>快照(Snapshot)</li><li>AOF (Append Only File) 只追加日志文件</li></ul><h3 id="_4-1-快照-snapshot" tabindex="-1"><a class="header-anchor" href="#_4-1-快照-snapshot" aria-hidden="true">#</a> 4.1 快照(Snapshot)</h3><ol><li>特点</li></ol><p>这种方式可以将某一时刻的所有数据都写入硬盘中，当然这也是 <strong>Redis 的默认开启持久化方式</strong>，保存的文件是以 <code>.rdb</code> 形式结尾的文件因此这种方式也称之为 <strong>RDB 方式</strong>。</p><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623204303074.png" alt="" loading="lazy"></p><ol start="2"><li>快照生成方式</li></ol><ul><li>客户端方式：<code>BGSAVE</code> 和 <code>SAVE</code> 指令</li><li>服务器配置自动触发</li></ul><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 客户端方式之 BGSAVE
  客户端可以使用 BGSAVE 命令来创建一个快照，当接收到客户端的 BGSAVE 命令时，Redis 会调用 fork 来创建一个子进程，然后子进程负责将快照写入磁盘中，而父进程则继续处理命令请求。
	
<span class="token code keyword">	名词解释: fork 当一个进程创建子进程的时候，底层的操作系统会创建该进程的一个副本，在类 Unix 系统中创建子进程的操作会进行优化：在刚开始的时候，父子进程共享相同内存，直到父进程或子进程对内存进行了写之后，对被写入的内存的共享才会结束服务。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623205132460.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">2.</span> 客户端方式之SAVE
  客户端还可以使用 SAVE 命令来创建一个快照，接收到 SAVE 命令的 Redis 服务器在快照创建完毕之前将不再响应任何其他的命令。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623205444101.png" alt="" loading="lazy"></p><blockquote><p><strong>注意：SAVE 命令并不常用，使用 SAVE 命令在快照创建完毕之前，Redis 处于阻塞状态，无法对外服务</strong>。</p></blockquote><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">3.</span> 服务器配置方式之满足配置自动触发
  如果用户在 redis.conf 中设置了 save 配置选项，Redis 会在 save 选项条件满足之后自动触发一次 BGSAVE 命令，如果设置多个 save 配置选项，当任意一个 save 配置选项条件满足，Redis也会触发一次 BGSAVE 命令。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623210021012.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">4.</span> 服务器接收客户端 shutdown 指令
  当 Redis 通过 shutdown 指令接收到关闭服务器的请求时，会执行一个 save 命令，阻塞所有的客户端，不再执行客户端执行发送的任何命令，并且在 save 命令执行完毕之后关闭服务器。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>配置生成快照名称和位置</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 修改生成快照名称
  dbfilename dump.rdb

<span class="token list punctuation">2.</span> 修改生成位置
  dir ./
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623210352448.png" alt="" loading="lazy"></p><h3 id="_4-2-aof-只追加日志文件" tabindex="-1"><a class="header-anchor" href="#_4-2-aof-只追加日志文件" aria-hidden="true">#</a> 4.2 AOF 只追加日志文件</h3><ol><li>特点</li></ol><p>这种方式可以将所有客户端执行的写命令记录到日志文件中，AOF 持久化会将被执行的写命令写到 AOF 的文件末尾，以此来记录数据发生的变化，因此只要 Redis 从头到尾执行一次AOF文件所包含的所有写命令，就可以恢复AOF文件的记录的数据集。</p><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623211330798.png" alt="" loading="lazy"></p><ol start="2"><li>开启 AOF 持久化</li></ol><p>在 Redis 的默认配置中AOF持久化机制是没有开启的，需要在配置中开启。</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 开启AOF持久化
  修改 appendonly yes 开启持久化
  修改 appendfilename &quot;appendonly.aof&quot; 指定生成文件名称
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623211508987.png" alt="" loading="lazy"></p><ol start="3"><li>日志追加频率</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> always 【谨慎使用】
  说明：每个 Redis 写命令都要同步写入硬盘，严重降低 Redis 速度
  解释：如果用户使用了 always 选项，那么每个 Redis 写命令都会被写入硬盘，从而将发生系统崩溃时出现的数据丢失减到最少；遗憾的是，因为这种同步策略需要对硬盘进行大量的写入操作，所以 Redis 处理命令的速度会受到硬盘性能的限制
  注意：转盘式硬盘在这种频率下200左右个命令/s;固态硬盘(SSD) 几百万个命令/s
  警告：使用 SSD 用户请谨慎使用 always 选项，这种模式不断写入少量数据的做法有可能会引发严重的写入放大问题，导致将固态硬盘的寿命从原来的几年降低为几个月

<span class="token list punctuation">2.</span> everysec 【推荐】
  说明：每秒执行一次同步显式的将多个写命令同步到磁盘
  解释：为了兼顾数据安全和写入性能，用户可以考虑使用 everysec 选项，让 Redis 每秒一次的频率对 AOF 文件进行同步；Redis 每秒同步一次 AOF 文件时性能和不使用任何持久化特性时的性能相差无几，而通过每秒同步一次 AOF 文件，Redis 可以保证，即使系统崩溃，用户最多丢失一秒之内产生的数据

<span class="token list punctuation">3.</span> no	【不推荐】
  说明：由操作系统决定何时同步 
  解释：最后使用 no 选项，将完全有操作系统决定什么时候同步 AOF 日志文件，这个选项不会对 Redis 性能带来影响但是系统崩溃时，会丢失不定数量的数据，另外如果用户硬盘处理写入操作不够快的话，当缓冲区被等待写入硬盘数据填满时，Redis 会处于阻塞状态，并导致 Redis 的处理命令请求的速度变慢
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="4"><li>修改同步频率</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 修改日志同步频率
  修改 appendfsync everysec|always|no 指定
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623211658910.png" alt="" loading="lazy"></p><h3 id="_4-3-aof-文件的重写" tabindex="-1"><a class="header-anchor" href="#_4-3-aof-文件的重写" aria-hidden="true">#</a> 4.3 AOF 文件的重写</h3><ol><li>AOF 带来的问题</li></ol><p>AOF 的方式也同时带来了另一个问题：<strong>持久化文件会变的越来越大</strong>。</p><p>例如我们调用 <code>incr test</code> 命令 100 次，文件中必须保存全部的100条命令，其实有99条都是多余的。因为要恢复数据库的状态其实文件中保存一条 <code>set test 100</code> 就够了。为了压缩 AOF 的持久化文件 Redis 提供了 AOF 重写(ReWriter)机制。</p><ol start="2"><li>AOF 重写</li></ol><p>用来在一定程度上减小 AOF 文件的体积。</p><ol start="3"><li>触发重写方式</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 客户端方式触发重写
  执行 BGREWRITEAOF 命令，不会阻塞 Redis 的服务

<span class="token list punctuation">2.</span> 服务器配置方式自动触发
  配置 redis.conf 中的 auto-aof-rewrite-percentage 选项
  如果设置 auto-aof-rewrite-percentage 值为 100 和 auto-aof-rewrite-min-size 64mb,并且启用的 AOF 持久化时，那么当 AOF 文件体积大于64M,并且 AOF 文件的体积比上一次重写之后体积大了至少一倍(100%)时，会自动触发，如果重写过于频繁，用户可以考虑将 auto-aof-rewrite-percentage 设置为更大
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623212547775.png" alt="" loading="lazy"></p><ol start="4"><li>重写原理</li></ol><blockquote><p><strong>注意：重写 AOF 文件的操作，并没有读取旧的 AOF 文件，而是将整个内存中的数据库内容用命令的方式重写了一个新的 AOF 文件，替换原有的文件这点和快照有点类似</strong>。</p></blockquote><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>重写流程：
  <span class="token list punctuation">1.</span> Redis 调用 fork,现在有父子两个进程，子进程根据内存中的数据库快照，往临时文件中写入重建数据库状态的命令
  <span class="token list punctuation">2.</span> 父进程继续处理 Client 请求，除了把写命令写入到原来的 AOF 文件中，同时把收到的写命令缓存起来，这样就能保证如果子进程重写失败的话并不会出问题
  <span class="token list punctuation">3.</span> 当子进程把快照内容写入已命令方式写到临时文件中后，子进程发信号通知父进程，然后父进程把缓存的写命令也写入到临时文件
  <span class="token list punctuation">4.</span> 现在父进程可以使用临时文件替换老的 AOF 文件，并重命名，后面收到的写命令也开始往新的 AOF 文件中追加
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623214843123.png" alt="" loading="lazy"></p><h3 id="_4-4-持久化总结" tabindex="-1"><a class="header-anchor" href="#_4-4-持久化总结" aria-hidden="true">#</a> 4.4 持久化总结</h3><p>两种持久化方案既可以同时使用，又可以单独使用，在某种情况下也可以都不使用，具体使用那种持久化方案取决于用户的数据和应用决定。</p><p>无论使用 AOF 还是快照机制持久化，将数据持久化到硬盘都是有必要的，除了持久化外，用户还应该对持久化的文件进行备份（最好备份在多个不同地方）。</p><hr><h2 id="_5-java-操作-redis" tabindex="-1"><a class="header-anchor" href="#_5-java-操作-redis" aria-hidden="true">#</a> 5. Java 操作 Redis</h2><h3 id="_5-1-环境准备" tabindex="-1"><a class="header-anchor" href="#_5-1-环境准备" aria-hidden="true">#</a> 5.1 环境准备</h3><ol><li>引入依赖</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--引入jedis连接依赖--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="2"><li>创建 Jedis 对象</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">//1.创建jedis对象</span>
   <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;192.168.40.4&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1.redis服务必须关闭防火墙  2.redis服务必须开启远程连接</span>
   jedis<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//选择操作的库默认0号库</span>
   <span class="token comment">//2.执行相关操作</span>
   <span class="token comment">//....</span>
   <span class="token comment">//3.释放资源</span>
   jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200623201932000.png" alt="" loading="lazy"></p><h3 id="_5-2-操作-key-相关api" tabindex="-1"><a class="header-anchor" href="#_5-2-操作-key-相关api" aria-hidden="true">#</a> 5.2 操作 Key 相关API</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">Jedis</span> jedis<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;192.168.202.205&quot;</span><span class="token punctuation">,</span> <span class="token number">7000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@After</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//测试key相关</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//删除一个key</span>
        jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//删除多个key</span>
        jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//判断一个key是否存在exits</span>
        <span class="token class-name">Boolean</span> name <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//设置一个key超时时间 expire pexpire</span>
        <span class="token class-name">Long</span> age <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//获取一个key超时时间 ttl</span>
        <span class="token class-name">Long</span> age1 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">ttl</span><span class="token punctuation">(</span><span class="token string">&quot;newage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>age1<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//随机获取一个key</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">randomKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//修改key名称</span>
        jedis<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;newage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//查看可以对应值的类型</span>
        <span class="token class-name">String</span> name1 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> maps <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;maps&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>maps<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627180325687.png" alt="" loading="lazy"></p><h3 id="_5-3-操作-string-相关api" tabindex="-1"><a class="header-anchor" href="#_5-3-操作-string-相关api" aria-hidden="true">#</a> 5.3 操作 String 相关API</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//测试String相关</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//set</span>
        jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;小陈&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//get</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//mset</span>
        jedis<span class="token punctuation">.</span><span class="token function">mset</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;好人&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;address&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;海淀区&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//mget</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> mget <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">mget</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;address&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mget<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>v<span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;v = &quot;</span> <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//getset</span>
        <span class="token class-name">String</span> set <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">getSet</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;小明&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//............</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627180352953.png" alt="" loading="lazy"></p><h3 id="_5-4-操作-list-相关-api" tabindex="-1"><a class="header-anchor" href="#_5-4-操作-list-相关-api" aria-hidden="true">#</a> 5.4 操作 List 相关 API</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//测试List相关</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token comment">//lpush</span>
        jedis<span class="token punctuation">.</span><span class="token function">lpush</span><span class="token punctuation">(</span><span class="token string">&quot;names1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;王五&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;赵柳&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;win7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//rpush</span>
        jedis<span class="token punctuation">.</span><span class="token function">rpush</span><span class="token punctuation">(</span><span class="token string">&quot;names1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xiaomingming&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//lrange</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> names1 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">lrange</span><span class="token punctuation">(</span><span class="token string">&quot;names1&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        names1<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>name<span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name = &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//lpop rpop</span>
        <span class="token class-name">String</span> names11 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">lpop</span><span class="token punctuation">(</span><span class="token string">&quot;names1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>names11<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//llen</span>
        jedis<span class="token punctuation">.</span><span class="token function">linsert</span><span class="token punctuation">(</span><span class="token string">&quot;lists&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BinaryClient</span><span class="token punctuation">.</span>LIST_POSITION<span class="token punctuation">.</span>BEFORE<span class="token punctuation">,</span><span class="token string">&quot;xiaohei&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xiaobai&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      	<span class="token comment">//........</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627180435997.png" alt="" loading="lazy"></p><h3 id="_5-5-操作-set-的相关-api" tabindex="-1"><a class="header-anchor" href="#_5-5-操作-set-的相关-api" aria-hidden="true">#</a> 5.5 操作 Set 的相关 API</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//测试SET相关</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token comment">//sadd</span>
  jedis<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//smembers</span>
  jedis<span class="token punctuation">.</span><span class="token function">smembers</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//sismember</span>
  jedis<span class="token punctuation">.</span><span class="token function">sismember</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xiaochen&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627181913715.png" alt="" loading="lazy"></p><h3 id="_5-6-操作-zset-相关-api" tabindex="-1"><a class="header-anchor" href="#_5-6-操作-zset-相关-api" aria-hidden="true">#</a> 5.6 操作 ZSet 相关 API</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//测试ZSET相关</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testZset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token comment">//zadd</span>
  jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//zrange</span>
  jedis<span class="token punctuation">.</span><span class="token function">zrange</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//zcard</span>
  jedis<span class="token punctuation">.</span><span class="token function">zcard</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//zrangeByScore</span>
  jedis<span class="token punctuation">.</span><span class="token function">zrangeByScore</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//..</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627181947116.png" alt="" loading="lazy"></p><h3 id="_5-7-操作-hash-相关-api" tabindex="-1"><a class="header-anchor" href="#_5-7-操作-hash-相关-api" aria-hidden="true">#</a> 5.7 操作 Hash 相关 API</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//测试HASH相关</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//hset</span>
  jedis<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">&quot;maps&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//hget</span>
  jedis<span class="token punctuation">.</span><span class="token function">hget</span><span class="token punctuation">(</span><span class="token string">&quot;maps&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//hgetall</span>
  jedis<span class="token punctuation">.</span><span class="token function">hgetAll</span><span class="token punctuation">(</span><span class="token string">&quot;mps&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//hkeys</span>
  jedis<span class="token punctuation">.</span><span class="token function">hkeys</span><span class="token punctuation">(</span><span class="token string">&quot;maps&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//hvals</span>
  jedis<span class="token punctuation">.</span><span class="token function">hvals</span><span class="token punctuation">(</span><span class="token string">&quot;maps&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//....</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200628093242527.png" alt="" loading="lazy"></p><hr><h2 id="_6-springboot-整合-redis" tabindex="-1"><a class="header-anchor" href="#_6-springboot-整合-redis" aria-hidden="true">#</a> 6. SpringBoot 整合 Redis</h2><p>Spring Boot Data(数据) Redis 中提供 <code>RedisTemplate和StringRedisTemplate</code>，其中 <code>StringRedisTemplate</code> 是 <code>RedisTemplate</code> 的子类，两个方法基本一致，不同之处主要体现在操作的数据类型不同，<code>RedisTemplate</code> 中的两个泛型都是 <code>Object</code>，意味着存储的 key 和 value 都可以是一个对象，而 <code>StringRedisTemplate</code> 的两个泛型都是 <code>String</code>，意味着 <code>StringRedisTemplate</code> 的 key 和 value 都只能是字符串。</p><blockquote><p><strong>注意：使用 <code>RedisTemplate</code> 默认是将对象序列化到 Redis 中，所以放入的对象必须实现对象序列化接口</strong>。</p></blockquote><h3 id="_6-1-环境准备" tabindex="-1"><a class="header-anchor" href="#_6-1-环境准备" aria-hidden="true">#</a> 6.1 环境准备</h3><ol><li>引入依赖</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>配置 <code>application.properties</code></li></ol><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">spring.redis.host</span><span class="token punctuation">=</span><span class="token attr-value">localhost</span>
<span class="token attr-name">spring.redis.port</span><span class="token punctuation">=</span><span class="token attr-value">6379</span>
<span class="token attr-name">spring.redis.database</span><span class="token punctuation">=</span><span class="token attr-value">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_6-2-使用-stringredistemplate-和-redistemplate" tabindex="-1"><a class="header-anchor" href="#_6-2-使用-stringredistemplate-和-redistemplate" aria-hidden="true">#</a> 6.2 使用 <code>StringRedisTemplate</code> 和 <code>RedisTemplate</code></h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">StringRedisTemplate</span> stringRedisTemplate<span class="token punctuation">;</span>  <span class="token comment">//对字符串支持比较友好，不能存储对象</span>
<span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span>  <span class="token comment">//存储对象</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置redistemplate值使用对象序列化策略</span>
    redisTemplate<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JdkSerializationRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//指定值使用对象序列化</span>
    <span class="token comment">//redisTemplate.opsForValue().set(&quot;user&quot;,new User(&quot;21&quot;,&quot;小黑&quot;,23,new Date()));</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//      Set keys = redisTemplate.keys(&quot;*&quot;);</span>
<span class="token comment">//      keys.forEach(key -&gt; System.out.println(key));</span>
    <span class="token comment">/*Object name = redisTemplate.opsForValue().get(&quot;name&quot;);
    System.out.println(name);*/</span>

    <span class="token comment">//Object xiaohei = redisTemplate.opsForValue().get(&quot;xiaohei&quot;);</span>
    <span class="token comment">//System.out.println(xiaohei);</span>
    <span class="token comment">/*redisTemplate.opsForValue().set(&quot;name&quot;,&quot;xxxx&quot;);
    Object name = redisTemplate.opsForValue().get(&quot;name&quot;);
    System.out.println(name);*/</span>
    <span class="token comment">/*redisTemplate.opsForList().leftPushAll(&quot;lists&quot;,&quot;xxxx&quot;,&quot;1111&quot;);
    List lists = redisTemplate.opsForList().range(&quot;lists&quot;, 0, -1);
    lists.forEach(list-&gt; System.out.println(list));*/</span>
<span class="token punctuation">}</span>


<span class="token comment">//key的绑定操作 如果日后对某一个key的操作及其频繁，可以将这个key绑定到对应redistemplate中，日后基于绑定操作都是操作这个key</span>
<span class="token comment">//boundValueOps 用来对String值绑定key</span>
<span class="token comment">//boundListOps 用来对List值绑定key</span>
<span class="token comment">//boundSetOps 用来对Set值绑定key</span>
<span class="token comment">//boundZsetOps 用来对Zset值绑定key</span>
<span class="token comment">//boundHashOps 用来对Hash值绑定key</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBoundKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">BoundValueOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nameValueOperations <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    nameValueOperations<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//yuew</span>
    nameValueOperations<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> s <span class="token operator">=</span> nameValueOperations<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>


<span class="token comment">//hash相关操作 opsForHash</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;maps&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;小黑&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> o <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;maps&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//zset相关操作 opsForZSet</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testZSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForZSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;zsets&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;小黑&quot;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> zsets <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForZSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token string">&quot;zsets&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    zsets<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>value<span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//set相关操作 opsForSet</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;sets&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xiaosan&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xiaosi&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xiaowu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sets <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token string">&quot;sets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sets<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>value<span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//list相关的操作opsForList</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// stringRedisTemplate.opsForList().leftPushAll(&quot;lists&quot;,&quot;张三&quot;,&quot;李四&quot;,&quot;王五&quot;);</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lists <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token string">&quot;lists&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lists<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>key <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//String相关的操作 opsForValue</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//stringRedisTemplate.opsForValue().set(&quot;166&quot;,&quot;好同学&quot;);</span>
    <span class="token class-name">String</span> s <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;166&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Long</span> size <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token string">&quot;166&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//key相关的操作</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keys <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//查看所有key</span>
    <span class="token class-name">Boolean</span> name <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">hasKey</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//判断某个key是否存在</span>
    stringRedisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//根据指定key删除</span>
    stringRedisTemplate<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//修改key的名称</span>
    stringRedisTemplate<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>HOURS<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置key超时时间 参数1:设置key名 参数2:时间 参数3:时间的单位</span>
    stringRedisTemplate<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//移动key</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br></div></div><hr><h2 id="_7-redis-主从复制" tabindex="-1"><a class="header-anchor" href="#_7-redis-主从复制" aria-hidden="true">#</a> 7. Redis 主从复制</h2><h3 id="_7-1-主从复制介绍" tabindex="-1"><a class="header-anchor" href="#_7-1-主从复制介绍" aria-hidden="true">#</a> 7.1 主从复制介绍</h3><p>主从复制架构仅仅用来解决数据的冗余备份，从节点仅仅用来同步数据，无法解决 Master 节点出现故障的自动故障转移。</p><p><strong>架构图</strong>：</p><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627201722700.png" alt="" loading="lazy"></p><h3 id="_7-2-搭建主从复制" tabindex="-1"><a class="header-anchor" href="#_7-2-搭建主从复制" aria-hidden="true">#</a> 7.2 搭建主从复制</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 准备 3 台机器并修改配置
  <span class="token list punctuation">-</span> master
    port 6379
    bind 0.0.0.0
    
  <span class="token list punctuation">-</span> slave1
    port 6380
    bind 0.0.0.0
    slaveof masterip masterport

  <span class="token list punctuation">-</span> slave2
    port 6381
    bind 0.0.0.0
    slaveof masterip masterport
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627202443388.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">2.</span> 启动 3 台机器进行测试
  cd /usr/redis/bin
  ./redis-server /root/master/redis.conf
  ./redis-server /root/slave1/redis.conf
  ./redis-server /root/slave2/redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h2 id="_8-redis-sentinel-哨兵机制" tabindex="-1"><a class="header-anchor" href="#_8-redis-sentinel-哨兵机制" aria-hidden="true">#</a> 8. Redis Sentinel 哨兵机制</h2><h3 id="_8-1-sentinel-哨兵机制介绍" tabindex="-1"><a class="header-anchor" href="#_8-1-sentinel-哨兵机制介绍" aria-hidden="true">#</a> 8.1 Sentinel 哨兵机制介绍</h3><p>Sentinel（哨兵）是 Redis 的高可用性解决方案：由一个或多个 Sentinel 实例组成的 Sentinel 系统可以监视任意多个主服务器，以及这些主服务器属下的所有从服务器，并在被监视的主服务器进入下线状态时，自动将下线主服务器属下的某个从服务器升级为新的主服务器。</p><p>简单的说哨兵机制就是带有<strong>自动故障转移功能的主从架构</strong>，<strong>但是无法解决单节点并发压力、单节点内存和磁盘物理上限的问题</strong>。</p><p><strong>架构原理</strong>：</p><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627204422750.png" alt="" loading="lazy"></p><h3 id="_8-2-搭建哨兵架构" tabindex="-1"><a class="header-anchor" href="#_8-2-搭建哨兵架构" aria-hidden="true">#</a> 8.2 搭建哨兵架构</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 在主节点上创建哨兵配置
  在 Master 对应 redis.conf 同目录下新建 sentinel.conf 文件，名字绝对不能错

<span class="token list punctuation">2.</span> 配置哨兵，在 sentinel.conf 文件中填入内容：
  sentinel monitor 被监控数据库名字（自己起名字） ip port 1

<span class="token list punctuation">3.</span> 启动哨兵模式进行测试
  redis-sentinel  /root/sentinel/sentinel.conf
	
  说明：这个后面的数字 2,是指当有两个及以上的 sentinel 服务检测到 Master 宕机，才会去执行主从切换的功能
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_8-3-通过-springboot-操作哨兵" tabindex="-1"><a class="header-anchor" href="#_8-3-通过-springboot-操作哨兵" aria-hidden="true">#</a> 8.3 通过 SpringBoot 操作哨兵</h3><p>修改 <code>application.properties</code> 配置文件：</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># redis sentinel 配置</span>
<span class="token comment"># master书写是使用哨兵监听的那个名称</span>
<span class="token attr-name">spring.redis.sentinel.master</span><span class="token punctuation">=</span><span class="token attr-value">mymaster</span>
<span class="token comment"># 连接的不再是一个具体redis主机，书写的是多个哨兵节点</span>
<span class="token attr-name">spring.redis.sentinel.nodes</span><span class="token punctuation">=</span><span class="token attr-value">192.168.202.206:26379</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>注意：如果连接过程中出现如下错误 <code>RedisConnectionException: DENIED Redis is running in protected mode because protected mode is enabled, no bind address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the loopback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: 1) Just disable protected mode sending the command &#39;CONFIG SET protected-mode no&#39; from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet if you do so. Use CONFIG REWRITE to make this change permanent. 2)</code></strong></p><p><strong>解决方案：在哨兵的配置文件中加入 <code>bind 0.0.0.0</code> 开启远程连接权限</strong></p><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200629154647970.png" alt="" loading="lazy"></p><h2 id="_9-redis-集群" tabindex="-1"><a class="header-anchor" href="#_9-redis-集群" aria-hidden="true">#</a> 9. Redis 集群</h2><h3 id="_9-1-集群介绍" tabindex="-1"><a class="header-anchor" href="#_9-1-集群介绍" aria-hidden="true">#</a> 9.1 集群介绍</h3><p>Redis 在 3.0 后开始支持 <code>Cluster</code> 模式，目前 Redis 的集群支持节点的自动发现，支持 <code>slave-master</code> 选举和容错，支持在线分片(<code>sharding shard</code>)等特性。reshard</p><p><strong>集群架构图</strong>：</p><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/wpsgRnQP8.jpg" alt="" loading="lazy"></p><p><strong>集群细节</strong>：</p><ul><li>所有的 Redis 节点彼此互联(<code>PING-PONG</code> 机制)，内部使用二进制协议优化传输速度和带宽</li><li>节点的 fail 是通过集群中超过半数的节点检测失效时才生效</li><li>客户端与 Redis 节点直连，不需要中间 proxy 层，客户端不需要连接集群所有节点，连接集群中任何一个可用节点即可</li><li>redis-cluster 把所有的物理节点映射到[0-16383] slot 上，Cluster 负责维护 <code>node&lt;-&gt;slot&lt;-&gt;value</code></li></ul><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200629165226329.png" alt="" loading="lazy"></p><h3 id="_9-2-集群搭建" tabindex="-1"><a class="header-anchor" href="#_9-2-集群搭建" aria-hidden="true">#</a> 9.2 集群搭建</h3><p>判断一个是集群中的节点是否可用，是集群中的所用主节点选举过程，如果半数以上的节点认为当前节点挂掉，那么当前节点就是挂掉了，所以搭建 Redis 集群时建议节点数最好为奇数，<strong>搭建集群至少需要三个主节点，三个从节点，至少需要6个节点</strong>。</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 准备环境安装ruby以及redis集群依赖
  yum install -y ruby rubygems
  gem install redis-xxx.gem
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627193219366.png" alt="" loading="lazy"></p><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627193348905.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">2.</span> 在一台机器创建7个目录
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627193849867.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">3.</span> 每个目录复制一份配置文件
  cp redis-4.0.10/redis.conf 7000/
  cp redis-4.0.10/redis.conf 7001/
  cp redis-4.0.10/redis.conf 7002/
  cp redis-4.0.10/redis.conf 7003/
  cp redis-4.0.10/redis.conf 7004/
  cp redis-4.0.10/redis.conf 7005/
  cp redis-4.0.10/redis.conf 7006/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627194103354.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">4.</span> 修改不同目录配置文件
  <span class="token list punctuation">-</span> port 	6379 .....                		 //修改端口
  <span class="token list punctuation">-</span> bind  0.0.0.0                   		 //开启远程连接
  <span class="token list punctuation">-</span> cluster-enabled  yes 	        			 //开启集群模式
  <span class="token list punctuation">-</span> cluster-config-file  nodes-port.conf //集群节点配置文件
  <span class="token list punctuation">-</span> cluster-node-timeout  5000      	   //集群节点超时时间
  <span class="token list punctuation">-</span> appendonly  yes   		               //开启AOF持久化

<span class="token list punctuation">5.</span> 指定不同目录配置文件启动七个节点
  ./redis-server  /root/7000/redis.conf
  ./redis-server  /root/7001/redis.conf
  ./redis-server  /root/7002/redis.conf
  ./redis-server  /root/7003/redis.conf
  ./redis-server  /root/7004/redis.conf
  ./redis-server  /root/7005/redis.conf
  ./redis-server  /root/7006/redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627194913866.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">6.</span> 查看进程
  ps aux|grep redis
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627194954143.png" alt="" loading="lazy"></p><ol><li>创建集群</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 复制集群操作脚本到 bin 目录中
  cp /root/redis-4.0.10/src/redis-trib.rb .

<span class="token list punctuation">2.</span> 创建集群
  ./redis-trib.rb create --replicas 1 192.168.202.205:7000 192.168.202.205:7001 192.168.202.205:7002 192.168.202.205:7003 192.168.202.205:7004 192.168.202.205:7005
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627195601307.png" alt="" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">3.</span> 集群创建成功出现如下提示
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200627195647767.png" alt="" loading="lazy"></p><ol start="2"><li>查看集群状态</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 查看集群状态 check <span class="token url">[<span class="token content">原始集群中任意节点</span>] [<span class="token variable">无</span>]</span>
  ./redis-trib.rb check 192.168.202.205:7000

<span class="token list punctuation">2.</span> 集群节点状态说明
  <span class="token list punctuation">-</span> 主节点 
    主节点存在hash slots,且主节点的hash slots 没有交叉
    主节点不能删除
    一个主节点可以有多个从节点
    主节点宕机时多个副本之间自动选举主节点

  <span class="token list punctuation">-</span> 从节点
    从节点没有hash slots
    从节点可以删除
    从节点不负责数据的写，只负责数据的同步
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="3"><li>添加主节点</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 添加主节点 add-node <span class="token url">[<span class="token content">新加入节点</span>] [<span class="token variable">原始集群中任意节点</span>]</span>
  ./redis-trib.rb  add-node 192.168.1.158:7006  192.168.1.158:7005
  注意：
    1.该节点必须以集群模式启动
    2.默认情况下该节点就是以master节点形式添加
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="4"><li>添加从节点</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 添加从节点 add-node --slave <span class="token url">[<span class="token content">新加入节点</span>] [<span class="token variable">集群中任意节点</span>]</span>
  ./redis-trib.rb  add-node --slave 192.168.1.158:7006 192.168.1.158:7000
  注意：当添加副本节点时没有指定主节点，redis会随机给副本节点较少的主节点添加当前副本节点
	
<span class="token list punctuation">2.</span> 为确定的master节点添加主节点 add-node --slave --master-id master节点id <span class="token url">[<span class="token content">新加入节点</span>] [<span class="token variable">集群任意节点</span>]</span>
  ./redis-trib.rb  add-node --slave --master-id 3c3a0c74aae0b56170ccb03a76b60cfe7dc1912e 127.0.0.1:7006  127.0.0.1:7000
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="5"><li>删除副本节点</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 删除节点 del-node <span class="token url">[<span class="token content">集群中任意节点</span>] [<span class="token variable">删除节点id</span>]</span>
  ./redis-trib.rb  del-node 127.0.0.1:7002 0ca3f102ecf0c888fc7a7ce43a13e9be9f6d3dd1
  注意：被删除的节点必须是从节点或没有被分配 hash slots 的节点
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="6"><li>集群在线分片</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 在线分片 reshard <span class="token url">[<span class="token content">集群中任意节点</span>] [<span class="token variable">无</span>]</span>
  ./redis-trib.rb  reshard  192.168.1.158:7000
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr><h2 id="_10-redis-实现分布式-session-管理" tabindex="-1"><a class="header-anchor" href="#_10-redis-实现分布式-session-管理" aria-hidden="true">#</a> 10. Redis 实现分布式 Session 管理</h2><h3 id="_10-1-管理机制" tabindex="-1"><a class="header-anchor" href="#_10-1-管理机制" aria-hidden="true">#</a> 10.1 管理机制</h3><p><strong>Redis 的 Session 管理是利用 Spring 提供的 Session 管理解决方案，将一个应用 Session 交给 Redis 存储，整个应用中所有 Session 的请求都会去 Redis 中获取对应的 Session 数据</strong>。</p><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/middleware/NoSQL/01/image-20200628201643358.png" alt="" loading="lazy"></p><h3 id="_10-2-开发-session-管理" tabindex="-1"><a class="header-anchor" href="#_10-2-开发-session-管理" aria-hidden="true">#</a> 10.2 开发 Session 管理</h3><ol><li>引入依赖</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.session<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-session-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>开发 Session 管理配置类</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableRedisHttpSession</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisSessionManager</span> <span class="token punctuation">{</span>
   
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li>测试</li></ol><hr><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/chenyl8848/chenyl8848.github.io/edit/master/docs/middleware/noSQL/Redis.md" rel="noopener noreferrer" target="_blank" arialabel="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" arialabelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2024/10/14 03:34:11</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 1063415880@qq.com">chenyl8848</span>,<!--]--><!--[--><span class="contributor" title="email: 1063415880@qq.com">cyl</span><!--]--><!--]--></div></footer><!----><div class="giscus-wrapper input-top" style="display:block;"><giscus-widget repo="chenyl8848/chenyl8848.github.io" repoId="R_kgDOHJ-qSQ" category="Announcements" categoryId="DIC_kwDOHJ-qSc4COg8Z" lang="zh-CN" theme="light" mapping="pathname" inputPosition="top" reactionsEnabled="1" emitMetadata="0"></giscus-widget></div><!----></main><!--]--><footer class="footer-wrapper"><div class="footer">没有最好，只有更好！</div><div class="copyright">Copyright © 2025 Java陈序员</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.06d697e7.js" defer></script>
  </body>
</html>
