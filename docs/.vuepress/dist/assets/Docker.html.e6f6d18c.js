import{_ as p,r,c as o,a as n,b as e,F as l,d as s,f as t,o as c}from"./app.aaa460b9.js";const i={},d=n("h1",{id:"\u521D\u5B66docker",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u521D\u5B66docker","aria-hidden":"true"},"#"),s(" \u521D\u5B66Docker")],-1),u={href:"https://www.bilibili.com/video/BV1ZT4y1K75K?spm_id_from=333.999.0.0",target:"_blank",rel:"noopener noreferrer"},b=s("\u5B66\u4E60\u89C6\u9891\u3010\u7F16\u7A0B\u4E0D\u826F\u4EBA\u3011"),m={href:"https://www.docker.com/get-started",target:"_blank",rel:"noopener noreferrer"},k=s("\u5B98\u65B9\u6587\u6863\u5730\u5740"),h={href:"https://docker_practice.gitee.io/zh-cn/",target:"_blank",rel:"noopener noreferrer"},g=s("\u4E2D\u6587\u53C2\u8003\u624B\u518C"),v=t(`<hr><h2 id="_1-\u4EC0\u4E48\u662F-docker" tabindex="-1"><a class="header-anchor" href="#_1-\u4EC0\u4E48\u662F-docker" aria-hidden="true">#</a> 1.\u4EC0\u4E48\u662F Docker</h2><h3 id="_1-1-\u5B98\u65B9\u5B9A\u4E49" tabindex="-1"><a class="header-anchor" href="#_1-1-\u5B98\u65B9\u5B9A\u4E49" aria-hidden="true">#</a> 1.1 \u5B98\u65B9\u5B9A\u4E49</h3><ul><li>\u6700\u65B0\u5B98\u7F51\u9996\u9875</li></ul><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20201220213306128.png" alt="image-20201220213306128" loading="lazy"></p><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20201220214210994.png" alt="image-20201220214210994" loading="lazy"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u5B98\u65B9\u4ECB\u7ECD</span>
<span class="token list punctuation">-</span> We have a complete container solution for you - no matter who you are and where you are on your containerization journey.
<span class="token list punctuation">-</span> \u7FFB\u8BD1: \u6211\u4EEC\u4E3A\u4F60\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5B8C\u6574\u7684\u5BB9\u5668\u89E3\u51B3\u65B9\u6848,\u4E0D\u7BA1\u4F60\u662F\u8C01,\u4E0D\u7BA1\u4F60\u5728\u54EA,\u4F60\u90FD\u53EF\u4EE5\u5F00\u59CB\u5BB9\u5668\u7684\u7684\u65C5\u7A0B\u3002
<span class="token list punctuation">-</span> \u5B98\u65B9\u5B9A\u4E49: docker\u662F\u4E00\u4E2A\u5BB9\u5668\u6280\u672F\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_1-2-docker\u7684\u8D77\u6E90" tabindex="-1"><a class="header-anchor" href="#_1-2-docker\u7684\u8D77\u6E90" aria-hidden="true">#</a> 1.2 Docker\u7684\u8D77\u6E90</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Docker \u6700\u521D\u662F dotCloud \u516C\u53F8\u521B\u59CB\u4EBA Solomon Hykes \u5728\u6CD5\u56FD\u671F\u95F4\u53D1\u8D77\u7684\u4E00\u4E2A\u516C\u53F8\u5185\u90E8\u9879\u76EE\uFF0C\u5B83\u662F\u57FA\u4E8E dotCloud \u516C\u53F8\u591A\u5E74\u4E91\u670D\u52A1\u6280\u672F\u7684\u4E00\u6B21\u9769\u65B0\uFF0C\u5E76\u4E8E 2013 \u5E74 3 \u6708\u4EE5 Apache 2.0 \u6388\u6743\u534F\u8BAE\u5F00\u6E90\uFF0C\u4E3B\u8981\u9879\u76EE\u4EE3\u7801\u5728 GitHub \u4E0A\u8FDB\u884C\u7EF4\u62A4\u3002Docker \u9879\u76EE\u540E\u6765\u8FD8\u52A0\u5165\u4E86 Linux \u57FA\u91D1\u4F1A\uFF0C\u5E76\u6210\u7ACB\u63A8\u52A8 \u5F00\u653E\u5BB9\u5668\u8054\u76DF\uFF08OCI\uFF09\u3002

Docker \u81EA\u5F00\u6E90\u540E\u53D7\u5230\u5E7F\u6CDB\u7684\u5173\u6CE8\u548C\u8BA8\u8BBA\uFF0C\u81F3\u4ECA\u5176 GitHub \u9879\u76EE \u5DF2\u7ECF\u8D85\u8FC7 5 \u4E07 7 \u5343\u4E2A\u661F\u6807\u548C\u4E00\u4E07\u591A\u4E2A fork\u3002\u751A\u81F3\u7531\u4E8E Docker \u9879\u76EE\u7684\u706B\u7206\uFF0C\u5728 2013 \u5E74\u5E95\uFF0CdotCloud \u516C\u53F8\u51B3\u5B9A\u6539\u540D\u4E3A Docker\u3002Docker \u6700\u521D\u662F\u5728 Ubuntu 12.04 \u4E0A\u5F00\u53D1\u5B9E\u73B0\u7684\uFF1BRed Hat \u5219\u4ECE RHEL 6.5 \u5F00\u59CB\u5BF9 Docker \u8FDB\u884C\u652F\u6301\uFF1BGoogle \u4E5F\u5728\u5176 PaaS \u4EA7\u54C1\u4E2D\u5E7F\u6CDB\u5E94\u7528 Docker\u3002

Docker \u4F7F\u7528 Google \u516C\u53F8\u63A8\u51FA\u7684 Go \u8BED\u8A00 \u8FDB\u884C\u5F00\u53D1\u5B9E\u73B0\uFF0C\u57FA\u4E8E Linux \u5185\u6838\u7684 cgroup\uFF0Cnamespace\uFF0C\u4EE5\u53CA OverlayFS \u7C7B\u7684 Union FS \u7B49\u6280\u672F\uFF0C\u5BF9\u8FDB\u7A0B\u8FDB\u884C\u5C01\u88C5\u9694\u79BB\uFF0C\u5C5E\u4E8E\u64CD\u4F5C\u7CFB\u7EDF\u5C42\u9762\u7684\u865A\u62DF\u5316\u6280\u672F\u3002\u7531\u4E8E\u9694\u79BB\u7684\u8FDB\u7A0B\u72EC\u7ACB\u4E8E\u5BBF\u4E3B\u548C\u5176\u5B83\u7684\u9694\u79BB\u7684\u8FDB\u7A0B\uFF0C\u56E0\u6B64\u4E5F\u79F0\u5176\u4E3A\u5BB9\u5668\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_2-\u4E3A\u4EC0\u4E48\u662Fdocker" tabindex="-1"><a class="header-anchor" href="#_2-\u4E3A\u4EC0\u4E48\u662Fdocker" aria-hidden="true">#</a> 2.\u4E3A\u4EC0\u4E48\u662FDocker</h2><ul><li><p><code>\u5728\u5F00\u53D1\u7684\u65F6\u5019\uFF0C\u5728\u672C\u673A\u6D4B\u8BD5\u73AF\u5883\u53EF\u4EE5\u8DD1\uFF0C\u751F\u4EA7\u73AF\u5883\u8DD1\u4E0D\u8D77\u6765</code></p><p>\u8FD9\u91CC\u6211\u4EEC\u62FFjava Web\u5E94\u7528\u7A0B\u5E8F\u4E3E\u4F8B\uFF0C\u6211\u4EEC\u4E00\u4E2Ajava Web\u5E94\u7528\u7A0B\u5E8F\u6D89\u53CA\u5F88\u591A\u4E1C\u897F\uFF0C\u6BD4\u5982jdk\u3001tomcat\u3001mysql\u7B49\u8F6F\u4EF6\u73AF\u5883\u3002\u5F53\u8FD9\u4E9B\u5176\u4E2D\u67D0\u4E00\u9879\u7248\u672C\u4E0D\u4E00\u81F4\u7684\u65F6\u5019\uFF0C\u53EF\u80FD\u5C31\u4F1A\u5BFC\u81F4\u5E94\u7528\u7A0B\u5E8F\u8DD1\u4E0D\u8D77\u6765\u8FD9\u79CD\u60C5\u51B5\u3002Docker\u5219\u5C06\u7A0B\u5E8F\u4EE5\u53CA\u4F7F\u7528\u8F6F\u4EF6\u73AF\u5883\u76F4\u63A5\u6253\u5305\u5728\u4E00\u8D77\uFF0C\u65E0\u8BBA\u5728\u90A3\u4E2A\u673A\u5668\u4E0A\u4FDD\u8BC1\u4E86\u73AF\u5883\u4E00\u81F4\u3002</p><p><strong>\u4F18\u52BF1: \u4E00\u81F4\u7684\u8FD0\u884C\u73AF\u5883,\u66F4\u8F7B\u677E\u7684\u8FC1\u79FB</strong></p></li><li><p><code>\u670D\u52A1\u5668\u81EA\u5DF1\u7684\u7A0B\u5E8F\u6302\u4E86\uFF0C\u7ED3\u679C\u53D1\u73B0\u662F\u522B\u4EBA\u7A0B\u5E8F\u51FA\u4E86\u95EE\u9898\u628A\u5185\u5B58\u5403\u5B8C\u4E86\uFF0C\u81EA\u5DF1\u7A0B\u5E8F\u56E0\u4E3A\u5185\u5B58\u4E0D\u591F\u5C31\u6302\u4E86</code></p><p>\u8FD9\u79CD\u4E5F\u662F\u4E00\u79CD\u6BD4\u8F83\u5E38\u89C1\u7684\u60C5\u51B5\uFF0C\u5982\u679C\u4F60\u7684\u7A0B\u5E8F\u91CD\u8981\u6027\u4E0D\u662F\u7279\u522B\u9AD8\u7684\u8BDD\uFF0C\u516C\u53F8\u57FA\u672C\u4E0A\u4E0D\u53EF\u80FD\u8BA9\u4F60\u7684\u7A0B\u5E8F\u72EC\u4EAB\u4E00\u53F0\u670D\u52A1\u5668\u7684\uFF0C\u8FD9\u65F6\u5019\u4F60\u7684\u670D\u52A1\u5668\u5C31\u4F1A\u8DDF\u516C\u53F8\u5176\u4ED6\u4EBA\u7684\u7A0B\u5E8F\u5171\u4EAB\u4E00\u53F0\u670D\u52A1\u5668\uFF0C\u6240\u4EE5\u4E0D\u53EF\u907F\u514D\u5730\u5C31\u4F1A\u53D7\u5230\u5176\u4ED6\u7A0B\u5E8F\u7684\u5E72\u6270\uFF0C\u5BFC\u81F4\u81EA\u5DF1\u7684\u7A0B\u5E8F\u51FA\u73B0\u95EE\u9898\u3002Docker\u5C31\u5F88\u597D\u89E3\u51B3\u4E86\u73AF\u5883\u9694\u79BB\u7684\u95EE\u9898\uFF0C\u522B\u4EBA\u7A0B\u5E8F\u4E0D\u4F1A\u5F71\u54CD\u5230\u81EA\u5DF1\u7684\u7A0B\u5E8F\u3002</p><p><strong>\u4F18\u52BF2\uFF1A\u5BF9\u8FDB\u7A0B\u8FDB\u884C\u5C01\u88C5\u9694\u79BB,\u5BB9\u5668\u4E0E\u5BB9\u5668\u4E4B\u95F4\u4E92\u4E0D\u5F71\u54CD,\u66F4\u9AD8\u6548\u7684\u5229\u7528\u7CFB\u7EDF\u8D44\u6E90</strong></p></li><li><p><code>\u516C\u53F8\u8981\u5F04\u4E00\u4E2A\u6D3B\u52A8\uFF0C\u53EF\u80FD\u4F1A\u6709\u5927\u91CF\u7684\u6D41\u91CF\u8FDB\u6765\uFF0C\u516C\u53F8\u9700\u8981\u518D\u591A\u90E8\u7F72\u51E0\u5341\u53F0\u670D\u52A1\u5668</code></p><p>\u5728\u6CA1\u6709Docker\u7684\u60C5\u51B5\u4E0B\uFF0C\u8981\u5728\u51E0\u5929\u5185\u90E8\u7F72\u51E0\u5341\u53F0\u670D\u52A1\u5668\uFF0C\u8FD9\u5BF9\u8FD0\u7EF4\u6765\u8BF4\u662F\u4E00\u4EF6\u975E\u5E38\u6298\u78E8\u4EBA\u7684\u4E8B\uFF0C\u800C\u4E14\u6BCF\u53F0\u670D\u52A1\u5668\u7684\u73AF\u5883\u8FD8\u4E0D\u4E00\u5B9A\u4E00\u6837\uFF0C\u5C31\u4F1A\u51FA\u73B0\u5404\u79CD\u95EE\u9898\uFF0C\u6700\u540E\u90E8\u7F72\u5730\u5934\u76AE\u53D1\u9EBB\u3002\u7528Docker\u7684\u8BDD\uFF0C\u6211\u53EA\u9700\u8981\u5C06\u7A0B\u5E8F\u6253\u5305\u5230\u955C\u50CF\uFF0C\u4F60\u8981\u591A\u5C11\u53F0\u670D\u52A1\uFF0C\u6211\u5C31\u7ED9\u529B\u8DD1\u591A\u5C11\u5BB9\u5668\uFF0C\u6781\u5927\u5730\u63D0\u9AD8\u4E86\u90E8\u7F72\u6548\u7387\u3002</p><p><strong>\u4F18\u52BF3: \u901A\u8FC7\u955C\u50CF\u590D\u5236N\u591A\u4E2A\u73AF\u5883\u4E00\u81F4\u5BB9\u5668</strong></p></li></ul><hr><h2 id="_3-docker\u548C\u865A\u62DF\u673A\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_3-docker\u548C\u865A\u62DF\u673A\u533A\u522B" aria-hidden="true">#</a> 3.Docker\u548C\u865A\u62DF\u673A\u533A\u522B</h2><blockquote><p>\u5173\u4E8EDocker\u4E0E\u865A\u62DF\u673A\u7684\u533A\u522B\uFF0C\u6211\u5728\u7F51\u4E0A\u627E\u5230\u7684\u4E00\u5F20\u56FE\uFF0C\u975E\u5E38\u76F4\u89C2\u5F62\u8C61\u5730\u5C55\u793A\u51FA\u6765\uFF0C\u8BDD\u4E0D\u591A\u8BF4\uFF0C\u76F4\u63A5\u4E0A\u56FE\u3002</p></blockquote><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20201220222456675.png" alt="image-20201220222456675" loading="lazy"></p><p><code>\u6BD4\u8F83\u4E0A\u9762\u4E24\u5F20\u56FE\uFF0C\u6211\u4EEC\u53D1\u73B0\u865A\u62DF\u673A\u662F\u643A\u5E26\u64CD\u4F5C\u7CFB\u7EDF\uFF0C\u672C\u8EAB\u5F88\u5C0F\u7684\u5E94\u7528\u7A0B\u5E8F\u5374\u56E0\u4E3A\u643A\u5E26\u4E86\u64CD\u4F5C\u7CFB\u7EDF\u800C\u53D8\u5F97\u975E\u5E38\u5927\uFF0C\u5F88\u7B28\u91CD</code>\u3002Docker\u662F\u4E0D\u643A\u5E26\u64CD\u4F5C\u7CFB\u7EDF\u7684\uFF0C\u6240\u4EE5Docker\u7684\u5E94\u7528\u5C31\u975E\u5E38\u7684\u8F7B\u5DE7\u3002\u53E6\u5916\u5728\u8C03\u7528\u5BBF\u4E3B\u673A\u7684CPU\u3001\u78C1\u76D8\u7B49\u7B49\u8FD9\u4E9B\u8D44\u6E90\u7684\u65F6\u5019\uFF0C\u62FF\u5185\u5B58\u4E3E\u4F8B\uFF0C\u865A\u62DF\u673A\u662F\u5229\u7528Hypervisor\u53BB\u865A\u62DF\u5316\u5185\u5B58\uFF0C\u6574\u4E2A\u8C03\u7528\u8FC7\u7A0B\u662F\u865A\u62DF\u5185\u5B58-&gt;\u865A\u62DF\u7269\u7406\u5185\u5B58-&gt;\u771F\u6B63\u7269\u7406\u5185\u5B58\uFF0C\u4F46\u662FDocker\u662F\u5229\u7528Docker Engine\u53BB\u8C03\u7528\u5BBF\u4E3B\u7684\u7684\u8D44\u6E90\uFF0C\u8FD9\u65F6\u5019\u8FC7\u7A0B\u662F\u865A\u62DF\u5185\u5B58-&gt;\u771F\u6B63\u7269\u7406\u5185\u5B58\u3002</p><table><thead><tr><th></th><th>\u4F20\u7EDF\u865A\u62DF\u673A</th><th>Docker\u5BB9\u5668</th></tr></thead><tbody><tr><td>\u78C1\u76D8\u5360\u7528</td><td>\u51E0\u4E2AGB\u5230\u51E0\u5341\u4E2AGB\u5DE6\u53F3</td><td>\u51E0\u5341MB\u5230\u51E0\u767EMB\u5DE6\u53F3</td></tr><tr><td>CPU\u5185\u5B58\u5360\u7528</td><td>\u865A\u62DF\u64CD\u4F5C\u7CFB\u7EDF\u975E\u5E38\u5360\u7528CPU\u548C\u5185\u5B58</td><td>Docker\u5F15\u64CE\u5360\u7528\u6781\u4F4E</td></tr><tr><td>\u542F\u52A8\u901F\u5EA6</td><td>\uFF08\u4ECE\u5F00\u673A\u5230\u8FD0\u884C\u9879\u76EE\uFF09\u51E0\u5206\u949F</td><td>\uFF08\u4ECE\u5F00\u542F\u5BB9\u5668\u5230\u8FD0\u884C\u9879\u76EE\uFF09\u51E0\u79D2</td></tr><tr><td>\u5B89\u88C5\u7BA1\u7406</td><td>\u9700\u8981\u4E13\u95E8\u7684\u8FD0\u7EF4\u6280\u672F</td><td>\u5B89\u88C5\u3001\u7BA1\u7406\u65B9\u4FBF</td></tr><tr><td>\u5E94\u7528\u90E8\u7F72</td><td>\u6BCF\u6B21\u90E8\u7F72\u90FD\u8D39\u65F6\u8D39\u529B</td><td>\u4ECE\u7B2C\u4E8C\u6B21\u90E8\u7F72\u5F00\u59CB\u8F7B\u677E\u7B80\u6377</td></tr><tr><td>\u8026\u5408\u6027</td><td>\u591A\u4E2A\u5E94\u7528\u670D\u52A1\u5B89\u88C5\u5230\u4E00\u8D77\uFF0C\u5BB9\u6613\u4E92\u76F8\u5F71\u54CD</td><td>\u6BCF\u4E2A\u5E94\u7528\u670D\u52A1\u4E00\u4E2A\u5BB9\u5668\uFF0C\u8FBE\u6210\u9694\u79BB</td></tr><tr><td>\u7CFB\u7EDF\u4F9D\u8D56</td><td>\u65E0</td><td>\u9700\u6C42\u76F8\u540C\u6216\u76F8\u4F3C\u7684\u5185\u6838\uFF0C\u76EE\u524D\u63A8\u8350\u662FLinux</td></tr></tbody></table><hr><h2 id="_4-docker\u7684\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_4-docker\u7684\u5B89\u88C5" aria-hidden="true">#</a> 4.Docker\u7684\u5B89\u88C5</h2><h3 id="_4-1-\u5B89\u88C5docker-centos7-x" tabindex="-1"><a class="header-anchor" href="#_4-1-\u5B89\u88C5docker-centos7-x" aria-hidden="true">#</a> 4.1 \u5B89\u88C5docker(centos7.x)</h3><ul><li><p>\u5378\u8F7D\u539F\u59CBdocker</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\\</span>
                  docker-client <span class="token punctuation">\\</span>
                  docker-client-latest <span class="token punctuation">\\</span>
                  docker-common <span class="token punctuation">\\</span>
                  docker-latest <span class="token punctuation">\\</span>
                  docker-latest-logrotate <span class="token punctuation">\\</span>
                  docker-logrotate <span class="token punctuation">\\</span>
                  docker-engine
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p>\u5B89\u88C5docker\u4F9D\u8D56</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils <span class="token punctuation">\\</span>
  device-mapper-persistent-data <span class="token punctuation">\\</span>
  lvm2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>\u8BBE\u7F6Edocker\u7684yum\u6E90</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\\</span>
    --add-repo <span class="token punctuation">\\</span>
    https://download.docker.com/linux/centos/docker-ce.repo
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>\u5B89\u88C5\u6700\u65B0\u7248\u7684docker</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u6307\u5B9A\u7248\u672C\u5B89\u88C5docker</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ yum list docker-ce --showduplicates <span class="token operator">|</span> <span class="token function">sort</span> -r
$ <span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce-<span class="token operator">&lt;</span>VERSION_STRING<span class="token operator">&gt;</span> docker-ce-cli-<span class="token operator">&lt;</span>VERSION_STRING<span class="token operator">&gt;</span> containerd.io
$ <span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce-18.09.5-3.el7 docker-ce-cli-18.09.5-3.el7 containerd.io
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>\u542F\u52A8docker</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
$ <span class="token function">sudo</span> systemctl start <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>\u5173\u95EDdocker</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> systemctl stop <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u6D4B\u8BD5docker\u5B89\u88C5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">docker</span> run hello-world
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h3 id="_4-2-bash\u5B89\u88C5-\u901A\u7528\u6240\u6709\u5E73\u53F0" tabindex="-1"><a class="header-anchor" href="#_4-2-bash\u5B89\u88C5-\u901A\u7528\u6240\u6709\u5E73\u53F0" aria-hidden="true">#</a> 4.2 bash\u5B89\u88C5(\u901A\u7528\u6240\u6709\u5E73\u53F0)</h3><ul><li><p>\u5728\u6D4B\u8BD5\u6216\u5F00\u53D1\u73AF\u5883\u4E2D Docker \u5B98\u65B9\u4E3A\u4E86\u7B80\u5316\u5B89\u88C5\u6D41\u7A0B\uFF0C\u63D0\u4F9B\u4E86\u4E00\u5957\u4FBF\u6377\u7684\u5B89\u88C5\u811A\u672C\uFF0CCentOS \u7CFB\u7EDF\u4E0A\u53EF\u4EE5\u4F7F\u7528\u8FD9\u5957\u811A\u672C\u5B89\u88C5\uFF0C\u53E6\u5916\u53EF\u4EE5\u901A\u8FC7 <code>--mirror</code> \u9009\u9879\u4F7F\u7528\u56FD\u5185\u6E90\u8FDB\u884C\u5B89\u88C5\uFF1A\u6267\u884C\u8FD9\u4E2A\u547D\u4EE4\u540E\uFF0C\u811A\u672C\u5C31\u4F1A\u81EA\u52A8\u7684\u5C06\u4E00\u5207\u51C6\u5907\u5DE5\u4F5C\u505A\u597D\uFF0C\u5E76\u4E14\u628A Docker \u7684\u7A33\u5B9A(stable)\u7248\u672C\u5B89\u88C5\u5728\u7CFB\u7EDF\u4E2D\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -fsSL get.docker.com -o get-docker.sh
$ <span class="token function">sudo</span> <span class="token function">sh</span> get-docker.sh --mirror Aliyun
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>\u542F\u52A8docker</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
$ <span class="token function">sudo</span> systemctl start <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>\u521B\u5EFAdocker\u7528\u6237\u7EC4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">groupadd</span> <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u5C06\u5F53\u524D\u7528\u6237\u52A0\u5165docker\u7EC4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">usermod</span> -aG <span class="token function">docker</span> <span class="token environment constant">$USER</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>\u6D4B\u8BD5docker\u5B89\u88C5\u662F\u5426\u6B63\u786E</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">docker</span> run hello-world
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h2 id="_5-docker-\u7684\u6838\u5FC3\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#_5-docker-\u7684\u6838\u5FC3\u67B6\u6784" aria-hidden="true">#</a> 5.Docker \u7684\u6838\u5FC3\u67B6\u6784</h2><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20200404111908085-0291323.png" alt="image-20200404111908085" loading="lazy"></p><ul><li><code>\u955C\u50CF:</code> \u4E00\u4E2A\u955C\u50CF\u4EE3\u8868\u4E00\u4E2A\u5E94\u7528\u73AF\u5883,\u4ED6\u662F\u4E00\u4E2A\u53EA\u8BFB\u7684\u6587\u4EF6,\u5982 mysql\u955C\u50CF,tomcat\u955C\u50CF,nginx\u955C\u50CF\u7B49</li><li><code>\u5BB9\u5668:</code> \u955C\u50CF\u6BCF\u6B21\u8FD0\u884C\u4E4B\u540E\u5C31\u662F\u4EA7\u751F\u4E00\u4E2A\u5BB9\u5668,\u5C31\u662F\u6B63\u5728\u8FD0\u884C\u7684\u955C\u50CF,\u7279\u70B9\u5C31\u662F\u53EF\u8BFB\u53EF\u5199</li><li><code>\u4ED3\u5E93:</code>\u7528\u6765\u5B58\u653E\u955C\u50CF\u7684\u4F4D\u7F6E,\u7C7B\u4F3C\u4E8Emaven\u4ED3\u5E93,\u4E5F\u662F\u955C\u50CF\u4E0B\u8F7D\u548C\u4E0A\u4F20\u7684\u4F4D\u7F6E</li><li><code>dockerFile:</code>docker\u751F\u6210\u955C\u50CF\u914D\u7F6E\u6587\u4EF6,\u7528\u6765\u4E66\u5199\u81EA\u5B9A\u4E49\u955C\u50CF\u7684\u4E00\u4E9B\u914D\u7F6E</li><li><code>tar:</code>\u4E00\u4E2A\u5BF9\u955C\u50CF\u6253\u5305\u7684\u6587\u4EF6,\u65E5\u540E\u53EF\u4EE5\u8FD8\u539F\u6210\u955C\u50CF</li></ul><h2 id="_6-docker-\u914D\u7F6E\u963F\u91CC\u955C\u50CF\u52A0\u901F\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#_6-docker-\u914D\u7F6E\u963F\u91CC\u955C\u50CF\u52A0\u901F\u670D\u52A1" aria-hidden="true">#</a> 6. Docker \u914D\u7F6E\u963F\u91CC\u955C\u50CF\u52A0\u901F\u670D\u52A1</h2><h3 id="_6-1-docker-\u8FD0\u884C\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#_6-1-docker-\u8FD0\u884C\u6D41\u7A0B" aria-hidden="true">#</a> 6.1 docker \u8FD0\u884C\u6D41\u7A0B</h3><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20200404120356784.png" alt="image-20200404120356784" loading="lazy"></p><h3 id="_6-2-docker\u914D\u7F6E\u963F\u91CC\u4E91\u955C\u50CF\u52A0\u901F" tabindex="-1"><a class="header-anchor" href="#_6-2-docker\u914D\u7F6E\u963F\u91CC\u4E91\u955C\u50CF\u52A0\u901F" aria-hidden="true">#</a> 6.2 docker\u914D\u7F6E\u963F\u91CC\u4E91\u955C\u50CF\u52A0\u901F</h3><ul><li><code>\u8BBF\u95EE\u963F\u91CC\u4E91\u767B\u5F55\u81EA\u5DF1\u8D26\u53F7\u67E5\u770Bdocker\u955C\u50CF\u52A0\u901F\u670D\u52A1</code></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /etc/docker
<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">&#39;EOF&#39;
{
  &quot;registry-mirrors&quot;: [&quot;https://lz2nib3q.mirror.aliyuncs.com&quot;]
}
EOF</span>
<span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><code>\u9A8C\u8BC1docker\u7684\u955C\u50CF\u52A0\u901F\u662F\u5426\u751F\u6548</code></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker info</span>
		<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
    <span class="token number">127.0</span>.0.0/8
   Registry Mirrors:
    <span class="token string">&#39;https://lz2nib3q.mirror.aliyuncs.com/&#39;</span>
   Live Restore Enabled: <span class="token boolean">false</span>
   Product License: Community Engine
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><h2 id="_7-docker\u7684\u5165\u95E8\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#_7-docker\u7684\u5165\u95E8\u5E94\u7528" aria-hidden="true">#</a> 7.Docker\u7684\u5165\u95E8\u5E94\u7528</h2><h3 id="_7-1-docker-\u7684\u7B2C\u4E00\u4E2A\u7A0B\u5E8F" tabindex="-1"><a class="header-anchor" href="#_7-1-docker-\u7684\u7B2C\u4E00\u4E2A\u7A0B\u5E8F" aria-hidden="true">#</a> 7.1 docker \u7684\u7B2C\u4E00\u4E2A\u7A0B\u5E8F</h3><blockquote><p>docker run hello-world</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run hello-world</span>

Hello from Docker<span class="token operator">!</span>
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 <span class="token number">1</span>. The Docker client contacted the Docker daemon.
 <span class="token number">2</span>. The Docker daemon pulled the <span class="token string">&quot;hello-world&quot;</span> image from the Docker Hub.
    <span class="token punctuation">(</span>amd64<span class="token punctuation">)</span>
 <span class="token number">3</span>. The Docker daemon created a new container from that image <span class="token function">which</span> runs the
    executable that produces the output you are currently reading.
 <span class="token number">4</span>. The Docker daemon streamed that output to the Docker client, <span class="token function">which</span> sent it
    to your terminal.

To try something <span class="token function">more</span> ambitious, you can run an Ubuntu container with:
 $ <span class="token function">docker</span> run -it ubuntu <span class="token function">bash</span>

Share images, automate workflows, and <span class="token function">more</span> with a <span class="token function">free</span> Docker ID:
 https://hub.docker.com/

For <span class="token function">more</span> examples and ideas, visit:
 https://docs.docker.com/get-started/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><hr><h2 id="_8-\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_8-\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> 8.\u5E38\u7528\u547D\u4EE4</h2><h3 id="_6-1-\u8F85\u52A9\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_6-1-\u8F85\u52A9\u547D\u4EE4" aria-hidden="true">#</a> 6.1 \u8F85\u52A9\u547D\u4EE4</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u5B89\u88C5\u5B8C\u6210\u8F85\u52A9\u547D\u4EE4</span>
		docker version	--------------------------	\u67E5\u770Bdocker\u7684\u4FE1\u606F
		docker info		--------------------------	\u67E5\u770B\u66F4\u8BE6\u7EC6\u7684\u4FE1\u606F
		docker --help	--------------------------	\u5E2E\u52A9\u547D\u4EE4
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_6-2-images-\u955C\u50CF\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_6-2-images-\u955C\u50CF\u547D\u4EE4" aria-hidden="true">#</a> 6.2 Images \u955C\u50CF\u547D\u4EE4</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u67E5\u770B\u672C\u673A\u4E2D\u6240\u6709\u955C\u50CF</span>
	docker images	--------------------------	\u5217\u51FA\u672C\u5730\u6240\u6709\u955C\u50CF
		-a			\u5217\u51FA\u6240\u6709\u955C\u50CF\uFF08\u5305\u542B\u4E2D\u95F4\u6620\u50CF\u5C42\uFF09
  	-q			\u53EA\u663E\u793A\u955C\u50CFid

<span class="token title important"><span class="token punctuation">#</span> 2.\u641C\u7D22\u955C\u50CF</span>
	docker search [options] \u955C\u50CF\u540D	-------------------	\u53BBdockerhub\u4E0A\u67E5\u8BE2\u5F53\u524D\u955C\u50CF
		-s \u6307\u5B9A\u503C		\u5217\u51FA\u6536\u85CF\u6570\u4E0D\u5C11\u4E8E\u6307\u5B9A\u503C\u7684\u955C\u50CF
  	--no-trunc	  \u663E\u793A\u5B8C\u6574\u7684\u955C\u50CF\u4FE1\u606F

<span class="token title important"><span class="token punctuation">#</span> 3.\u4ECE\u4ED3\u5E93\u4E0B\u8F7D\u955C\u50CF</span>
	docker pull \u955C\u50CF\u540D[:TAG|@DIGEST]	----------------- \u4E0B\u8F7D\u955C\u50CF

<span class="token title important"><span class="token punctuation">#</span> 4.\u5220\u9664\u955C\u50CF</span>
	docker rmi \u955C\u50CF\u540D	--------------------------  \u5220\u9664\u955C\u50CF
		-f		\u5F3A\u5236\u5220\u9664
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_6-3-contrainer-\u5BB9\u5668\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_6-3-contrainer-\u5BB9\u5668\u547D\u4EE4" aria-hidden="true">#</a> 6.3 Contrainer \u5BB9\u5668\u547D\u4EE4</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u8FD0\u884C\u5BB9\u5668</span>
	docker run \u955C\u50CF\u540D	--------------------------	\u955C\u50CF\u540D\u65B0\u5EFA\u5E76\u542F\u52A8\u5BB9\u5668
    --name 					\u522B\u540D\u4E3A\u5BB9\u5668\u8D77\u4E00\u4E2A\u540D\u5B57
    -d							\u542F\u52A8\u5B88\u62A4\u5F0F\u5BB9\u5668\uFF08\u5728\u540E\u53F0\u542F\u52A8\u5BB9\u5668\uFF09
    -p 							\u6620\u5C04\u7AEF\u53E3\u53F7\uFF1A\u539F\u59CB\u7AEF\u53E3\u53F7		 \u6307\u5B9A\u7AEF\u53E3\u53F7\u542F\u52A8

<span class="token code keyword">	\u4F8B\uFF1Adocker run -it --name myTomcat -p 8888:8080 tomcat</span>
   	 docker run -d --name myTomcat -P tomcat

<span class="token title important"><span class="token punctuation">#</span> 2.\u67E5\u770B\u8FD0\u884C\u7684\u5BB9\u5668</span>
	docker ps					--------------------------	\u5217\u51FA\u6240\u6709\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668
	-a			\u6B63\u5728\u8FD0\u884C\u7684\u548C\u5386\u53F2\u8FD0\u884C\u8FC7\u7684\u5BB9\u5668
	-q			\u9759\u9ED8\u6A21\u5F0F\uFF0C\u53EA\u663E\u793A\u5BB9\u5668\u7F16\u53F7

<span class="token title important"><span class="token punctuation">#</span> 3.\u505C\u6B62|\u5173\u95ED|\u91CD\u542F\u5BB9\u5668</span>
	docker start   \u5BB9\u5668\u540D\u5B57\u6216\u8005\u5BB9\u5668id  --------------- \u5F00\u542F\u5BB9\u5668
	docker restart \u5BB9\u5668\u540D\u6216\u8005\u5BB9\u5668id    --------------- \u91CD\u542F\u5BB9\u5668
	docker stop  \u5BB9\u5668\u540D\u6216\u8005\u5BB9\u5668id 	    ------------------ \u6B63\u5E38\u505C\u6B62\u5BB9\u5668\u8FD0\u884C
	docker kill  \u5BB9\u5668\u540D\u6216\u8005\u5BB9\u5668id      ------------------ \u7ACB\u5373\u505C\u6B62\u5BB9\u5668\u8FD0\u884C

<span class="token title important"><span class="token punctuation">#</span> 4.\u5220\u9664\u5BB9\u5668</span>
	docker rm -f \u5BB9\u5668id\u548C\u5BB9\u5668\u540D     
	docker rm -f $(docker ps -aq)		--------------------------	\u5220\u9664\u6240\u6709\u5BB9\u5668

<span class="token title important"><span class="token punctuation">#</span> 5.\u67E5\u770B\u5BB9\u5668\u5185\u8FDB\u7A0B</span>
	docker top \u5BB9\u5668id\u6216\u8005\u5BB9\u5668\u540D ------------------ \u67E5\u770B\u5BB9\u5668\u5185\u7684\u8FDB\u7A0B

<span class="token title important"><span class="token punctuation">#</span> 6.\u67E5\u770B\u67E5\u770B\u5BB9\u5668\u5185\u90E8\u7EC6\u8282</span>
	docker inspect \u5BB9\u5668id 		------------------ \u67E5\u770B\u5BB9\u5668\u5185\u90E8\u7EC6\u8282

<span class="token title important"><span class="token punctuation">#</span> 7.\u67E5\u770B\u5BB9\u5668\u7684\u8FD0\u884C\u65E5\u5FD7</span>
	docker logs [OPTIONS] \u5BB9\u5668id\u6216\u5BB9\u5668\u540D	------------------ \u67E5\u770B\u5BB9\u5668\u65E5\u5FD7
    -t			 \u52A0\u5165\u65F6\u95F4\u6233
    -f			 \u8DDF\u968F\u6700\u65B0\u7684\u65E5\u5FD7\u6253\u5370
    --tail 	 \u6570\u5B57	\u663E\u793A\u6700\u540E\u591A\u5C11\u6761

<span class="token title important"><span class="token punctuation">#</span> 8.\u8FDB\u5165\u5BB9\u5668\u5185\u90E8</span>
	docker exec [options] \u5BB9\u5668id \u5BB9\u5668\u5185\u547D\u4EE4 ------------------ \u8FDB\u5165\u5BB9\u5668\u6267\u884C\u547D\u4EE4
		-i		\u4EE5\u4EA4\u4E92\u6A21\u5F0F\u8FD0\u884C\u5BB9\u5668\uFF0C\u901A\u5E38\u4E0E-t\u4E00\u8D77\u4F7F\u7528
    -t		\u5206\u914D\u4E00\u4E2A\u4F2A\u7EC8\u7AEF    shell\u7A97\u53E3   bash 

<span class="token title important"><span class="token punctuation">#</span> 9.\u5BB9\u5668\u548C\u5BBF\u4E3B\u673A\u4E4B\u95F4\u590D\u5236\u6587\u4EF6</span>
	docker cp \u6587\u4EF6|\u76EE\u5F55 \u5BB9\u5668id:\u5BB9\u5668\u8DEF\u5F84           -----------------   \u5C06\u5BBF\u4E3B\u673A\u590D\u5236\u5230\u5BB9\u5668\u5185\u90E8
	docker cp \u5BB9\u5668id:\u5BB9\u5668\u5185\u8D44\u6E90\u8DEF\u5F84 \u5BBF\u4E3B\u673A\u76EE\u5F55\u8DEF\u5F84  -----------------   \u5C06\u5BB9\u5668\u5185\u8D44\u6E90\u62F7\u8D1D\u5230\u4E3B\u673A\u4E0A

<span class="token title important"><span class="token punctuation">#</span> 10.\u6570\u636E\u5377(volum)\u5B9E\u73B0\u4E0E\u5BBF\u4E3B\u673A\u5171\u4EAB\u76EE\u5F55</span>
	docker run -v \u5BBF\u4E3B\u673A\u7684\u8DEF\u5F84|\u4EFB\u610F\u522B\u540D:/\u5BB9\u5668\u5185\u7684\u8DEF\u5F84 \u955C\u50CF\u540D
		\u6CE8\u610F: 
				1.\u5982\u679C\u662F\u5BBF\u4E3B\u673A\u8DEF\u5F84\u5FC5\u987B\u662F\u7EDD\u5BF9\u8DEF\u5F84,\u5BBF\u4E3B\u673A\u76EE\u5F55\u4F1A\u8986\u76D6\u5BB9\u5668\u5185\u76EE\u5F55\u5185\u5BB9
				2.\u5982\u679C\u662F\u522B\u540D\u5219\u4F1A\u5728docker\u8FD0\u884C\u5BB9\u5668\u65F6\u81EA\u52A8\u5728\u5BBF\u4E3B\u673A\u4E2D\u521B\u5EFA\u4E00\u4E2A\u76EE\u5F55,\u5E76\u5C06\u5BB9\u5668\u76EE\u5F55\u6587\u4EF6\u590D\u5236\u5230\u5BBF\u4E3B\u673A\u4E2D

<span class="token title important"><span class="token punctuation">#</span> 11.\u6253\u5305\u955C\u50CF</span>
		docker save \u955C\u50CF\u540D -o  \u540D\u79F0.tar

<span class="token title important"><span class="token punctuation">#</span> 12.\u8F7D\u5165\u955C\u50CF</span>
		docker load -i   \u540D\u79F0.tar

<span class="token title important"><span class="token punctuation">#</span> 13.\u5BB9\u5668\u6253\u5305\u6210\u65B0\u7684\u955C\u50CF</span>
	  docker commit -m &quot;\u63CF\u8FF0\u4FE1\u606F&quot; -a &quot;\u4F5C\u8005\u4FE1\u606F&quot;   \uFF08\u5BB9\u5668id\u6216\u8005\u540D\u79F0\uFF09\u6253\u5305\u7684\u955C\u50CF\u540D\u79F0:\u6807\u7B7E
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><hr><h2 id="_7-docker\u7684\u955C\u50CF\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_7-docker\u7684\u955C\u50CF\u539F\u7406" aria-hidden="true">#</a> 7.docker\u7684\u955C\u50CF\u539F\u7406</h2><h3 id="_7-1-\u955C\u50CF\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_7-1-\u955C\u50CF\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 7.1 \u955C\u50CF\u662F\u4EC0\u4E48\uFF1F</h3><blockquote><p>\u955C\u50CF\u662F\u4E00\u79CD\u8F7B\u91CF\u7EA7\u7684\uFF0C\u53EF\u6267\u884C\u7684\u72EC\u7ACB\u8F6F\u4EF6\u5305\uFF0C\u7528\u6765\u6253\u5305\u8F6F\u4EF6\u8FD0\u884C\u73AF\u5883\u548C\u57FA\u4E8E\u8FD0\u884C\u73AF\u5883\u5F00\u53D1\u7684\u8F6F\u4EF6\uFF0C\u5B83\u5305\u542B\u8FD0\u884C\u67D0\u4E2A\u8F6F\u4EF6\u6240\u9700\u7684\u6240\u6709\u5185\u5BB9\uFF0C\u5305\u62EC\u4EE3\u7801\u3001\u8FD0\u884C\u65F6\u6240\u9700\u7684\u5E93\u3001\u73AF\u5883\u53D8\u91CF\u548C\u914D\u7F6E\u6587\u4EF6\u3002</p></blockquote><h3 id="_7-2-\u4E3A\u4EC0\u4E48\u4E00\u4E2A\u955C\u50CF\u4F1A\u90A3\u4E48\u5927" tabindex="-1"><a class="header-anchor" href="#_7-2-\u4E3A\u4EC0\u4E48\u4E00\u4E2A\u955C\u50CF\u4F1A\u90A3\u4E48\u5927" aria-hidden="true">#</a> 7.2 \u4E3A\u4EC0\u4E48\u4E00\u4E2A\u955C\u50CF\u4F1A\u90A3\u4E48\u5927\uFF1F</h3><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20200404142950068.png" alt="image-20200404142950068" loading="lazy"></p><p><code>\u955C\u50CF\u5C31\u662F\u82B1\u5377</code></p><ul><li><p>UnionFS\uFF08\u8054\u5408\u6587\u4EF6\u7CFB\u7EDF\uFF09:</p><p>Union\u6587\u4EF6\u7CFB\u7EDF\u662F\u4E00\u79CD\u5206\u5C42\uFF0C\u8F7B\u91CF\u7EA7\u5E76\u4E14\u9AD8\u6027\u80FD\u7684\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5B83\u652F\u6301\u5BF9\u6587\u4EF6\u7CFB\u7EDF\u7684\u4FEE\u6539\u4F5C\u4E3A\u4E00\u6B21\u63D0\u4EA4\u6765\u4E00\u5C42\u5C42\u7684\u53E0\u52A0\uFF0C\u540C\u65F6\u53EF\u4EE5\u5C06\u4E0D\u540C\u76EE\u5F55\u6302\u8F7D\u5230\u540C\u4E00\u4E2A\u865A\u62DF\u6587\u4EF6\u7CFB\u7EDF\u4E0B\u3002Union\u6587\u4EF6\u7CFB\u7EDF\u662FDocker\u955C\u50CF\u7684\u57FA\u7840\u3002\u8FD9\u79CD\u6587\u4EF6\u7CFB\u7EDF\u7279\u6027:\u5C31\u662F\u4E00\u6B21\u540C\u65F6\u52A0\u8F7D\u591A\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u4F46\u4ECE\u5916\u9762\u770B\u8D77\u6765\uFF0C\u53EA\u80FD\u770B\u5230\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u8054\u5408\u52A0\u8F7D\u4F1A\u628A\u5404\u5C42\u6587\u4EF6\u7CFB\u7EDF\u53E0\u52A0\u8D77\u6765\uFF0C\u8FD9\u6837\u6700\u7EC8\u7684\u6587\u4EF6\u7CFB\u7EDF\u4F1A\u5305\u542B\u6240\u6709\u5E95\u5C42\u7684\u6587\u4EF6\u548C\u76EE\u5F55 \u3002</p></li></ul><h3 id="_7-3-docker\u955C\u50CF\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_7-3-docker\u955C\u50CF\u539F\u7406" aria-hidden="true">#</a> 7.3 Docker\u955C\u50CF\u539F\u7406</h3><blockquote><p><code>docker\u7684\u955C\u50CF\u5B9E\u9645\u662F\u7531\u4E00\u5C42\u4E00\u5C42\u7684\u6587\u4EF6\u7CFB\u7EDF\u7EC4\u6210\u3002</code></p></blockquote><ul><li><p>bootfs\uFF08boot file system\uFF09\u4E3B\u8981\u5305\u542Bbootloader\u548Ckernel\uFF0Cbootloader\u4E3B\u8981\u662F\u5F15\u5BFC\u52A0\u8F7Dkernel\uFF0CLinux\u521A\u542F\u52A8\u65F6\u4F1A\u52A0\u8F7Dbootfs\u6587\u4EF6\u7CFB\u7EDF\u3002\u5728docker\u955C\u50CF\u7684\u6700\u5E95\u5C42\u5C31\u662Fbootfs\u3002\u8FD9\u4E00\u5C42\u4E0ELinux/Unix \u7CFB\u7EDF\u662F\u4E00\u6837\u7684\uFF0C\u5305\u542Bboot\u52A0\u8F7D\u5668\uFF08bootloader\uFF09\u548C\u5185\u6838\uFF08kernel\uFF09\u3002\u5F53boot\u52A0\u8F7D\u5B8C,\u540E\u6574\u4E2A\u5185\u6838\u5C31\u90FD\u5728\u5185\u5B58\u4E2D\u4E86\uFF0C\u6B64\u65F6\u5185\u5B58\u7684\u4F7F\u7528\u6743\u5DF2\u7531bootfs\u8F6C\u4EA4\u7ED9\u5185\u6838\uFF0C\u6B64\u65F6\u4F1A\u5378\u8F7Dbootfs\u3002</p></li><li><p>rootfs\uFF08root file system\uFF09\uFF0C\u5728bootfs\u4E4B\u4E0A\uFF0C\u5305\u542B\u7684\u5C31\u662F\u5178\u578B\u7684linux\u7CFB\u7EDF\u4E2D\u7684/dev\uFF0C/proc\uFF0C/bin\uFF0C/etc\u7B49\u6807\u51C6\u7684\u76EE\u5F55\u548C\u6587\u4EF6\u3002rootfs\u5C31\u662F\u5404\u79CD\u4E0D\u540C\u7684\u64CD\u4F5C\u7CFB\u7EDF\u53D1\u884C\u7248\uFF0C\u6BD4\u5982Ubuntu/CentOS\u7B49\u7B49\u3002</p></li><li><p>\u6211\u4EEC\u5E73\u65F6\u5B89\u88C5\u8FDB\u865A\u62DF\u673A\u7684centos\u90FD\u67091\u5230\u51E0\u4E2AGB\uFF0C\u4E3A\u4EC0\u4E48docker\u8FD9\u91CC\u624D200MB\uFF1F\u5BF9\u4E8E\u4E00\u4E2A\u7CBE\u7B80\u7684OS\uFF0Crootfs\u53EF\u4EE5\u5F88\u5C0F\uFF0C\u53EA\u9700\u8981\u5305\u62EC\u6700\u57FA\u672C\u7684\u547D\u4EE4\uFF0C\u5DE5\u5177\uFF0C\u548C\u7A0B\u5E8F\u5E93\u5C31\u53EF\u4EE5\u4E86\uFF0C\u56E0\u4E3A\u5E95\u5C42\u76F4\u63A5\u4F7F\u7528Host\u7684Kernal\uFF0C\u81EA\u5DF1\u53EA\u9700\u8981\u63D0\u4F9Brootfs\u5C31\u884C\u4E86\u3002\u7531\u6B64\u53EF\u89C1\u4E0D\u540C\u7684linux\u53D1\u884C\u7248\uFF0C\u4ED6\u4EEC\u7684bootfs\u662F\u4E00\u81F4\u7684\uFF0Crootfs\u4F1A\u6709\u5DEE\u522B\u3002\u56E0\u6B64\u4E0D\u540C\u7684\u53D1\u884C\u7248\u53EF\u4EE5\u5171\u7528bootfs\u3002</p></li></ul><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/1567585172(1).jpg" alt="" loading="lazy"></p><h3 id="_7-4-\u4E3A\u4EC0\u4E48docker\u955C\u50CF\u8981\u91C7\u7528\u8FD9\u79CD\u5206\u5C42\u7ED3\u6784\u5462" tabindex="-1"><a class="header-anchor" href="#_7-4-\u4E3A\u4EC0\u4E48docker\u955C\u50CF\u8981\u91C7\u7528\u8FD9\u79CD\u5206\u5C42\u7ED3\u6784\u5462" aria-hidden="true">#</a> 7.4 \u4E3A\u4EC0\u4E48docker\u955C\u50CF\u8981\u91C7\u7528\u8FD9\u79CD\u5206\u5C42\u7ED3\u6784\u5462?</h3><blockquote><p><code>\u6700\u5927\u7684\u4E00\u4E2A\u597D\u5904\u5C31\u662F\u8D44\u6E90\u5171\u4EAB</code></p></blockquote><ul><li>\u6BD4\u5982\uFF1A\u6709\u591A\u4E2A\u955C\u50CF\u90FD\u662F\u4ECE\u76F8\u540C\u7684base\u955C\u50CF\u6784\u5EFA\u800C\u6765\u7684\uFF0C\u90A3\u4E48\u5BBF\u4E3B\u673A\u53EA\u9700\u5728\u78C1\u76D8\u4E2D\u4FDD\u5B58\u4E00\u4EFDbase\u955C\u50CF\u3002\u540C\u65F6\u5185\u5B58\u4E2D\u4E5F\u53EA\u9700\u8981\u52A0\u8F7D\u4E00\u4EFDbase\u955C\u50CF\uFF0C\u5C31\u53EF\u4EE5\u4E3A\u6240\u6709\u5BB9\u5668\u670D\u52A1\u4E86\u3002\u800C\u4E14\u955C\u50CF\u7684\u6BCF\u4E00\u5C42\u90FD\u53EF\u4EE5\u88AB\u5171\u4EAB\u3002Docker\u955C\u50CF\u90FD\u662F\u53EA\u8BFB\u7684\u3002\u5F53\u5BB9\u5668\u542F\u52A8\u65F6\uFF0C\u4E00\u4E2A\u65B0\u7684\u53EF\u5199\u5C42\u88AB\u52A0\u8F7D\u5230\u955C\u50CF\u7684\u9876\u90E8\u3002\u8FD9\u4E00\u5C42\u901A\u5E38\u88AB\u79F0\u4E3A\u5BB9\u5668\u5C42\uFF0C\u5BB9\u5668\u5C42\u4E4B\u4E0B\u90FD\u53EB\u955C\u50CF\u5C42\u3002</li></ul><hr><h2 id="_8-docker\u5B89\u88C5\u5E38\u7528\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#_8-docker\u5B89\u88C5\u5E38\u7528\u670D\u52A1" aria-hidden="true">#</a> 8.Docker\u5B89\u88C5\u5E38\u7528\u670D\u52A1</h2><h3 id="_8-1-\u5B89\u88C5mysql" tabindex="-1"><a class="header-anchor" href="#_8-1-\u5B89\u88C5mysql" aria-hidden="true">#</a> 8.1 \u5B89\u88C5mysql</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u62C9\u53D6mysql\u955C\u50CF\u5230\u672C\u5730</span>
	docker pull mysql:tag (tag\u4E0D\u52A0\u9ED8\u8BA4\u6700\u65B0\u7248\u672C)
	
<span class="token title important"><span class="token punctuation">#</span> 2.\u8FD0\u884Cmysql\u670D\u52A1</span>
	docker run --name mysql -e MYSQL_ROOT_PASSWORD=root -d mysql:tag  						  --\u6CA1\u6709\u66B4\u9732\u5916\u90E8\u7AEF\u53E3\u5916\u90E8\u4E0D\u80FD\u8FDE\u63A5
	docker run --name mysql -e MYSQL_ROOT_PASSWORD=root -p 3306:3306 -d  mysql:tag  --\u6CA1\u6709\u66B4\u9732\u5916\u90E8\u7AEF\u53E3

<span class="token title important"><span class="token punctuation">#</span> 3.\u8FDB\u5165mysql\u5BB9\u5668</span>
	docker exec -it \u5BB9\u5668\u540D\u79F0|\u5BB9\u5668id bash

<span class="token title important"><span class="token punctuation">#</span> 4.\u5916\u90E8\u67E5\u770Bmysql\u65E5\u5FD7</span>
	docker logs \u5BB9\u5668\u540D\u79F0|\u5BB9\u5668id

<span class="token title important"><span class="token punctuation">#</span> 5.\u4F7F\u7528\u81EA\u5B9A\u4E49\u914D\u7F6E\u53C2\u6570</span>
	docker run --name mysql -v /root/mysql/conf.d:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=root -d mysql:tag

<span class="token title important"><span class="token punctuation">#</span> 6.\u5C06\u5BB9\u5668\u6570\u636E\u4F4D\u7F6E\u4E0E\u5BBF\u4E3B\u673A\u4F4D\u7F6E\u6302\u8F7D\u4FDD\u8BC1\u6570\u636E\u5B89\u5168</span>
	docker run --name mysql -v /root/mysql/data:/var/lib/mysql -v /root/mysql/conf.d:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=root -p 3306:3306 -d mysql:tag

<span class="token title important"><span class="token punctuation">#</span> 7.\u901A\u8FC7\u5176\u4ED6\u5BA2\u6237\u7AEF\u8BBF\u95EE \u5982\u5728window\u7CFB\u7EDF|macos\u7CFB\u7EDF\u4F7F\u7528\u5BA2\u6237\u7AEF\u5DE5\u5177\u8BBF\u95EE</span>
	
<span class="token title important"><span class="token punctuation">#</span> 8.\u5C06mysql\u6570\u636E\u5E93\u5907\u4EFD\u4E3Asql\u6587\u4EF6</span>
	docker exec mysql|\u5BB9\u5668id sh -c &#39;exec mysqldump --all-databases -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &gt; /root/all-databases.sql  --\u5BFC\u51FA\u5168\u90E8\u6570\u636E
	docker exec mysql sh -c &#39;exec mysqldump --databases \u5E93\u8868 -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &gt; /root/all-databases.sql  --\u5BFC\u51FA\u6307\u5B9A\u5E93\u6570\u636E
	docker exec mysql sh -c &#39;exec mysqldump --no-data --databases \u5E93\u8868 -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &gt; /root/all-databases.sql  --\u5BFC\u51FA\u6307\u5B9A\u5E93\u6570\u636E\u4E0D\u8981\u6570\u636E

<span class="token title important"><span class="token punctuation">#</span> 9.\u6267\u884Csql\u6587\u4EF6\u5230mysql\u4E2D</span>
	docker exec -i mysql sh -c &#39;exec mysql -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &lt; /root/xxx.sql
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_8-2-\u5B89\u88C5redis\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#_8-2-\u5B89\u88C5redis\u670D\u52A1" aria-hidden="true">#</a> 8.2 \u5B89\u88C5Redis\u670D\u52A1</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u5728docker hub\u641C\u7D22redis\u955C\u50CF</span>
	docker search redis

<span class="token title important"><span class="token punctuation">#</span> 2.\u62C9\u53D6redis\u955C\u50CF\u5230\u672C\u5730</span>
	docker pull redis

<span class="token title important"><span class="token punctuation">#</span> 3.\u542F\u52A8redis\u670D\u52A1\u8FD0\u884C\u5BB9\u5668</span>
	docker run --name redis -d redis:tag (\u6CA1\u6709\u66B4\u9732\u5916\u90E8\u7AEF\u53E3)
	docker run --name redis -p 6379:6379 -d redis:tag (\u66B4\u9732\u5916\u90E8\u5BBF\u4E3B\u673A\u7AEF\u53E3\u4E3A6379\u8FDB\u884C\u8FDE\u63A5) 

<span class="token title important"><span class="token punctuation">#</span> 4.\u67E5\u770B\u542F\u52A8\u65E5\u5FD7</span>
	docker logs -t -f \u5BB9\u5668id|\u5BB9\u5668\u540D\u79F0

<span class="token title important"><span class="token punctuation">#</span> 5.\u8FDB\u5165\u5BB9\u5668\u5185\u90E8\u67E5\u770B</span>
	docker exec -it \u5BB9\u5668id|\u540D\u79F0 bash  

<span class="token title important"><span class="token punctuation">#</span> 6.\u52A0\u8F7D\u5916\u90E8\u81EA\u5B9A\u4E49\u914D\u7F6E\u542F\u52A8redis\u5BB9\u5668</span>
	\u9ED8\u8BA4\u60C5\u51B5\u4E0Bredis\u5B98\u65B9\u955C\u50CF\u4E2D\u6CA1\u6709redis.conf\u914D\u7F6E\u6587\u4EF6 \u9700\u8981\u53BB\u5B98\u7F51\u4E0B\u8F7D\u6307\u5B9A\u7248\u672C\u7684\u914D\u7F6E\u6587\u4EF6
	<span class="token list punctuation">1.</span> wget http://download.redis.io/releases/redis-5.0.8.tar.gz  \u4E0B\u8F7D\u5B98\u65B9\u5B89\u88C5\u5305
	<span class="token list punctuation">2.</span> \u5C06\u5B98\u65B9\u5B89\u88C5\u5305\u4E2D\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u590D\u5236\u5230\u5BBF\u4E3B\u673A\u6307\u5B9A\u76EE\u5F55\u4E2D\u5982 /root/redis/redis.conf\u6587\u4EF6
	<span class="token list punctuation">3.</span> \u4FEE\u6539\u9700\u8981\u81EA\u5B9A\u4E49\u7684\u914D\u7F6E
		 bind 0.0.0.0 \u5F00\u542F\u8FDC\u7A0B\u6743\u9650
		 appenonly yes \u5F00\u542Faof\u6301\u4E45\u5316
	<span class="token list punctuation">4.</span> \u52A0\u8F7D\u914D\u7F6E\u542F\u52A8
	docker run --name redis -v /root/redis:/usr/local/etc/redis -p 6379:6379 -d redis redis-server /usr/local/etc/redis/redis.conf  

<span class="token title important"><span class="token punctuation">#</span> 7.\u5C06\u6570\u636E\u76EE\u5F55\u6302\u5728\u5230\u672C\u5730\u4FDD\u8BC1\u6570\u636E\u5B89\u5168</span>
	docker run --name redis -v /root/redis/data:/data -v /root/redis/redis.conf:/usr/local/etc/redis/redis.conf -p 6379:6379 -d redis redis-server 					/usr/local/etc/redis/redis.conf  
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_8-3-\u5B89\u88C5nginx" tabindex="-1"><a class="header-anchor" href="#_8-3-\u5B89\u88C5nginx" aria-hidden="true">#</a> 8.3 \u5B89\u88C5Nginx</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u5728docker hub\u641C\u7D22nginx</span>
	docker search nginx

<span class="token title important"><span class="token punctuation">#</span> 2.\u62C9\u53D6nginx\u955C\u50CF\u5230\u672C\u5730</span>
	[root@localhost ~]# docker pull nginx
    Using default tag: latest
    latest: Pulling from library/nginx
    afb6ec6fdc1c: Pull complete 
    b90c53a0b692: Pull complete 
    11fa52a0fdc0: Pull complete 
    Digest: sha256:30dfa439718a17baafefadf16c5e7c9d0a1cde97b4fd84f63b69e13513be7097
    Status: Downloaded newer image for nginx:latest
    docker.io/library/nginx:latest

<span class="token title important"><span class="token punctuation">#</span> 3.\u542F\u52A8nginx\u5BB9\u5668</span>
		docker run -p 80:80 --name nginx01 -d nginx

<span class="token title important"><span class="token punctuation">#</span> 4.\u8FDB\u5165\u5BB9\u5668</span>
		docker exec -it nginx01 /bin/bash
		\u67E5\u627E\u76EE\u5F55:  whereis nginx
		\u914D\u7F6E\u6587\u4EF6:  /etc/nginx/nginx.conf

<span class="token title important"><span class="token punctuation">#</span> 5.\u590D\u5236\u914D\u7F6E\u6587\u4EF6\u5230\u5BBF\u4E3B\u673A</span>
		docker cp nginx01(\u5BB9\u5668id|\u5BB9\u5668\u540D\u79F0):/etc/nginx/nginx.conf \u5BBF\u4E3B\u673A\u540D\u5F55

<span class="token title important"><span class="token punctuation">#</span> 6.\u6302\u5728nginx\u914D\u7F6E\u4EE5\u53CAhtml\u5230\u5BBF\u4E3B\u673A\u5916\u90E8</span>
		docker run --name nginx02 -v /root/nginx/nginx.conf:/etc/nginx/nginx.conf -v /root/nginx/html:/usr/share/nginx/html -p 80:80 -d nginx		
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><hr><h3 id="_8-4-\u5B89\u88C5tomcat" tabindex="-1"><a class="header-anchor" href="#_8-4-\u5B89\u88C5tomcat" aria-hidden="true">#</a> 8.4 \u5B89\u88C5Tomcat</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u5728docker hub\u641C\u7D22tomcat</span>
	docker search tomcat

<span class="token title important"><span class="token punctuation">#</span> 2.\u4E0B\u8F7Dtomcat\u955C\u50CF</span>
	docker pull tomcat

<span class="token title important"><span class="token punctuation">#</span> 3.\u8FD0\u884Ctomcat\u955C\u50CF</span>
	docker run -p 8080:8080 -d --name mytomcat tomcat

<span class="token title important"><span class="token punctuation">#</span> 4.\u8FDB\u5165tomcat\u5BB9\u5668</span>
	docker exec -it mytomcat /bin/bash

<span class="token title important"><span class="token punctuation">#</span> 5.\u5C06webapps\u76EE\u5F55\u6302\u8F7D\u5728\u5916\u90E8</span>
	docker run -p 8080:8080 -v /root/webapps:/usr/local/tomcat/webapps -d --name mytomcat tomcat

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><hr><h3 id="_8-5-\u5B89\u88C5mongodb\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_8-5-\u5B89\u88C5mongodb\u6570\u636E\u5E93" aria-hidden="true">#</a> 8.5 \u5B89\u88C5MongoDB\u6570\u636E\u5E93</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u8FD0\u884CmongDB</span>
	docker run -d -p 27017:27017 --name mymongo mongo  ---\u65E0\u987B\u6743\u9650
	docker logs -f mymongo --\u67E5\u770Bmongo\u8FD0\u884C\u65E5\u5FD7

<span class="token title important"><span class="token punctuation">#</span> 2.\u8FDB\u5165mongodb\u5BB9\u5668</span>
	docker exec -it mymongo /bin/bash
		\u76F4\u63A5\u6267\u884Cmongo\u547D\u4EE4\u8FDB\u884C\u64CD\u4F5C

<span class="token title important"><span class="token punctuation">#</span> 3.\u5E38\u89C1\u5177\u6709\u6743\u9650\u7684\u5BB9\u5668</span>
	docker run --name  mymongo  -p 27017:27017  -d mongo --auth

<span class="token title important"><span class="token punctuation">#</span> 4.\u8FDB\u5165\u5BB9\u5668\u914D\u7F6E\u7528\u6237\u540D\u5BC6\u7801</span>
	mongo
	use admin \u9009\u62E9admin\u5E93
	db.createUser({user:&quot;root&quot;,pwd:&quot;root&quot;,roles:[{role:&#39;root&#39;,db:&#39;admin&#39;}]})   //\u521B\u5EFA\u7528\u6237,\u6B64\u7528\u6237\u521B\u5EFA\u6210\u529F,\u5219\u540E\u7EED\u64CD\u4F5C\u90FD\u9700\u8981\u7528\u6237\u8BA4\u8BC1
	exit

<span class="token title important"><span class="token punctuation">#</span> 5.\u5C06mongoDB\u4E2D\u6570\u636E\u76EE\u5F55\u6620\u5C04\u5230\u5BBF\u4E3B\u673A\u4E2D</span>
	docker run -d -p 27017:27017 -v /root/mongo/data:/data/db --name mymongo mongo 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_8-6-\u5B89\u88C5elasticsearch" tabindex="-1"><a class="header-anchor" href="#_8-6-\u5B89\u88C5elasticsearch" aria-hidden="true">#</a> 8.6 \u5B89\u88C5ElasticSearch</h3><ul><li><code>\u6CE8\u610F:</code><strong>\u8C03\u9AD8JVM\u7EBF\u7A0B\u6570\u9650\u5236\u6570\u91CF</strong></li></ul><h4 id="_0-\u62C9\u53D6\u955C\u50CF\u8FD0\u884Celasticsearch" tabindex="-1"><a class="header-anchor" href="#_0-\u62C9\u53D6\u955C\u50CF\u8FD0\u884Celasticsearch" aria-hidden="true">#</a> 0.\u62C9\u53D6\u955C\u50CF\u8FD0\u884Celasticsearch</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.dockerhub \u62C9\u53D6\u955C\u50CF</span>
	docker pull elasticsearch:6.4.2
<span class="token title important"><span class="token punctuation">#</span> 2.\u67E5\u770Bdocker\u955C\u50CF</span>
	docker images
<span class="token title important"><span class="token punctuation">#</span> 3.\u8FD0\u884Cdocker\u955C\u50CF</span>
	docker run -p 9200:9200 -p 9300:9300 elasticsearch:6.4.2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>\u542F\u52A8\u51FA\u73B0\u5982\u4E0B\u9519\u8BEF</li><li><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20200602184321790.png" alt="image-20200602184321790" loading="lazy"></li></ul><h4 id="_1-\u9884\u5148\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_1-\u9884\u5148\u914D\u7F6E" aria-hidden="true">#</a> 1. \u9884\u5148\u914D\u7F6E</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u5728centos\u865A\u62DF\u673A\u4E2D\uFF0C\u4FEE\u6539\u914D\u7F6Esysctl.conf</span>
	vim /etc/sysctl.conf
<span class="token title important"><span class="token punctuation">#</span> 2.\u52A0\u5165\u5982\u4E0B\u914D\u7F6E</span>
	vm.max_map_count=262144 
<span class="token title important"><span class="token punctuation">#</span> 3.\u542F\u7528\u914D\u7F6E</span>
	sysctl -p
	\u6CE8\uFF1A\u8FD9\u4E00\u6B65\u662F\u4E3A\u4E86\u9632\u6B62\u542F\u52A8\u5BB9\u5668\u65F6\uFF0C\u62A5\u51FA\u5982\u4E0B\u9519\u8BEF\uFF1A
	bootstrap checks failed max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_2-\u542F\u52A8eleasticsearch\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_2-\u542F\u52A8eleasticsearch\u5BB9\u5668" aria-hidden="true">#</a> 2.\u542F\u52A8EleasticSearch\u5BB9\u5668</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 0.\u590D\u5236\u5BB9\u5668\u4E2Ddata\u76EE\u5F55\u5230\u5BBF\u4E3B\u673A\u4E2D</span>
	docker cp \u5BB9\u5668id:/usr/share/share/elasticsearch/data /root/es
<span class="token title important"><span class="token punctuation">#</span> 1.\u8FD0\u884CES\u5BB9\u5668 \u6307\u5B9Ajvm\u5185\u5B58\u5927\u5C0F\u5E76\u6307\u5B9Aik\u5206\u8BCD\u5668\u4F4D\u7F6E</span>
	docker run -d --name es -p 9200:9200 -p 9300:9300 -e ES_JAVA_OPTS=&quot;-Xms128m -Xmx128m&quot; -v /root/es/plugins:/usr/share/elasticsearch/plugins -v /root/es/data:/usr/share/elasticsearch/data elasticsearch:6.4.2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_3-\u5B89\u88C5ik\u5206\u8BCD\u5668" tabindex="-1"><a class="header-anchor" href="#_3-\u5B89\u88C5ik\u5206\u8BCD\u5668" aria-hidden="true">#</a> 3.\u5B89\u88C5IK\u5206\u8BCD\u5668</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u4E0B\u8F7D\u5BF9\u5E94\u7248\u672C\u7684IK\u5206\u8BCD\u5668</span>
	wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.4.2/elasticsearch-analysis-ik-6.4.2.zip

<span class="token title important"><span class="token punctuation">#</span> 2.\u89E3\u538B\u5230plugins\u6587\u4EF6\u5939\u4E2D</span>
	yum install -y unzip
	unzip -d ik elasticsearch-analysis-ik-6.4.2.zip

<span class="token title important"><span class="token punctuation">#</span> 3.\u6DFB\u52A0\u81EA\u5B9A\u4E49\u6269\u5C55\u8BCD\u548C\u505C\u7528\u8BCD</span>
	cd plugins/elasticsearch/config
	vim IKAnalyzer.cfg.xml
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comment</span><span class="token punctuation">&gt;</span></span>IK Analyzer \u6269\u5C55\u914D\u7F6E<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>comment</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u81EA\u5DF1\u7684\u6269\u5C55\u5B57\u5178 --&gt;</span>
<span class="token code keyword">		&lt;entry key=&quot;ext_dict&quot;&gt;ext_dict.dic&lt;/entry&gt;
		</span><span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u81EA\u5DF1\u7684\u6269\u5C55\u505C\u6B62\u8BCD\u5B57\u5178--&gt;</span>
<span class="token code keyword">		&lt;entry key=&quot;ext_stopwords&quot;&gt;ext_stopwords.dic&lt;/entry&gt;
	&lt;/properties&gt;</span>

<span class="token title important"><span class="token punctuation">#</span> 4.\u5728ik\u5206\u8BCD\u5668\u76EE\u5F55\u4E0Bconfig\u76EE\u5F55\u4E2D\u521B\u5EFAext_dict.dic\u6587\u4EF6   \u7F16\u7801\u4E00\u5B9A\u8981\u4E3AUTF-8\u624D\u80FD\u751F\u6548</span>
	vim ext_dict.dic \u52A0\u5165\u6269\u5C55\u8BCD\u5373\u53EF
<span class="token title important"><span class="token punctuation">#</span> 5. \u5728ik\u5206\u8BCD\u5668\u76EE\u5F55\u4E0Bconfig\u76EE\u5F55\u4E2D\u521B\u5EFAext_stopword.dic\u6587\u4EF6 </span>
	vim ext_stopwords.dic \u52A0\u5165\u505C\u7528\u8BCD\u5373\u53EF

<span class="token title important"><span class="token punctuation">#</span> 6.\u91CD\u542F\u5BB9\u5668\u751F\u6548</span>
	docker restart \u5BB9\u5668id
<span class="token title important"><span class="token punctuation">#</span> 7.\u5C06\u6B64\u5BB9\u5668\u63D0\u4EA4\u6210\u4E3A\u4E00\u4E2A\u65B0\u7684\u955C\u50CF</span>
	docker commit -a=&quot;xiaochen&quot; -m=&quot;es with IKAnalyzer&quot; \u5BB9\u5668id xiaochen/elasticsearch:6.4.2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="_4-\u5B89\u88C5kibana" tabindex="-1"><a class="header-anchor" href="#_4-\u5B89\u88C5kibana" aria-hidden="true">#</a> 4. \u5B89\u88C5Kibana</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u4E0B\u8F7Dkibana\u955C\u50CF\u5230\u672C\u5730</span>
	docker pull kibana:6.4.2

<span class="token title important"><span class="token punctuation">#</span> 2.\u542F\u52A8kibana\u5BB9\u5668</span>
	docker run -d --name kibana -e ELASTICSEARCH_URL=http://10.15.0.3:9200 -p 5601:5601 kibana:6.4.2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h2 id="_10-docker\u4E2D\u51FA\u73B0\u5982\u4E0B\u9519\u8BEF\u89E3\u51B3\u65B9\u6848" tabindex="-1"><a class="header-anchor" href="#_10-docker\u4E2D\u51FA\u73B0\u5982\u4E0B\u9519\u8BEF\u89E3\u51B3\u65B9\u6848" aria-hidden="true">#</a> 10.Docker\u4E2D\u51FA\u73B0\u5982\u4E0B\u9519\u8BEF\u89E3\u51B3\u65B9\u6848</h2><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code><span class="token namespace">[root@localhost ~]</span><span class="token comment"># docker search mysql \u6216\u8005 docker pull \u8FD9\u4E9B\u547D\u4EE4\u65E0\u6CD5\u4F7F\u7528</span>
Error response <span class="token keyword">from</span> daemon: Get https:<span class="token operator">/</span><span class="token operator">/</span>index<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>io/v1/search?q=mysql&amp;n=25: x509: certificate has expired or is not yet valid
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20200602183429286.png" alt="image-20200602183429286" loading="lazy"></p><ul><li>\u6CE8\u610F:<strong>\u8FD9\u4E2A\u9519\u8BEF\u7684\u539F\u56E0\u5728\u4E8E\u662F\u7CFB\u7EDF\u7684\u65F6\u95F4\u548Cdocker hub\u65F6\u95F4\u4E0D\u4E00\u81F4,\u9700\u8981\u505A\u7CFB\u7EDF\u65F6\u95F4\u4E0E\u7F51\u7EDC\u65F6\u95F4\u540C\u6B65</strong></li></ul><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u5B89\u88C5\u65F6\u95F4\u540C\u6B65</span>
	sudo yum -y install ntp ntpdate
<span class="token title important"><span class="token punctuation">#</span> 2.\u540C\u6B65\u65F6\u95F4</span>
	sudo ntpdate cn.pool.ntp.org
<span class="token title important"><span class="token punctuation">#</span> 3.\u67E5\u770B\u672C\u673A\u65F6\u95F4</span>
	date
<span class="token title important"><span class="token punctuation">#</span> 4.\u4ECE\u65B0\u6D4B\u8BD5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20200602183718623.png" alt="image-20200602183718623" loading="lazy"></p><h2 id="_9-dockerfile" tabindex="-1"><a class="header-anchor" href="#_9-dockerfile" aria-hidden="true">#</a> 9.Dockerfile</h2><h3 id="_9-1-\u4EC0\u4E48\u662Fdockerfile" tabindex="-1"><a class="header-anchor" href="#_9-1-\u4EC0\u4E48\u662Fdockerfile" aria-hidden="true">#</a> 9.1 \u4EC0\u4E48\u662FDockerfile</h3><p>Dockerfile\u53EF\u4EE5\u8BA4\u4E3A\u662F<strong>Docker\u955C\u50CF\u7684\u63CF\u8FF0\u6587\u4EF6\uFF0C\u662F\u7531\u4E00\u7CFB\u5217\u547D\u4EE4\u548C\u53C2\u6570\u6784\u6210\u7684\u811A\u672C</strong>\u3002\u4E3B\u8981\u4F5C\u7528\u662F<strong>\u7528\u6765\u6784\u5EFAdocker\u955C\u50CF\u7684\u6784\u5EFA\u6587\u4EF6</strong>\u3002</p><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20200404111908085.png" alt="image-20200404111908085" loading="lazy"></p><ul><li><strong>\u901A\u8FC7\u67B6\u6784\u56FE\u53EF\u4EE5\u770B\u51FA\u901A\u8FC7DockerFile\u53EF\u4EE5\u76F4\u63A5\u6784\u5EFA\u955C\u50CF</strong></li></ul><h3 id="_9-2-dockerfile\u89E3\u6790\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#_9-2-dockerfile\u89E3\u6790\u8FC7\u7A0B" aria-hidden="true">#</a> 9.2 Dockerfile\u89E3\u6790\u8FC7\u7A0B</h3><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20200603181253804.png" alt="image-20200603181253804" loading="lazy"></p><h3 id="_9-3-dockerfile\u7684\u4FDD\u7559\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-dockerfile\u7684\u4FDD\u7559\u547D\u4EE4" aria-hidden="true">#</a> 9.3 Dockerfile\u7684\u4FDD\u7559\u547D\u4EE4</h3><p>\u5B98\u65B9\u8BF4\u660E:https://docs.docker.com/engine/reference/builder/</p><table><thead><tr><th>\u4FDD\u7559\u5B57</th><th>\u4F5C\u7528</th></tr></thead><tbody><tr><td><strong>FROM</strong></td><td><strong>\u5F53\u524D\u955C\u50CF\u662F\u57FA\u4E8E\u54EA\u4E2A\u955C\u50CF\u7684</strong> <code>\u7B2C\u4E00\u4E2A\u6307\u4EE4\u5FC5\u987B\u662FFROM</code></td></tr><tr><td>MAINTAINER</td><td>\u955C\u50CF\u7EF4\u62A4\u8005\u7684\u59D3\u540D\u548C\u90AE\u7BB1\u5730\u5740</td></tr><tr><td><strong>RUN</strong></td><td><strong>\u6784\u5EFA\u955C\u50CF\u65F6\u9700\u8981\u8FD0\u884C\u7684\u6307\u4EE4</strong></td></tr><tr><td><strong>EXPOSE</strong></td><td><strong>\u5F53\u524D\u5BB9\u5668\u5BF9\u5916\u66B4\u9732\u51FA\u7684\u7AEF\u53E3\u53F7</strong></td></tr><tr><td><strong>WORKDIR</strong></td><td><strong>\u6307\u5B9A\u5728\u521B\u5EFA\u5BB9\u5668\u540E\uFF0C\u7EC8\u7AEF\u9ED8\u8BA4\u767B\u5F55\u8FDB\u6765\u7684\u5DE5\u4F5C\u76EE\u5F55\uFF0C\u4E00\u4E2A\u843D\u811A\u70B9</strong></td></tr><tr><td><strong>ENV</strong></td><td><strong>\u7528\u6765\u5728\u6784\u5EFA\u955C\u50CF\u8FC7\u7A0B\u4E2D\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF</strong></td></tr><tr><td><strong>ADD</strong></td><td><strong>\u5C06\u5BBF\u4E3B\u673A\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\u62F7\u8D1D\u8FDB\u955C\u50CF\u4E14ADD\u547D\u4EE4\u4F1A\u81EA\u52A8\u5904\u7406URL\u548C\u89E3\u538Btar\u5305</strong></td></tr><tr><td><strong>COPY</strong></td><td><strong>\u7C7B\u4F3C\u4E8EADD\uFF0C\u62F7\u8D1D\u6587\u4EF6\u548C\u76EE\u5F55\u5230\u955C\u50CF\u4E2D<br>\u5C06\u4ECE\u6784\u5EFA\u4E0A\u4E0B\u6587\u76EE\u5F55\u4E2D&lt;\u539F\u8DEF\u5F84&gt;\u7684\u6587\u4EF6/\u76EE\u5F55\u590D\u5236\u5230\u65B0\u7684\u4E00\u5C42\u7684\u955C\u50CF\u5185\u7684&lt;\u76EE\u6807\u8DEF\u5F84&gt;\u4F4D\u7F6E</strong></td></tr><tr><td><strong>VOLUME</strong></td><td><strong>\u5BB9\u5668\u6570\u636E\u5377\uFF0C\u7528\u4E8E\u6570\u636E\u4FDD\u5B58\u548C\u6301\u4E45\u5316\u5DE5\u4F5C</strong></td></tr><tr><td><strong>CMD</strong></td><td><strong>\u6307\u5B9A\u4E00\u4E2A\u5BB9\u5668\u542F\u52A8\u65F6\u8981\u8FD0\u884C\u7684\u547D\u4EE4<br>Dockerfile\u4E2D\u53EF\u4EE5\u6709\u591A\u4E2ACMD\u6307\u4EE4\uFF0C\u4F46\u53EA\u6709\u6700\u540E\u4E00\u4E2A\u751F\u6548\uFF0CCMD\u4F1A\u88ABdocker run\u4E4B\u540E\u7684\u53C2\u6570\u66FF\u6362</strong></td></tr><tr><td><strong>ENTRYPOINT</strong></td><td><strong>\u6307\u5B9A\u4E00\u4E2A\u5BB9\u5668\u542F\u52A8\u65F6\u8981\u8FD0\u884C\u7684\u547D\u4EE4<br>ENTRYPOINT\u7684\u76EE\u7684\u548CCMD\u4E00\u6837\uFF0C\u90FD\u662F\u5728\u6307\u5B9A\u5BB9\u5668\u542F\u52A8\u7A0B\u5E8F\u53CA\u5176\u53C2\u6570</strong></td></tr></tbody></table><h4 id="_9-3-1-from-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-1-from-\u547D\u4EE4" aria-hidden="true">#</a> 9.3.1 FROM \u547D\u4EE4</h4><ul><li><p>\u57FA\u4E8E\u90A3\u4E2A\u955C\u50CF\u8FDB\u884C\u6784\u5EFA\u65B0\u7684\u955C\u50CF,\u5728\u6784\u5EFA\u65F6\u4F1A\u81EA\u52A8\u4ECEdocker hub\u62C9\u53D6base\u955C\u50CF \u5FC5\u987B\u4F5C\u4E3ADockerfile\u7684\u7B2C\u4E00\u4E2A\u6307\u4EE4\u51FA\u73B0</p></li><li><p>\u8BED\u6CD5:</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span>  &lt;image&gt;</span>
<span class="token instruction"><span class="token keyword">FROM</span>  &lt;image&gt;[:&lt;tag&gt;]     \u4F7F\u7528\u7248\u672C\u4E0D\u5199\u4E3Alatest</span>
<span class="token instruction"><span class="token keyword">FROM</span>  &lt;image&gt;[@&lt;digest&gt;]  \u4F7F\u7528\u6458\u8981</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h4 id="_9-3-2-maintainer-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-2-maintainer-\u547D\u4EE4" aria-hidden="true">#</a> 9.3.2 MAINTAINER \u547D\u4EE4</h4><ul><li><p>\u955C\u50CF\u7EF4\u62A4\u8005\u7684\u59D3\u540D\u548C\u90AE\u7BB1\u5730\u5740[\u5E9F\u5F03]</p></li><li><p>\u8BED\u6CD5:</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">MAINTAINER</span> &lt;name&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_9-3-3-run-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-3-run-\u547D\u4EE4" aria-hidden="true">#</a> 9.3.3 RUN \u547D\u4EE4</h4><ul><li><p>RUN\u6307\u4EE4\u5C06\u5728\u5F53\u524D\u6620\u50CF\u4E4B\u4E0A\u7684\u65B0\u5C42\u4E2D\u6267\u884C\u4EFB\u4F55\u547D\u4EE4\u5E76\u63D0\u4EA4\u7ED3\u679C\u3002\u751F\u6210\u7684\u63D0\u4EA4\u6620\u50CF\u5C06\u7528\u4E8EDockerfile\u4E2D\u7684\u4E0B\u4E00\u6B65</p></li><li><p>\u8BED\u6CD5:</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">RUN</span> &lt;command&gt; (shell form, the command is run in a shell, which by default is /bin/sh -c on Linux or cmd /S /C on Windows)</span>
<span class="token instruction"><span class="token keyword">RUN</span> echo hello</span>

<span class="token instruction"><span class="token keyword">RUN</span> [<span class="token string">&quot;executable&quot;</span>, <span class="token string">&quot;param1&quot;</span>, <span class="token string">&quot;param2&quot;</span>] (exec form)</span>
<span class="token instruction"><span class="token keyword">RUN</span> [<span class="token string">&quot;/bin/bash&quot;</span>, <span class="token string">&quot;-c&quot;</span>, <span class="token string">&quot;echo hello&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h4 id="_9-3-4-expose-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-4-expose-\u547D\u4EE4" aria-hidden="true">#</a> 9.3.4 EXPOSE \u547D\u4EE4</h4><ul><li><p>\u7528\u6765\u6307\u5B9A\u6784\u5EFA\u7684\u955C\u50CF\u5728\u8FD0\u884C\u4E3A\u5BB9\u5668\u65F6\u5BF9\u5916\u66B4\u9732\u7684\u7AEF\u53E3</p></li><li><p>\u8BED\u6CD5:</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">EXPOSE</span> 80/tcp  \u5982\u679C\u6CA1\u6709\u663E\u793A\u6307\u5B9A\u5219\u9ED8\u8BA4\u66B4\u9732\u90FD\u662Ftcp</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 80/udp</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h4 id="_9-3-5-cmd-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-5-cmd-\u547D\u4EE4" aria-hidden="true">#</a> 9.3.5 CMD \u547D\u4EE4</h4><ul><li><p>\u7528\u6765\u4E3A\u542F\u52A8\u7684\u5BB9\u5668\u6307\u5B9A\u6267\u884C\u7684\u547D\u4EE4,\u5728Dockerfile\u4E2D\u53EA\u80FD\u6709\u4E00\u6761CMD\u6307\u4EE4\u3002\u5982\u679C\u5217\u51FA\u591A\u4E2A\u547D\u4EE4\uFF0C\u5219\u53EA\u6709\u6700\u540E\u4E00\u4E2A\u547D\u4EE4\u624D\u4F1A\u751F\u6548\u3002</p></li><li><p>\u6CE8\u610F: <strong>Dockerfile\u4E2D\u53EA\u80FD\u6709\u4E00\u6761CMD\u6307\u4EE4\u3002\u5982\u679C\u5217\u51FA\u591A\u4E2A\u547D\u4EE4\uFF0C\u5219\u53EA\u6709\u6700\u540E\u4E00\u4E2A\u547D\u4EE4\u624D\u4F1A\u751F\u6548\u3002</strong></p></li><li><p>\u8BED\u6CD5:</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;executable&quot;</span>,<span class="token string">&quot;param1&quot;</span>,<span class="token string">&quot;param2&quot;</span>] (exec form, this is the preferred form)</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;param1&quot;</span>,<span class="token string">&quot;param2&quot;</span>] (as default parameters to ENTRYPOINT)</span>
<span class="token instruction"><span class="token keyword">CMD</span> command param1 param2 (shell form)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h4 id="_9-3-6-workdir-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-6-workdir-\u547D\u4EE4" aria-hidden="true">#</a> 9.3.6 WORKDIR \u547D\u4EE4</h4><ul><li><p>\u7528\u6765\u4E3ADockerfile\u4E2D\u7684\u4EFB\u4F55RUN\u3001CMD\u3001ENTRYPOINT\u3001COPY\u548CADD\u6307\u4EE4\u8BBE\u7F6E\u5DE5\u4F5C\u76EE\u5F55\u3002\u5982\u679CWORKDIR\u4E0D\u5B58\u5728\uFF0C\u5373\u4F7F\u5B83\u6CA1\u6709\u5728\u4EFB\u4F55\u540E\u7EEDDockerfile\u6307\u4EE4\u4E2D\u4F7F\u7528\uFF0C\u5B83\u4E5F\u5C06\u88AB\u521B\u5EFA\u3002</p></li><li><p>\u8BED\u6CD5:</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">WORKDIR</span> /path/to/workdir</span>

<span class="token instruction"><span class="token keyword">WORKDIR</span> /a</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> b</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> c</span>
\`\u6CE8\u610F:WORKDIR\u6307\u4EE4\u53EF\u4EE5\u5728Dockerfile\u4E2D\u591A\u6B21\u4F7F\u7528\u3002\u5982\u679C\u63D0\u4F9B\u4E86\u76F8\u5BF9\u8DEF\u5F84\uFF0C\u5219\u8BE5\u8DEF\u5F84\u5C06\u4E0E\u5148\u524DWORKDIR\u6307\u4EE4\u7684\u8DEF\u5F84\u76F8\u5BF9\`
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul><h4 id="_9-3-7-env-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-7-env-\u547D\u4EE4" aria-hidden="true">#</a> 9.3.7 ENV \u547D\u4EE4</h4><ul><li><p>\u7528\u6765\u4E3A\u6784\u5EFA\u955C\u50CF\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF\u3002\u8FD9\u4E2A\u503C\u5C06\u51FA\u73B0\u5728\u6784\u5EFA\u9636\u6BB5\u4E2D\u6240\u6709\u540E\u7EED\u6307\u4EE4\u7684\u73AF\u5883\u4E2D\u3002</p></li><li><p>\u8BED\u6CD5\uFF1A</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">ENV</span> &lt;key&gt; &lt;value&gt;</span>
<span class="token instruction"><span class="token keyword">ENV</span> &lt;key&gt;=&lt;value&gt; ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h4 id="_9-3-8-add-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-8-add-\u547D\u4EE4" aria-hidden="true">#</a> 9.3.8 ADD \u547D\u4EE4</h4><ul><li><p>\u7528\u6765\u4ECEcontext\u4E0A\u4E0B\u6587\u590D\u5236\u65B0\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u8FDC\u7A0B\u6587\u4EF6url\uFF0C\u5E76\u5C06\u5B83\u4EEC\u6DFB\u52A0\u5230\u4F4D\u4E8E\u6307\u5B9A\u8DEF\u5F84\u7684\u6620\u50CF\u6587\u4EF6\u7CFB\u7EDF\u4E2D\u3002</p></li><li><p>\u8BED\u6CD5:</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">ADD</span> hom* /mydir/       \u901A\u914D\u7B26\u6DFB\u52A0\u591A\u4E2A\u6587\u4EF6</span>
<span class="token instruction"><span class="token keyword">ADD</span> hom?.txt /mydir/   \u901A\u914D\u7B26\u6DFB\u52A0</span>
<span class="token instruction"><span class="token keyword">ADD</span> test.txt relativeDir/  \u53EF\u4EE5\u6307\u5B9A\u76F8\u5BF9\u8DEF\u5F84</span>
<span class="token instruction"><span class="token keyword">ADD</span> test.txt /absoluteDir/ \u4E5F\u53EF\u4EE5\u6307\u5B9A\u7EDD\u5BF9\u8DEF\u5F84</span>
<span class="token instruction"><span class="token keyword">ADD</span> url </span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h4 id="_9-3-9-copy-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-9-copy-\u547D\u4EE4" aria-hidden="true">#</a> 9.3.9 COPY \u547D\u4EE4</h4><ul><li><p>\u7528\u6765\u5C06context\u76EE\u5F55\u4E2D\u6307\u5B9A\u6587\u4EF6\u590D\u5236\u5230\u955C\u50CF\u7684\u6307\u5B9A\u76EE\u5F55\u4E2D</p></li><li><p>\u8BED\u6CD5:</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">COPY</span> src dest</span>
<span class="token instruction"><span class="token keyword">COPY</span> [<span class="token string">&quot;&lt;src&gt;&quot;</span>,... <span class="token string">&quot;&lt;dest&gt;&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h4 id="_9-3-10-volume-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-10-volume-\u547D\u4EE4" aria-hidden="true">#</a> 9.3.10 VOLUME \u547D\u4EE4</h4><ul><li><p>\u7528\u6765\u5B9A\u4E49\u5BB9\u5668\u8FD0\u884C\u65F6\u53EF\u4EE5\u6302\u5728\u5230\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55</p></li><li><p>\u8BED\u6CD5:</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">VOLUME</span> [<span class="token string">&quot;/data&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_9-3-11-entrypoint\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_9-3-11-entrypoint\u547D\u4EE4" aria-hidden="true">#</a> 9.3.11 ENTRYPOINT\u547D\u4EE4</h4><ul><li><p>\u7528\u6765\u6307\u5B9A\u5BB9\u5668\u542F\u52A8\u65F6\u6267\u884C\u547D\u4EE4\u548CCMD\u7C7B\u4F3C</p></li><li><p>\u8BED\u6CD5:</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code>  [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> command param1 param2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ENTRYPOINT\u6307\u4EE4\uFF0C\u5F80\u5F80\u7528\u4E8E\u8BBE\u7F6E\u5BB9\u5668\u542F\u52A8\u540E\u7684<strong>\u7B2C\u4E00\u4E2A\u547D\u4EE4</strong>\uFF0C\u8FD9\u5BF9\u4E00\u4E2A\u5BB9\u5668\u6765\u8BF4\u5F80\u5F80\u662F\u56FA\u5B9A\u7684\u3002 CMD\u6307\u4EE4\uFF0C\u5F80\u5F80\u7528\u4E8E\u8BBE\u7F6E\u5BB9\u5668\u542F\u52A8\u7684\u7B2C\u4E00\u4E2A\u547D\u4EE4\u7684<strong>\u9ED8\u8BA4\u53C2\u6570</strong>\uFF0C\u8FD9\u5BF9\u4E00\u4E2A\u5BB9\u5668\u6765\u8BF4\u53EF\u4EE5\u662F\u53D8\u5316\u7684\u3002</p></li></ul><h4 id="_9-3-11-entrypoint\u547D\u4EE4-1" tabindex="-1"><a class="header-anchor" href="#_9-3-11-entrypoint\u547D\u4EE4-1" aria-hidden="true">#</a> 9.3.11 ENTRYPOINT\u547D\u4EE4</h4><h3 id="_9-4-dockerfile\u6784\u5EFAspringboot\u9879\u76EE\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#_9-4-dockerfile\u6784\u5EFAspringboot\u9879\u76EE\u90E8\u7F72" aria-hidden="true">#</a> 9.4 Dockerfile\u6784\u5EFAspringboot\u9879\u76EE\u90E8\u7F72</h3><h5 id="_1-\u51C6\u5907springboot\u53EF\u8FD0\u884C\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#_1-\u51C6\u5907springboot\u53EF\u8FD0\u884C\u9879\u76EE" aria-hidden="true">#</a> 1.\u51C6\u5907springboot\u53EF\u8FD0\u884C\u9879\u76EE</h5><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20200605172151266.png" alt="image-20200605172151266" loading="lazy"></p><h5 id="_2-\u5C06\u53EF\u8FD0\u884C\u9879\u76EE\u653E\u5165linux\u865A\u62DF\u673A\u4E2D" tabindex="-1"><a class="header-anchor" href="#_2-\u5C06\u53EF\u8FD0\u884C\u9879\u76EE\u653E\u5165linux\u865A\u62DF\u673A\u4E2D" aria-hidden="true">#</a> 2.\u5C06\u53EF\u8FD0\u884C\u9879\u76EE\u653E\u5165linux\u865A\u62DF\u673A\u4E2D</h5><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20200605172340380.png" alt="image-20200605172340380" loading="lazy"></p><h5 id="_3-\u7F16\u5199dockerfile" tabindex="-1"><a class="header-anchor" href="#_3-\u7F16\u5199dockerfile" aria-hidden="true">#</a> 3.\u7F16\u5199Dockerfile</h5><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> openjdk:8</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /ems</span>
<span class="token instruction"><span class="token keyword">ADD</span> ems.jar /ems</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 8989</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;java&quot;</span>,<span class="token string">&quot;-jar&quot;</span>]</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;ems.jar&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="_4-\u6784\u5EFA\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#_4-\u6784\u5EFA\u955C\u50CF" aria-hidden="true">#</a> 4.\u6784\u5EFA\u955C\u50CF</h5><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ems<span class="token punctuation">]</span><span class="token comment"># docker build -t ems .</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_5-\u8FD0\u884C\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#_5-\u8FD0\u884C\u955C\u50CF" aria-hidden="true">#</a> 5.\u8FD0\u884C\u955C\u50CF</h5><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ems<span class="token punctuation">]</span><span class="token comment"># docker run -p 8989:8989 ems</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_6-\u8BBF\u95EE\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#_6-\u8BBF\u95EE\u9879\u76EE" aria-hidden="true">#</a> 6.\u8BBF\u95EE\u9879\u76EE</h5><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//10.15.0.8:8989/ems/login.html</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20200605173141636.png" alt="image-20200605173141636" loading="lazy"></p><hr><h2 id="_10-\u9AD8\u7EA7\u7F51\u7EDC\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_10-\u9AD8\u7EA7\u7F51\u7EDC\u914D\u7F6E" aria-hidden="true">#</a> 10.\u9AD8\u7EA7\u7F51\u7EDC\u914D\u7F6E</h2><h3 id="_10-1-\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_10-1-\u8BF4\u660E" aria-hidden="true">#</a> 10.1 \u8BF4\u660E</h3><p>\u5F53 Docker \u542F\u52A8\u65F6\uFF0C\u4F1A\u81EA\u52A8\u5728\u4E3B\u673A\u4E0A\u521B\u5EFA\u4E00\u4E2A <code>docker0</code> \u865A\u62DF\u7F51\u6865\uFF0C\u5B9E\u9645\u4E0A\u662F Linux \u7684\u4E00\u4E2A bridge\uFF0C\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u8F6F\u4EF6\u4EA4\u6362\u673A\u3002\u5B83\u4F1A\u5728\u6302\u8F7D\u5230\u5B83\u7684\u7F51\u53E3\u4E4B\u95F4\u8FDB\u884C\u8F6C\u53D1\u3002</p>`,147),y=s("\u540C\u65F6\uFF0CDocker \u968F\u673A\u5206\u914D\u4E00\u4E2A\u672C\u5730\u672A\u5360\u7528\u7684\u79C1\u6709\u7F51\u6BB5\uFF08\u5728 "),f={href:"https://tools.ietf.org/html/rfc1918",target:"_blank",rel:"noopener noreferrer"},x=s("RFC1918"),_=s(" \u4E2D\u5B9A\u4E49\uFF09\u4E2D\u7684\u4E00\u4E2A\u5730\u5740\u7ED9 "),q=n("code",null,"docker0",-1),w=s(" \u63A5\u53E3\u3002\u6BD4\u5982\u5178\u578B\u7684 "),D=n("code",null,"172.17.42.1",-1),O=s("\uFF0C\u63A9\u7801\u4E3A "),R=n("code",null,"255.255.0.0",-1),E=s("\u3002\u6B64\u540E\u542F\u52A8\u7684\u5BB9\u5668\u5185\u7684\u7F51\u53E3\u4E5F\u4F1A\u81EA\u52A8\u5206\u914D\u4E00\u4E2A\u540C\u4E00\u7F51\u6BB5\uFF08"),S=n("code",null,"172.17.0.0/16",-1),C=s("\uFF09\u7684\u5730\u5740\u3002"),N=t(`<p>\u5F53\u521B\u5EFA\u4E00\u4E2A Docker \u5BB9\u5668\u7684\u65F6\u5019\uFF0C\u540C\u65F6\u4F1A\u521B\u5EFA\u4E86\u4E00\u5BF9 <code>veth pair</code> \u63A5\u53E3\uFF08\u5F53\u6570\u636E\u5305\u53D1\u9001\u5230\u4E00\u4E2A\u63A5\u53E3\u65F6\uFF0C\u53E6\u5916\u4E00\u4E2A\u63A5\u53E3\u4E5F\u53EF\u4EE5\u6536\u5230\u76F8\u540C\u7684\u6570\u636E\u5305\uFF09\u3002\u8FD9\u5BF9\u63A5\u53E3\u4E00\u7AEF\u5728\u5BB9\u5668\u5185\uFF0C\u5373 <code>eth0</code>\uFF1B\u53E6\u4E00\u7AEF\u5728\u672C\u5730\u5E76\u88AB\u6302\u8F7D\u5230 <code>docker0</code> \u7F51\u6865\uFF0C\u540D\u79F0\u4EE5 <code>veth</code> \u5F00\u5934\uFF08\u4F8B\u5982 <code>vethAQI2QT</code>\uFF09\u3002\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u4E3B\u673A\u53EF\u4EE5\u8DDF\u5BB9\u5668\u901A\u4FE1\uFF0C\u5BB9\u5668\u4E4B\u95F4\u4E5F\u53EF\u4EE5\u76F8\u4E92\u901A\u4FE1\u3002Docker \u5C31\u521B\u5EFA\u4E86\u5728\u4E3B\u673A\u548C\u6240\u6709\u5BB9\u5668\u4E4B\u95F4\u4E00\u4E2A\u865A\u62DF\u5171\u4EAB\u7F51\u7EDC\u3002</p><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20201125105847896.png" alt="image-20201125105847896" loading="lazy"></p><h3 id="_10-2-\u67E5\u770B\u7F51\u7EDC\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_10-2-\u67E5\u770B\u7F51\u7EDC\u4FE1\u606F" aria-hidden="true">#</a> 10.2 \u67E5\u770B\u7F51\u7EDC\u4FE1\u606F</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> docker network ls</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_10-3-\u521B\u5EFA\u4E00\u4E2A\u7F51\u6865" tabindex="-1"><a class="header-anchor" href="#_10-3-\u521B\u5EFA\u4E00\u4E2A\u7F51\u6865" aria-hidden="true">#</a> 10.3 \u521B\u5EFA\u4E00\u4E2A\u7F51\u6865</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> docker network create -d bridge \u7F51\u6865\u540D\u79F0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_10-4-\u5220\u9664\u4E00\u4E2A\u7F51\u6865" tabindex="-1"><a class="header-anchor" href="#_10-4-\u5220\u9664\u4E00\u4E2A\u7F51\u6865" aria-hidden="true">#</a> 10.4 \u5220\u9664\u4E00\u4E2A\u7F51\u6865</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> docker network rm \u7F51\u6865\u540D\u79F0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_10-5-\u5BB9\u5668\u4E4B\u524D\u4F7F\u7528\u7F51\u7EDC\u901A\u4FE1" tabindex="-1"><a class="header-anchor" href="#_10-5-\u5BB9\u5668\u4E4B\u524D\u4F7F\u7528\u7F51\u7EDC\u901A\u4FE1" aria-hidden="true">#</a> 10.5 \u5BB9\u5668\u4E4B\u524D\u4F7F\u7528\u7F51\u7EDC\u901A\u4FE1</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u67E5\u8BE2\u5F53\u524D\u7F51\u7EDC\u914D\u7F6E</span>
<span class="token list punctuation">-</span> docker network ls
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>NETWORK ID          NAME                DRIVER              SCOPE
8e424e5936b7        bridge              bridge              <span class="token builtin class-name">local</span>
17d974db02da        docker_gwbridge     bridge              <span class="token builtin class-name">local</span>
d6c326e433f7        <span class="token function">host</span>                <span class="token function">host</span>                <span class="token builtin class-name">local</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 2.\u521B\u5EFA\u6865\u63A5\u7F51\u7EDC</span>
<span class="token list punctuation">-</span> docker network create -d bridge info
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker network create -d bridge info</span>
6e4aaebff79b1df43a064e0e8fdab08f52d64ce34db78dd5184ce7aaaf550a2f
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker network ls</span>
NETWORK ID          NAME                DRIVER              SCOPE
8e424e5936b7        bridge              bridge              <span class="token builtin class-name">local</span>
17d974db02da        docker_gwbridge     bridge              <span class="token builtin class-name">local</span>
d6c326e433f7        <span class="token function">host</span>                <span class="token function">host</span>                <span class="token builtin class-name">local</span>
6e4aaebff79b        info                bridge              <span class="token builtin class-name">local</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 3.\u542F\u52A8\u5BB9\u5668\u6307\u5B9A\u4F7F\u7528\u7F51\u6865</span>
<span class="token list punctuation">-</span> docker run -d -p 8890:80 --name nginx001 --network info nginx 
<span class="token list punctuation">-</span> docker run -d -p 8891:80 --name nginx002 --network info nginx 
	<span class="token code-snippet code keyword">\`\u6CE8\u610F:\u4E00\u65E6\u6307\u5B9A\u7F51\u6865\u540E--name\u6307\u5B9A\u540D\u5B57\u5C31\u662F\u4E3B\u673A\u540D,\u591A\u4E2A\u5BB9\u5668\u6307\u5B9A\u5728\u540C\u4E00\u4E2A\u7F51\u6865\u65F6,\u53EF\u4EE5\u5728\u4EFB\u610F\u4E00\u4E2A\u5BB9\u5668\u4E2D\u4F7F\u7528\u4E3B\u673A\u540D\u4E0E\u5BB9\u5668\u8FDB\u884C\u4E92\u901A\`</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 8890:80 --name nginx001 --network info nginx </span>
c315bcc94e9ddaa36eb6c6f16ca51592b1ac8bf1ecfe9d8f01d892f3f10825fe
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 8891:80 --name nginx002 --network info nginx</span>
f8682db35dd7fb4395f90edb38df7cad71bbfaba71b6a4c6e2a3a525cb73c2a5
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
f8682db35dd7        nginx               <span class="token string">&quot;/docker-entrypoint.\u2026&quot;</span>   <span class="token number">3</span> seconds ago       Up <span class="token number">2</span> seconds        <span class="token number">0.0</span>.0.0:8891-<span class="token operator">&gt;</span><span class="token number">80</span>/tcp   nginx002
c315bcc94e9d        nginx               <span class="token string">&quot;/docker-entrypoint.\u2026&quot;</span>   <span class="token number">7</span> minutes ago       Up <span class="token number">7</span> minutes        <span class="token number">0.0</span>.0.0:8890-<span class="token operator">&gt;</span><span class="token number">80</span>/tcp   nginx001
b63169d43792        mysql:5.7.19        <span class="token string">&quot;docker-entrypoint.s\u2026&quot;</span>   <span class="token number">7</span> minutes ago       Up <span class="token number">7</span> minutes        <span class="token number">3306</span>/tcp               mysql_mysql.1.s75qe5kkpwwttyf0wrjvd2cda
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it f8682db35dd7 /bin/bash</span>
root@f8682db35dd7:/<span class="token comment"># curl http://nginx001</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><hr><h2 id="_11-\u9AD8\u7EA7\u6570\u636E\u5377\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_11-\u9AD8\u7EA7\u6570\u636E\u5377\u914D\u7F6E" aria-hidden="true">#</a> 11.\u9AD8\u7EA7\u6570\u636E\u5377\u914D\u7F6E</h2><h3 id="_11-1-\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_11-1-\u8BF4\u660E" aria-hidden="true">#</a> 11.1 \u8BF4\u660E</h3><p><code>\u6570\u636E\u5377</code> \u662F\u4E00\u4E2A\u53EF\u4F9B\u4E00\u4E2A\u6216\u591A\u4E2A\u5BB9\u5668\u4F7F\u7528\u7684\u7279\u6B8A\u76EE\u5F55\uFF0C\u5B83\u7ED5\u8FC7 UFS\uFF0C\u53EF\u4EE5\u63D0\u4F9B\u5F88\u591A\u6709\u7528\u7684\u7279\u6027\uFF1A</p><ul><li><code>\u6570\u636E\u5377</code> \u53EF\u4EE5\u5728\u5BB9\u5668\u4E4B\u95F4\u5171\u4EAB\u548C\u91CD\u7528</li><li>\u5BF9 <code>\u6570\u636E\u5377</code> \u7684\u4FEE\u6539\u4F1A\u7ACB\u9A6C\u751F\u6548</li><li>\u5BF9 <code>\u6570\u636E\u5377</code> \u7684\u66F4\u65B0\uFF0C\u4E0D\u4F1A\u5F71\u54CD\u955C\u50CF</li><li><code>\u6570\u636E\u5377</code> \u9ED8\u8BA4\u4F1A\u4E00\u76F4\u5B58\u5728\uFF0C\u5373\u4F7F\u5BB9\u5668\u88AB\u5220\u9664</li></ul><blockquote><p>\u6CE8\u610F\uFF1A<code>\u6570\u636E\u5377</code> \u7684\u4F7F\u7528\uFF0C\u7C7B\u4F3C\u4E8E Linux \u4E0B\u5BF9\u76EE\u5F55\u6216\u6587\u4EF6\u8FDB\u884C mount\uFF0C\u955C\u50CF\u4E2D\u7684\u88AB\u6307\u5B9A\u4E3A\u6302\u8F7D\u70B9\u7684\u76EE\u5F55\u4E2D\u7684\u6587\u4EF6\u4F1A\u590D\u5236\u5230\u6570\u636E\u5377\u4E2D\uFF08\u4EC5\u6570\u636E\u5377\u4E3A\u7A7A\u65F6\u4F1A\u590D\u5236\uFF09\u3002</p></blockquote><h3 id="_11-2-\u521B\u5EFA\u6570\u636E\u5377" tabindex="-1"><a class="header-anchor" href="#_11-2-\u521B\u5EFA\u6570\u636E\u5377" aria-hidden="true">#</a> 11.2 \u521B\u5EFA\u6570\u636E\u5377</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker volume create my-vol</span>
my-vol
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_11-3-\u67E5\u770B\u6570\u636E\u5377" tabindex="-1"><a class="header-anchor" href="#_11-3-\u67E5\u770B\u6570\u636E\u5377" aria-hidden="true">#</a> 11.3 \u67E5\u770B\u6570\u636E\u5377</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker volume inspect my-vol       </span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;CreatedAt&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2020-11-25T11:43:56+08:00&quot;</span>,
        <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
        <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
        <span class="token string">&quot;Mountpoint&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/volumes/my-vol/_data&quot;</span>,
        <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;my-vol&quot;</span>,
        <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
        <span class="token string">&quot;Scope&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_11-4-\u6302\u8F7D\u6570\u636E\u5377" tabindex="-1"><a class="header-anchor" href="#_11-4-\u6302\u8F7D\u6570\u636E\u5377" aria-hidden="true">#</a> 11.4 \u6302\u8F7D\u6570\u636E\u5377</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker run -d -P --name web  -v my-vol:/usr/share/nginx/html  nginx</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker inspect web</span>
				<span class="token string">&quot;Mounts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;volume&quot;</span>,
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;my-vol&quot;</span>,
                <span class="token string">&quot;Source&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/volumes/my-vol/_data&quot;</span>,
                <span class="token string">&quot;Destination&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/usr/share/nginx/html&quot;</span>,
                <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
                <span class="token string">&quot;Mode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;z&quot;</span>,
                <span class="token string">&quot;RW&quot;</span><span class="token builtin class-name">:</span> true,
                <span class="token string">&quot;Propagation&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>,
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_11-5-\u5220\u9664\u6570\u636E\u5377" tabindex="-1"><a class="header-anchor" href="#_11-5-\u5220\u9664\u6570\u636E\u5377" aria-hidden="true">#</a> 11.5 \u5220\u9664\u6570\u636E\u5377</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> volume <span class="token function">rm</span> my-vol
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><h2 id="_12-docker-compose" tabindex="-1"><a class="header-anchor" href="#_12-docker-compose" aria-hidden="true">#</a> 12.Docker Compose</h2><h3 id="_12-1-\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_12-1-\u7B80\u4ECB" aria-hidden="true">#</a> 12.1 \u7B80\u4ECB</h3><p><code>Compose</code> \u9879\u76EE\u662F Docker \u5B98\u65B9\u7684\u5F00\u6E90\u9879\u76EE\uFF0C\u8D1F\u8D23\u5B9E\u73B0\u5BF9 Docker \u5BB9\u5668\u96C6\u7FA4\u7684\u5FEB\u901F\u7F16\u6392\u3002\u4ECE\u529F\u80FD\u4E0A\u770B\uFF0C\u8DDF <code>OpenStack</code> \u4E2D\u7684 <code>Heat</code> \u5341\u5206\u7C7B\u4F3C\u3002</p><p>\u5176\u4EE3\u7801\u76EE\u524D\u5728 https://github.com/docker/compose \u4E0A\u5F00\u6E90\u3002</p><p><code>Compose</code> \u5B9A\u4F4D\u662F \u300C\u5B9A\u4E49\u548C\u8FD0\u884C\u591A\u4E2A Docker \u5BB9\u5668\u7684\u5E94\u7528\uFF08Defining and running multi-container Docker applications\uFF09\u300D\uFF0C\u5176\u524D\u8EAB\u662F\u5F00\u6E90\u9879\u76EE Fig\u3002</p><p>\u901A\u8FC7\u7B2C\u4E00\u90E8\u5206\u4E2D\u7684\u4ECB\u7ECD\uFF0C\u6211\u4EEC\u77E5\u9053\u4F7F\u7528\u4E00\u4E2A <code>Dockerfile</code> \u6A21\u677F\u6587\u4EF6\uFF0C\u53EF\u4EE5\u8BA9\u7528\u6237\u5F88\u65B9\u4FBF\u7684\u5B9A\u4E49\u4E00\u4E2A\u5355\u72EC\u7684\u5E94\u7528\u5BB9\u5668\u3002\u7136\u800C\uFF0C\u5728\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0C\u7ECF\u5E38\u4F1A\u78B0\u5230\u9700\u8981\u591A\u4E2A\u5BB9\u5668\u76F8\u4E92\u914D\u5408\u6765\u5B8C\u6210\u67D0\u9879\u4EFB\u52A1\u7684\u60C5\u51B5\u3002\u4F8B\u5982\u8981\u5B9E\u73B0\u4E00\u4E2A Web \u9879\u76EE\uFF0C\u9664\u4E86 Web \u670D\u52A1\u5BB9\u5668\u672C\u8EAB\uFF0C\u5F80\u5F80\u8FD8\u9700\u8981\u518D\u52A0\u4E0A\u540E\u7AEF\u7684\u6570\u636E\u5E93\u670D\u52A1\u5BB9\u5668\uFF0C\u751A\u81F3\u8FD8\u5305\u62EC\u8D1F\u8F7D\u5747\u8861\u5BB9\u5668\u7B49\u3002</p><p><code>Compose</code> \u6070\u597D\u6EE1\u8DB3\u4E86\u8FD9\u6837\u7684\u9700\u6C42\u3002\u5B83\u5141\u8BB8\u7528\u6237\u901A\u8FC7\u4E00\u4E2A\u5355\u72EC\u7684 <code>docker-compose.yml</code> \u6A21\u677F\u6587\u4EF6\uFF08YAML \u683C\u5F0F\uFF09\u6765\u5B9A\u4E49\u4E00\u7EC4\u76F8\u5173\u8054\u7684\u5E94\u7528\u5BB9\u5668\u4E3A\u4E00\u4E2A\u9879\u76EE\uFF08project\uFF09\u3002</p><p><code>Compose</code> \u4E2D\u6709\u4E24\u4E2A\u91CD\u8981\u7684\u6982\u5FF5\uFF1A</p><ul><li>\u670D\u52A1 (<code>service</code>)\uFF1A\u4E00\u4E2A\u5E94\u7528\u7684\u5BB9\u5668\uFF0C\u5B9E\u9645\u4E0A\u53EF\u4EE5\u5305\u62EC\u82E5\u5E72\u8FD0\u884C\u76F8\u540C\u955C\u50CF\u7684\u5BB9\u5668\u5B9E\u4F8B\u3002</li><li>\u9879\u76EE (<code>project</code>)\uFF1A\u7531\u4E00\u7EC4\u5173\u8054\u7684\u5E94\u7528\u5BB9\u5668\u7EC4\u6210\u7684\u4E00\u4E2A\u5B8C\u6574\u4E1A\u52A1\u5355\u5143\uFF0C\u5728 <code>docker-compose.yml</code> \u6587\u4EF6\u4E2D\u5B9A\u4E49\u3002</li></ul><p><code>Compose</code> \u7684\u9ED8\u8BA4\u7BA1\u7406\u5BF9\u8C61\u662F\u9879\u76EE\uFF0C\u901A\u8FC7\u5B50\u547D\u4EE4\u5BF9\u9879\u76EE\u4E2D\u7684\u4E00\u7EC4\u5BB9\u5668\u8FDB\u884C\u4FBF\u6377\u5730\u751F\u547D\u5468\u671F\u7BA1\u7406\u3002</p><p><code>Compose</code> \u9879\u76EE\u7531 Python \u7F16\u5199\uFF0C\u5B9E\u73B0\u4E0A\u8C03\u7528\u4E86 Docker \u670D\u52A1\u63D0\u4F9B\u7684 API \u6765\u5BF9\u5BB9\u5668\u8FDB\u884C\u7BA1\u7406\u3002\u56E0\u6B64\uFF0C\u53EA\u8981\u6240\u64CD\u4F5C\u7684\u5E73\u53F0\u652F\u6301 Docker API\uFF0C\u5C31\u53EF\u4EE5\u5728\u5176\u4E0A\u5229\u7528 <code>Compose</code> \u6765\u8FDB\u884C\u7F16\u6392\u7BA1\u7406\u3002</p><h3 id="_12-2-\u5B89\u88C5\u4E0E\u5378\u8F7D" tabindex="-1"><a class="header-anchor" href="#_12-2-\u5B89\u88C5\u4E0E\u5378\u8F7D" aria-hidden="true">#</a> 12.2 \u5B89\u88C5\u4E0E\u5378\u8F7D</h3><h6 id="_1-linux" tabindex="-1"><a class="header-anchor" href="#_1-linux" aria-hidden="true">#</a> 1.linux</h6><ul><li>\u5728 Linux \u4E0A\u7684\u4E5F\u5B89\u88C5\u5341\u5206\u7B80\u5355\uFF0C\u4ECE \u5B98\u65B9 GitHub Release \u5904\u76F4\u63A5\u4E0B\u8F7D\u7F16\u8BD1\u597D\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6\u5373\u53EF\u3002\u4F8B\u5982\uFF0C\u5728 Linux 64 \u4F4D\u7CFB\u7EDF\u4E0A\u76F4\u63A5\u4E0B\u8F7D\u5BF9\u5E94\u7684\u4E8C\u8FDB\u5236\u5305\u3002</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">curl</span> -L https://github.com/docker/compose/releases/download/1.25.5/docker-compose-<span class="token variable"><span class="token variable">\`</span><span class="token function">uname</span> -s<span class="token variable">\`</span></span>-<span class="token variable"><span class="token variable">\`</span><span class="token function">uname</span> -m<span class="token variable">\`</span></span> <span class="token operator">&gt;</span> /usr/local/bin/docker-compose
$ <span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h6 id="_2-macos\u3001window" tabindex="-1"><a class="header-anchor" href="#_2-macos\u3001window" aria-hidden="true">#</a> 2.macos\u3001window</h6><ul><li>Compose \u53EF\u4EE5\u901A\u8FC7 Python \u7684\u5305\u7BA1\u7406\u5DE5\u5177 pip \u8FDB\u884C\u5B89\u88C5\uFF0C\u4E5F\u53EF\u4EE5\u76F4\u63A5\u4E0B\u8F7D\u7F16\u8BD1\u597D\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6\u4F7F\u7528\uFF0C\u751A\u81F3\u80FD\u591F\u76F4\u63A5\u5728 Docker \u5BB9\u5668\u4E2D\u8FD0\u884C\u3002<code>Docker Desktop for Mac/Windows \u81EA\u5E26 docker-compose \u4E8C\u8FDB\u5236\u6587\u4EF6\uFF0C\u5B89\u88C5 Docker \u4E4B\u540E\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528</code>\u3002</li></ul><h6 id="_3-bash\u547D\u4EE4\u8865\u5168" tabindex="-1"><a class="header-anchor" href="#_3-bash\u547D\u4EE4\u8865\u5168" aria-hidden="true">#</a> 3.bash\u547D\u4EE4\u8865\u5168</h6><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -L https://raw.githubusercontent.com/docker/compose/1.25.5/contrib/completion/bash/docker-compose <span class="token operator">&gt;</span> /etc/bash_completion.d/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h6 id="_4-\u5378\u8F7D" tabindex="-1"><a class="header-anchor" href="#_4-\u5378\u8F7D" aria-hidden="true">#</a> 4.\u5378\u8F7D</h6><ul><li>\u5982\u679C\u662F\u4E8C\u8FDB\u5236\u5305\u65B9\u5F0F\u5B89\u88C5\u7684\uFF0C\u5220\u9664\u4E8C\u8FDB\u5236\u6587\u4EF6\u5373\u53EF\u3002</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">rm</span> /usr/local/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h6 id="_5-\u6D4B\u8BD5\u5B89\u88C5\u6210\u529F" tabindex="-1"><a class="header-anchor" href="#_5-\u6D4B\u8BD5\u5B89\u88C5\u6210\u529F" aria-hidden="true">#</a> 5.\u6D4B\u8BD5\u5B89\u88C5\u6210\u529F</h6><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">docker-compose</span> --version
 <span class="token function">docker-compose</span> version <span class="token number">1.25</span>.5, build 4667896b
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_12-3-docker-compose\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_12-3-docker-compose\u4F7F\u7528" aria-hidden="true">#</a> 12.3 docker compose\u4F7F\u7528</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1.\u76F8\u5173\u6982\u5FF5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u9996\u5148\u4ECB\u7ECD\u51E0\u4E2A\u672F\u8BED\u3002</p><ul><li>\u670D\u52A1 (<code>service</code>)\uFF1A\u4E00\u4E2A\u5E94\u7528\u5BB9\u5668\uFF0C\u5B9E\u9645\u4E0A\u53EF\u4EE5\u8FD0\u884C\u591A\u4E2A\u76F8\u540C\u955C\u50CF\u7684\u5B9E\u4F8B\u3002</li><li>\u9879\u76EE (<code>project</code>)\uFF1A\u7531\u4E00\u7EC4\u5173\u8054\u7684\u5E94\u7528\u5BB9\u5668\u7EC4\u6210\u7684\u4E00\u4E2A\u5B8C\u6574\u4E1A\u52A1\u5355\u5143\u3002\u2202\u4E00\u4E2A\u9879\u76EE\u53EF\u4EE5\u7531\u591A\u4E2A\u670D\u52A1\uFF08\u5BB9\u5668\uFF09\u5173\u8054\u800C\u6210\uFF0C<code>Compose</code> \u9762\u5411\u9879\u76EE\u8FDB\u884C\u7BA1\u7406\u3002</li></ul><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 2.\u573A\u666F</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u6700\u5E38\u89C1\u7684\u9879\u76EE\u662F web \u7F51\u7AD9\uFF0C\u8BE5\u9879\u76EE\u5E94\u8BE5\u5305\u542B web \u5E94\u7528\u548C\u7F13\u5B58\u3002</p><ul><li>springboot\u5E94\u7528</li><li>mysql\u670D\u52A1</li><li>redis\u670D\u52A1</li><li>elasticsearch\u670D\u52A1</li><li>.......</li></ul><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 3.docker-compose\u6A21\u677F</span>
<span class="token list punctuation">-</span> \u53C2\u8003\u6587\u6863:https://docker_practice.gitee.io/zh-cn/compose/compose_file.html
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.0&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">mysqldb</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span>5.7.19
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mysql
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;3306:3306&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /root/mysql/conf<span class="token punctuation">:</span>/etc/mysql/conf.d
      <span class="token punctuation">-</span> /root/mysql/logs<span class="token punctuation">:</span>/logs
      <span class="token punctuation">-</span> /root/mysql/data<span class="token punctuation">:</span>/var/lib/mysql
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> root
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ems
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> redis

  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>4.0.14
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;6379:6379&quot;</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ems
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /root/redis/data<span class="token punctuation">:</span>/data
    <span class="token key atrule">command</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>server
    
<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">ems</span><span class="token punctuation">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 4.\u901A\u8FC7docker-compose\u8FD0\u884C\u4E00\u7EC4\u5BB9\u5668</span>
<span class="token list punctuation">-</span> \u53C2\u8003\u6587\u6863:https://docker_practice.gitee.io/zh-cn/compose/commands.html
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker-compose up    							//\u524D\u53F0\u542F\u52A8\u4E00\u7EC4\u670D\u52A1</span>
<span class="token punctuation">[</span>root@centos ~<span class="token punctuation">]</span><span class="token comment"># docker-compose up -d 							//\u540E\u53F0\u542F\u52A8\u4E00\u7EC4\u670D\u52A1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr><h3 id="_12-4-docker-compose-\u6A21\u677F\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_12-4-docker-compose-\u6A21\u677F\u6587\u4EF6" aria-hidden="true">#</a> 12.4 docker-compose \u6A21\u677F\u6587\u4EF6</h3><p>\u6A21\u677F\u6587\u4EF6\u662F\u4F7F\u7528 <code>Compose</code> \u7684\u6838\u5FC3\uFF0C\u6D89\u53CA\u5230\u7684\u6307\u4EE4\u5173\u952E\u5B57\u4E5F\u6BD4\u8F83\u591A\u3002\u4F46\u5927\u5BB6\u4E0D\u7528\u62C5\u5FC3\uFF0C\u8FD9\u91CC\u9762\u5927\u90E8\u5206\u6307\u4EE4\u8DDF <code>docker run</code> \u76F8\u5173\u53C2\u6570\u7684\u542B\u4E49\u90FD\u662F\u7C7B\u4F3C\u7684\u3002</p><p>\u9ED8\u8BA4\u7684\u6A21\u677F\u6587\u4EF6\u540D\u79F0\u4E3A <code>docker-compose.yml</code>\uFF0C\u683C\u5F0F\u4E3A YAML \u683C\u5F0F\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3&quot;</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">webapp</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> examples/web
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;80:80&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;/data&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u6CE8\u610F\u6BCF\u4E2A\u670D\u52A1\u90FD\u5FC5\u987B\u901A\u8FC7 <code>image</code> \u6307\u4EE4\u6307\u5B9A\u955C\u50CF\u6216 <code>build</code> \u6307\u4EE4\uFF08\u9700\u8981 Dockerfile\uFF09\u7B49\u6765\u81EA\u52A8\u6784\u5EFA\u751F\u6210\u955C\u50CF\u3002</p><p>\u5982\u679C\u4F7F\u7528 <code>build</code> \u6307\u4EE4\uFF0C\u5728 <code>Dockerfile</code> \u4E2D\u8BBE\u7F6E\u7684\u9009\u9879(\u4F8B\u5982\uFF1A<code>CMD</code>, <code>EXPOSE</code>, <code>VOLUME</code>, <code>ENV</code> \u7B49) \u5C06\u4F1A\u81EA\u52A8\u88AB\u83B7\u53D6\uFF0C\u65E0\u9700\u5728 <code>docker-compose.yml</code> \u4E2D\u91CD\u590D\u8BBE\u7F6E\u3002</p><p>\u4E0B\u9762\u5206\u522B\u4ECB\u7ECD\u5404\u4E2A\u6307\u4EE4\u7684\u7528\u6CD5\u3002</p><h4 id="build" tabindex="-1"><a class="header-anchor" href="#build" aria-hidden="true">#</a> <code>build</code></h4><p>\u6307\u5B9A <code>Dockerfile</code> \u6240\u5728\u6587\u4EF6\u5939\u7684\u8DEF\u5F84\uFF08\u53EF\u4EE5\u662F\u7EDD\u5BF9\u8DEF\u5F84\uFF0C\u6216\u8005\u76F8\u5BF9 docker-compose.yml \u6587\u4EF6\u7684\u8DEF\u5F84\uFF09\u3002 <code>Compose</code> \u5C06\u4F1A\u5229\u7528\u5B83\u81EA\u52A8\u6784\u5EFA\u8FD9\u4E2A\u955C\u50CF\uFF0C\u7136\u540E\u4F7F\u7528\u8FD9\u4E2A\u955C\u50CF\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>

  <span class="token key atrule">webapp</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./dir
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u4F60\u4E5F\u53EF\u4EE5\u4F7F\u7528 <code>context</code> \u6307\u4EE4\u6307\u5B9A <code>Dockerfile</code> \u6240\u5728\u6587\u4EF6\u5939\u7684\u8DEF\u5F84\u3002</p><p>\u4F7F\u7528 <code>dockerfile</code> \u6307\u4EE4\u6307\u5B9A <code>Dockerfile</code> \u6587\u4EF6\u540D\u3002</p><p>\u4F7F\u7528 <code>arg</code> \u6307\u4EE4\u6307\u5B9A\u6784\u5EFA\u955C\u50CF\u65F6\u7684\u53D8\u91CF\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>

  <span class="token key atrule">webapp</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./dir
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile<span class="token punctuation">-</span>alternate
      <span class="token key atrule">args</span><span class="token punctuation">:</span>
        <span class="token key atrule">buildno</span><span class="token punctuation">:</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="command" tabindex="-1"><a class="header-anchor" href="#command" aria-hidden="true">#</a> <code>command</code></h4><p>\u8986\u76D6\u5BB9\u5668\u542F\u52A8\u540E\u9ED8\u8BA4\u6267\u884C\u7684\u547D\u4EE4\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">command</span><span class="token punctuation">:</span> echo &quot;hello world&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="container-name" tabindex="-1"><a class="header-anchor" href="#container-name" aria-hidden="true">#</a> <code>container_name</code></h4><p>\u6307\u5B9A\u5BB9\u5668\u540D\u79F0\u3002\u9ED8\u8BA4\u5C06\u4F1A\u4F7F\u7528 <code>\u9879\u76EE\u540D\u79F0_\u670D\u52A1\u540D\u79F0_\u5E8F\u53F7</code> \u8FD9\u6837\u7684\u683C\u5F0F\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">container_name</span><span class="token punctuation">:</span> docker<span class="token punctuation">-</span>web<span class="token punctuation">-</span>container
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>\u6CE8\u610F: \u6307\u5B9A\u5BB9\u5668\u540D\u79F0\u540E\uFF0C\u8BE5\u670D\u52A1\u5C06\u65E0\u6CD5\u8FDB\u884C\u6269\u5C55\uFF08scale\uFF09\uFF0C\u56E0\u4E3A Docker \u4E0D\u5141\u8BB8\u591A\u4E2A\u5BB9\u5668\u5177\u6709\u76F8\u540C\u7684\u540D\u79F0\u3002</p></blockquote><h4 id="depends-on" tabindex="-1"><a class="header-anchor" href="#depends-on" aria-hidden="true">#</a> <code>depends_on</code></h4><p>\u89E3\u51B3\u5BB9\u5668\u7684\u4F9D\u8D56\u3001\u542F\u52A8\u5148\u540E\u7684\u95EE\u9898\u3002\u4EE5\u4E0B\u4F8B\u5B50\u4E2D\u4F1A\u5148\u542F\u52A8 <code>redis</code> <code>db</code> \u518D\u542F\u52A8 <code>web</code></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3&#39;</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> .
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db
      <span class="token punctuation">-</span> redis

  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis

  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>\u6CE8\u610F\uFF1A<code>web</code> \u670D\u52A1\u4E0D\u4F1A\u7B49\u5F85 <code>redis</code> <code>db</code> \u300C\u5B8C\u5168\u542F\u52A8\u300D\u4E4B\u540E\u624D\u542F\u52A8\u3002</p></blockquote><h4 id="env-file" tabindex="-1"><a class="header-anchor" href="#env-file" aria-hidden="true">#</a> <code>env_file</code></h4><p>\u4ECE\u6587\u4EF6\u4E2D\u83B7\u53D6\u73AF\u5883\u53D8\u91CF\uFF0C\u53EF\u4EE5\u4E3A\u5355\u72EC\u7684\u6587\u4EF6\u8DEF\u5F84\u6216\u5217\u8868\u3002</p><p>\u5982\u679C\u901A\u8FC7 <code>docker-compose -f FILE</code> \u65B9\u5F0F\u6765\u6307\u5B9A Compose \u6A21\u677F\u6587\u4EF6\uFF0C\u5219 <code>env_file</code> \u4E2D\u53D8\u91CF\u7684\u8DEF\u5F84\u4F1A\u57FA\u4E8E\u6A21\u677F\u6587\u4EF6\u8DEF\u5F84\u3002</p><p>\u5982\u679C\u6709\u53D8\u91CF\u540D\u79F0\u4E0E <code>environment</code> \u6307\u4EE4\u51B2\u7A81\uFF0C\u5219\u6309\u7167\u60EF\u4F8B\uFF0C\u4EE5\u540E\u8005\u4E3A\u51C6\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>env_file: .env

env_file:
  - ./common.env
  - ./apps/web.env
  - /opt/secrets.env
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u73AF\u5883\u53D8\u91CF\u6587\u4EF6\u4E2D\u6BCF\u4E00\u884C\u5FC5\u987B\u7B26\u5408\u683C\u5F0F\uFF0C\u652F\u6301 <code>#</code> \u5F00\u5934\u7684\u6CE8\u91CA\u884C\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># common.env: Set development environment</span>
<span class="token assign-left variable">PROG_ENV</span><span class="token operator">=</span>development
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="environment" tabindex="-1"><a class="header-anchor" href="#environment" aria-hidden="true">#</a> <code>environment</code></h4><p>\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF\u3002\u4F60\u53EF\u4EE5\u4F7F\u7528\u6570\u7EC4\u6216\u5B57\u5178\u4E24\u79CD\u683C\u5F0F\u3002</p><p>\u53EA\u7ED9\u5B9A\u540D\u79F0\u7684\u53D8\u91CF\u4F1A\u81EA\u52A8\u83B7\u53D6\u8FD0\u884C Compose \u4E3B\u673A\u4E0A\u5BF9\u5E94\u53D8\u91CF\u7684\u503C\uFF0C\u53EF\u4EE5\u7528\u6765\u9632\u6B62\u6CC4\u9732\u4E0D\u5FC5\u8981\u7684\u6570\u636E\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">environment</span><span class="token punctuation">:</span>
  <span class="token key atrule">RACK_ENV</span><span class="token punctuation">:</span> development
  <span class="token key atrule">SESSION_SECRET</span><span class="token punctuation">:</span>

<span class="token key atrule">environment</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> RACK_ENV=development
  <span class="token punctuation">-</span> SESSION_SECRET
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div>`,102),T=s("\u5982\u679C\u53D8\u91CF\u540D\u79F0\u6216\u8005\u503C\u4E2D\u7528\u5230 "),I=n("code",null,"true|false\uFF0Cyes|no",-1),M=s(" \u7B49\u8868\u8FBE "),A={href:"https://yaml.org/type/bool.html",target:"_blank",rel:"noopener noreferrer"},P=s("\u5E03\u5C14"),z=s(" \u542B\u4E49\u7684\u8BCD\u6C47\uFF0C\u6700\u597D\u653E\u5230\u5F15\u53F7\u91CC\uFF0C\u907F\u514D YAML \u81EA\u52A8\u89E3\u6790\u67D0\u4E9B\u5185\u5BB9\u4E3A\u5BF9\u5E94\u7684\u5E03\u5C14\u8BED\u4E49\u3002\u8FD9\u4E9B\u7279\u5B9A\u8BCD\u6C47\uFF0C\u5305\u62EC"),L=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>y<span class="token operator">|</span>Y<span class="token operator">|</span><span class="token function">yes</span><span class="token operator">|</span>Yes<span class="token operator">|</span>YES<span class="token operator">|</span>n<span class="token operator">|</span>N<span class="token operator">|</span>no<span class="token operator">|</span>No<span class="token operator">|</span>NO<span class="token operator">|</span><span class="token boolean">true</span><span class="token operator">|</span>True<span class="token operator">|</span>TRUE<span class="token operator">|</span><span class="token boolean">false</span><span class="token operator">|</span>False<span class="token operator">|</span>FALSE<span class="token operator">|</span>on<span class="token operator">|</span>On<span class="token operator">|</span>ON<span class="token operator">|</span>off<span class="token operator">|</span>Off<span class="token operator">|</span>OFF
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="healthcheck" tabindex="-1"><a class="header-anchor" href="#healthcheck" aria-hidden="true">#</a> <code>healthcheck</code></h4><p>\u901A\u8FC7\u547D\u4EE4\u68C0\u67E5\u5BB9\u5668\u662F\u5426\u5065\u5EB7\u8FD0\u884C\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
  <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost&quot;</span><span class="token punctuation">]</span>
  <span class="token key atrule">interval</span><span class="token punctuation">:</span> 1m30s
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
  <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="image" tabindex="-1"><a class="header-anchor" href="#image" aria-hidden="true">#</a> <code>image</code></h4><p>\u6307\u5B9A\u4E3A\u955C\u50CF\u540D\u79F0\u6216\u955C\u50CF ID\u3002\u5982\u679C\u955C\u50CF\u5728\u672C\u5730\u4E0D\u5B58\u5728\uFF0C<code>Compose</code> \u5C06\u4F1A\u5C1D\u8BD5\u62C9\u53D6\u8FD9\u4E2A\u955C\u50CF\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">image</span><span class="token punctuation">:</span> ubuntu
<span class="token key atrule">image</span><span class="token punctuation">:</span> orchardup/postgresql
<span class="token key atrule">image</span><span class="token punctuation">:</span> a4bc65fd
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="networks" tabindex="-1"><a class="header-anchor" href="#networks" aria-hidden="true">#</a> <code>networks</code></h4><p>\u914D\u7F6E\u5BB9\u5668\u8FDE\u63A5\u7684\u7F51\u7EDC\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>

  <span class="token key atrule">some-service</span><span class="token punctuation">:</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
     <span class="token punctuation">-</span> some<span class="token punctuation">-</span>network
     <span class="token punctuation">-</span> other<span class="token punctuation">-</span>network

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">some-network</span><span class="token punctuation">:</span>
  <span class="token key atrule">other-network</span><span class="token punctuation">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="ports" tabindex="-1"><a class="header-anchor" href="#ports" aria-hidden="true">#</a> <code>ports</code></h4><p>\u66B4\u9732\u7AEF\u53E3\u4FE1\u606F\u3002</p><p>\u4F7F\u7528\u5BBF\u4E3B\u7AEF\u53E3\uFF1A\u5BB9\u5668\u7AEF\u53E3 <code>(HOST:CONTAINER)</code> \u683C\u5F0F\uFF0C\u6216\u8005\u4EC5\u4EC5\u6307\u5B9A\u5BB9\u5668\u7684\u7AEF\u53E3\uFF08\u5BBF\u4E3B\u5C06\u4F1A\u968F\u673A\u9009\u62E9\u7AEF\u53E3\uFF09\u90FD\u53EF\u4EE5\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">ports</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;3000&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;8000:8000&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;49100:22&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;127.0.0.1:8001:8001&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><em>\u6CE8\u610F\uFF1A\u5F53\u4F7F\u7528 <code>HOST:CONTAINER</code> \u683C\u5F0F\u6765\u6620\u5C04\u7AEF\u53E3\u65F6\uFF0C\u5982\u679C\u4F60\u4F7F\u7528\u7684\u5BB9\u5668\u7AEF\u53E3\u5C0F\u4E8E 60 \u5E76\u4E14\u6CA1\u653E\u5230\u5F15\u53F7\u91CC\uFF0C\u53EF\u80FD\u4F1A\u5F97\u5230\u9519\u8BEF\u7ED3\u679C\uFF0C\u56E0\u4E3A <code>YAML</code> \u4F1A\u81EA\u52A8\u89E3\u6790 <code>xx:yy</code> \u8FD9\u79CD\u6570\u5B57\u683C\u5F0F\u4E3A 60 \u8FDB\u5236\u3002\u4E3A\u907F\u514D\u51FA\u73B0\u8FD9\u79CD\u95EE\u9898\uFF0C\u5EFA\u8BAE\u6570\u5B57\u4E32\u90FD\u91C7\u7528\u5F15\u53F7\u5305\u62EC\u8D77\u6765\u7684\u5B57\u7B26\u4E32\u683C\u5F0F\u3002</em></p><h4 id="sysctls" tabindex="-1"><a class="header-anchor" href="#sysctls" aria-hidden="true">#</a> <code>sysctls</code></h4><p>\u914D\u7F6E\u5BB9\u5668\u5185\u6838\u53C2\u6570\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">sysctls</span><span class="token punctuation">:</span>
  <span class="token key atrule">net.core.somaxconn</span><span class="token punctuation">:</span> <span class="token number">1024</span>
  <span class="token key atrule">net.ipv4.tcp_syncookies</span><span class="token punctuation">:</span> <span class="token number">0</span>

<span class="token key atrule">sysctls</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> net.core.somaxconn=1024
  <span class="token punctuation">-</span> net.ipv4.tcp_syncookies=0
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="ulimits" tabindex="-1"><a class="header-anchor" href="#ulimits" aria-hidden="true">#</a> <code>ulimits</code></h4><p>\u6307\u5B9A\u5BB9\u5668\u7684 ulimits \u9650\u5236\u503C\u3002</p><p>\u4F8B\u5982\uFF0C\u6307\u5B9A\u6700\u5927\u8FDB\u7A0B\u6570\u4E3A 65535\uFF0C\u6307\u5B9A\u6587\u4EF6\u53E5\u67C4\u6570\u4E3A 20000\uFF08\u8F6F\u9650\u5236\uFF0C\u5E94\u7528\u53EF\u4EE5\u968F\u65F6\u4FEE\u6539\uFF0C\u4E0D\u80FD\u8D85\u8FC7\u786C\u9650\u5236\uFF09 \u548C 40000\uFF08\u7CFB\u7EDF\u786C\u9650\u5236\uFF0C\u53EA\u80FD root \u7528\u6237\u63D0\u9AD8\uFF09\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>  <span class="token key atrule">ulimits</span><span class="token punctuation">:</span>
    <span class="token key atrule">nproc</span><span class="token punctuation">:</span> <span class="token number">65535</span>
    <span class="token key atrule">nofile</span><span class="token punctuation">:</span>
      <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">20000</span>
      <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">40000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="volumes" tabindex="-1"><a class="header-anchor" href="#volumes" aria-hidden="true">#</a> <code>volumes</code></h4><p>\u6570\u636E\u5377\u6240\u6302\u8F7D\u8DEF\u5F84\u8BBE\u7F6E\u3002\u53EF\u4EE5\u8BBE\u7F6E\u4E3A\u5BBF\u4E3B\u673A\u8DEF\u5F84(<code>HOST:CONTAINER</code>)\u6216\u8005\u6570\u636E\u5377\u540D\u79F0(<code>VOLUME:CONTAINER</code>)\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8BBE\u7F6E\u8BBF\u95EE\u6A21\u5F0F \uFF08<code>HOST:CONTAINER:ro</code>\uFF09\u3002</p><p>\u8BE5\u6307\u4EE4\u4E2D\u8DEF\u5F84\u652F\u6301\u76F8\u5BF9\u8DEF\u5F84\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">volumes</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> /var/lib/mysql
 <span class="token punctuation">-</span> cache/<span class="token punctuation">:</span>/tmp/cache
 <span class="token punctuation">-</span> ~/configs<span class="token punctuation">:</span>/etc/configs/<span class="token punctuation">:</span>ro
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u5982\u679C\u8DEF\u5F84\u4E3A\u6570\u636E\u5377\u540D\u79F0\uFF0C\u5FC5\u987B\u5728\u6587\u4EF6\u4E2D\u914D\u7F6E\u6570\u636E\u5377\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3&quot;</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">my_src</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">8.0</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> mysql_data<span class="token punctuation">:</span>/var/lib/mysql

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">mysql_data</span><span class="token punctuation">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><hr><h3 id="_12-5-docker-compose-\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_12-5-docker-compose-\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> 12.5 docker-compose \u5E38\u7528\u547D\u4EE4</h3><h5 id="_1-\u547D\u4EE4\u5BF9\u8C61\u4E0E\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1-\u547D\u4EE4\u5BF9\u8C61\u4E0E\u683C\u5F0F" aria-hidden="true">#</a> 1. \u547D\u4EE4\u5BF9\u8C61\u4E0E\u683C\u5F0F</h5><p>\u5BF9\u4E8E Compose \u6765\u8BF4\uFF0C\u5927\u90E8\u5206\u547D\u4EE4\u7684\u5BF9\u8C61\u65E2\u53EF\u4EE5\u662F\u9879\u76EE\u672C\u8EAB\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u4E3A\u9879\u76EE\u4E2D\u7684\u670D\u52A1\u6216\u8005\u5BB9\u5668\u3002\u5982\u679C\u6CA1\u6709\u7279\u522B\u7684\u8BF4\u660E\uFF0C\u547D\u4EE4\u5BF9\u8C61\u5C06\u662F\u9879\u76EE\uFF0C\u8FD9\u610F\u5473\u7740\u9879\u76EE\u4E2D\u6240\u6709\u7684\u670D\u52A1\u90FD\u4F1A\u53D7\u5230\u547D\u4EE4\u5F71\u54CD\u3002</p><p>\u6267\u884C <code>docker-compose [COMMAND] --help</code> \u6216\u8005 <code>docker-compose help [COMMAND]</code> \u53EF\u4EE5\u67E5\u770B\u5177\u4F53\u67D0\u4E2A\u547D\u4EE4\u7684\u4F7F\u7528\u683C\u5F0F\u3002</p><p><code>docker-compose</code> \u547D\u4EE4\u7684\u57FA\u672C\u7684\u4F7F\u7528\u683C\u5F0F\u662F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker-compose</span> <span class="token punctuation">[</span>-f<span class="token operator">=</span><span class="token operator">&lt;</span>arg<span class="token operator">&gt;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARGS<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_2-\u547D\u4EE4\u9009\u9879" tabindex="-1"><a class="header-anchor" href="#_2-\u547D\u4EE4\u9009\u9879" aria-hidden="true">#</a> 2. \u547D\u4EE4\u9009\u9879</h5><ul><li><code>-f, --file FILE</code> \u6307\u5B9A\u4F7F\u7528\u7684 Compose \u6A21\u677F\u6587\u4EF6\uFF0C\u9ED8\u8BA4\u4E3A <code>docker-compose.yml</code>\uFF0C\u53EF\u4EE5\u591A\u6B21\u6307\u5B9A\u3002</li><li><code>-p, --project-name NAME</code> \u6307\u5B9A\u9879\u76EE\u540D\u79F0\uFF0C\u9ED8\u8BA4\u5C06\u4F7F\u7528\u6240\u5728\u76EE\u5F55\u540D\u79F0\u4F5C\u4E3A\u9879\u76EE\u540D\u3002</li><li><code>--x-networking</code> \u4F7F\u7528 Docker \u7684\u53EF\u62D4\u63D2\u7F51\u7EDC\u540E\u7AEF\u7279\u6027</li><li><code>--x-network-driver DRIVER</code> \u6307\u5B9A\u7F51\u7EDC\u540E\u7AEF\u7684\u9A71\u52A8\uFF0C\u9ED8\u8BA4\u4E3A <code>bridge</code></li><li><code>--verbose</code> \u8F93\u51FA\u66F4\u591A\u8C03\u8BD5\u4FE1\u606F\u3002</li><li><code>-v, --version</code> \u6253\u5370\u7248\u672C\u5E76\u9000\u51FA\u3002</li></ul><h5 id="_3-\u547D\u4EE4\u4F7F\u7528\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_3-\u547D\u4EE4\u4F7F\u7528\u8BF4\u660E" aria-hidden="true">#</a> 3.\u547D\u4EE4\u4F7F\u7528\u8BF4\u660E</h5><h5 id="up" tabindex="-1"><a class="header-anchor" href="#up" aria-hidden="true">#</a> <code>up</code></h5><p>\u683C\u5F0F\u4E3A <code>docker-compose up [options] [SERVICE...]</code>\u3002</p><ul><li><p>\u8BE5\u547D\u4EE4\u5341\u5206\u5F3A\u5927\uFF0C\u5B83\u5C06\u5C1D\u8BD5\u81EA\u52A8\u5B8C\u6210\u5305\u62EC\u6784\u5EFA\u955C\u50CF\uFF0C\uFF08\u91CD\u65B0\uFF09\u521B\u5EFA\u670D\u52A1\uFF0C\u542F\u52A8\u670D\u52A1\uFF0C\u5E76\u5173\u8054\u670D\u52A1\u76F8\u5173\u5BB9\u5668\u7684\u4E00\u7CFB\u5217\u64CD\u4F5C\u3002</p></li><li><p>\u94FE\u63A5\u7684\u670D\u52A1\u90FD\u5C06\u4F1A\u88AB\u81EA\u52A8\u542F\u52A8\uFF0C\u9664\u975E\u5DF2\u7ECF\u5904\u4E8E\u8FD0\u884C\u72B6\u6001\u3002</p></li><li><p>\u53EF\u4EE5\u8BF4\uFF0C\u5927\u90E8\u5206\u65F6\u5019\u90FD\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u8BE5\u547D\u4EE4\u6765\u542F\u52A8\u4E00\u4E2A\u9879\u76EE\u3002</p></li><li><p>\u9ED8\u8BA4\u60C5\u51B5\uFF0C<code>docker-compose up</code> \u542F\u52A8\u7684\u5BB9\u5668\u90FD\u5728\u524D\u53F0\uFF0C\u63A7\u5236\u53F0\u5C06\u4F1A\u540C\u65F6\u6253\u5370\u6240\u6709\u5BB9\u5668\u7684\u8F93\u51FA\u4FE1\u606F\uFF0C\u53EF\u4EE5\u5F88\u65B9\u4FBF\u8FDB\u884C\u8C03\u8BD5\u3002</p></li><li><p>\u5F53\u901A\u8FC7 <code>Ctrl-C</code> \u505C\u6B62\u547D\u4EE4\u65F6\uFF0C\u6240\u6709\u5BB9\u5668\u5C06\u4F1A\u505C\u6B62\u3002</p></li><li><p>\u5982\u679C\u4F7F\u7528 <code>docker-compose up -d</code>\uFF0C\u5C06\u4F1A\u5728\u540E\u53F0\u542F\u52A8\u5E76\u8FD0\u884C\u6240\u6709\u7684\u5BB9\u5668\u3002\u4E00\u822C\u63A8\u8350\u751F\u4EA7\u73AF\u5883\u4E0B\u4F7F\u7528\u8BE5\u9009\u9879\u3002</p></li><li><p>\u9ED8\u8BA4\u60C5\u51B5\uFF0C\u5982\u679C\u670D\u52A1\u5BB9\u5668\u5DF2\u7ECF\u5B58\u5728\uFF0C<code>docker-compose up</code> \u5C06\u4F1A\u5C1D\u8BD5\u505C\u6B62\u5BB9\u5668\uFF0C\u7136\u540E\u91CD\u65B0\u521B\u5EFA\uFF08\u4FDD\u6301\u4F7F\u7528 <code>volumes-from</code> \u6302\u8F7D\u7684\u5377\uFF09\uFF0C\u4EE5\u4FDD\u8BC1\u65B0\u542F\u52A8\u7684\u670D\u52A1\u5339\u914D <code>docker-compose.yml</code> \u6587\u4EF6\u7684\u6700\u65B0\u5185\u5BB9</p></li></ul><hr><h5 id="down" tabindex="-1"><a class="header-anchor" href="#down" aria-hidden="true">#</a> <code>down</code></h5><ul><li>\u6B64\u547D\u4EE4\u5C06\u4F1A\u505C\u6B62 <code>up</code> \u547D\u4EE4\u6240\u542F\u52A8\u7684\u5BB9\u5668\uFF0C\u5E76\u79FB\u9664\u7F51\u7EDC</li></ul><hr><h5 id="exec" tabindex="-1"><a class="header-anchor" href="#exec" aria-hidden="true">#</a> <code>exec</code></h5><ul><li>\u8FDB\u5165\u6307\u5B9A\u7684\u5BB9\u5668\u3002</li></ul><hr><h5 id="ps" tabindex="-1"><a class="header-anchor" href="#ps" aria-hidden="true">#</a> <code>ps</code></h5><p>\u683C\u5F0F\u4E3A <code>docker-compose ps [options] [SERVICE...]</code>\u3002</p><p>\u5217\u51FA\u9879\u76EE\u4E2D\u76EE\u524D\u7684\u6240\u6709\u5BB9\u5668\u3002</p><p>\u9009\u9879\uFF1A</p><ul><li><code>-q</code> \u53EA\u6253\u5370\u5BB9\u5668\u7684 ID \u4FE1\u606F\u3002</li></ul><hr><h5 id="restart" tabindex="-1"><a class="header-anchor" href="#restart" aria-hidden="true">#</a> <code>restart</code></h5><p>\u683C\u5F0F\u4E3A <code>docker-compose restart [options] [SERVICE...]</code>\u3002</p><p>\u91CD\u542F\u9879\u76EE\u4E2D\u7684\u670D\u52A1\u3002</p><p>\u9009\u9879\uFF1A</p><ul><li><code>-t, --timeout TIMEOUT</code> \u6307\u5B9A\u91CD\u542F\u524D\u505C\u6B62\u5BB9\u5668\u7684\u8D85\u65F6\uFF08\u9ED8\u8BA4\u4E3A 10 \u79D2\uFF09\u3002</li></ul><hr><h5 id="rm" tabindex="-1"><a class="header-anchor" href="#rm" aria-hidden="true">#</a> <code>rm</code></h5><p>\u683C\u5F0F\u4E3A <code>docker-compose rm [options] [SERVICE...]</code>\u3002</p><p>\u5220\u9664\u6240\u6709\uFF08\u505C\u6B62\u72B6\u6001\u7684\uFF09\u670D\u52A1\u5BB9\u5668\u3002\u63A8\u8350\u5148\u6267\u884C <code>docker-compose stop</code> \u547D\u4EE4\u6765\u505C\u6B62\u5BB9\u5668\u3002</p><p>\u9009\u9879\uFF1A</p><ul><li><code>-f, --force</code> \u5F3A\u5236\u76F4\u63A5\u5220\u9664\uFF0C\u5305\u62EC\u975E\u505C\u6B62\u72B6\u6001\u7684\u5BB9\u5668\u3002\u4E00\u822C\u5C3D\u91CF\u4E0D\u8981\u4F7F\u7528\u8BE5\u9009\u9879\u3002</li><li><code>-v</code> \u5220\u9664\u5BB9\u5668\u6240\u6302\u8F7D\u7684\u6570\u636E\u5377\u3002</li></ul><hr><h5 id="start" tabindex="-1"><a class="header-anchor" href="#start" aria-hidden="true">#</a> <code>start</code></h5><p>\u683C\u5F0F\u4E3A <code>docker-compose start [SERVICE...]</code>\u3002</p><p>\u542F\u52A8\u5DF2\u7ECF\u5B58\u5728\u7684\u670D\u52A1\u5BB9\u5668\u3002</p><hr><h5 id="stop" tabindex="-1"><a class="header-anchor" href="#stop" aria-hidden="true">#</a> <code>stop</code></h5><p>\u683C\u5F0F\u4E3A <code>docker-compose stop [options] [SERVICE...]</code>\u3002</p><p>\u505C\u6B62\u5DF2\u7ECF\u5904\u4E8E\u8FD0\u884C\u72B6\u6001\u7684\u5BB9\u5668\uFF0C\u4F46\u4E0D\u5220\u9664\u5B83\u3002\u901A\u8FC7 <code>docker-compose start</code> \u53EF\u4EE5\u518D\u6B21\u542F\u52A8\u8FD9\u4E9B\u5BB9\u5668\u3002</p><p>\u9009\u9879\uFF1A</p><ul><li><code>-t, --timeout TIMEOUT</code> \u505C\u6B62\u5BB9\u5668\u65F6\u5019\u7684\u8D85\u65F6\uFF08\u9ED8\u8BA4\u4E3A 10 \u79D2\uFF09\u3002</li></ul><hr><h5 id="top" tabindex="-1"><a class="header-anchor" href="#top" aria-hidden="true">#</a> <code>top</code></h5><p>\u67E5\u770B\u5404\u4E2A\u670D\u52A1\u5BB9\u5668\u5185\u8FD0\u884C\u7684\u8FDB\u7A0B\u3002</p><hr><h5 id="unpause" tabindex="-1"><a class="header-anchor" href="#unpause" aria-hidden="true">#</a> <code>unpause</code></h5><p>\u683C\u5F0F\u4E3A <code>docker-compose unpause [SERVICE...]</code>\u3002</p><p>\u6062\u590D\u5904\u4E8E\u6682\u505C\u72B6\u6001\u4E2D\u7684\u670D\u52A1\u3002</p><hr><h2 id="_13-docker\u53EF\u89C6\u5316\u5DE5\u5177" tabindex="-1"><a class="header-anchor" href="#_13-docker\u53EF\u89C6\u5316\u5DE5\u5177" aria-hidden="true">#</a> 13.docker\u53EF\u89C6\u5316\u5DE5\u5177</h2><h4 id="_13-1-\u5B89\u88C5portainer" tabindex="-1"><a class="header-anchor" href="#_13-1-\u5B89\u88C5portainer" aria-hidden="true">#</a> 13.1 \u5B89\u88C5Portainer</h4>`,85),U=s("\u5B98\u65B9\u5B89\u88C5\u8BF4\u660E\uFF1A"),V={href:"http://www.yunweipai.com/go?_=8fe4813824aHR0cHM6Ly93d3cucG9ydGFpbmVyLmlvL2luc3RhbGxhdGlvbi8=",target:"_blank",rel:"noopener noreferrer"},Y=s("https://www.portainer.io/installation/"),W=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@ubuntu1804 ~<span class="token punctuation">]</span><span class="token comment">#docker pull  portainer/portainer</span>

<span class="token punctuation">[</span>root@ubuntu1804 ~<span class="token punctuation">]</span><span class="token comment">#docker volume create portainer_data</span>
portainer_data
<span class="token punctuation">[</span>root@ubuntu1804 ~<span class="token punctuation">]</span><span class="token comment">#docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer</span>
20db26b67b791648c2ef6aee444a5226a9c897ebcf0160050e722dbf4a4906e3
<span class="token punctuation">[</span>root@ubuntu1804 ~<span class="token punctuation">]</span><span class="token comment">#docker ps </span>
CONTAINER ID        IMAGE                 COMMAND             CREATED             STATUS              PORTS                                            NAMES
20db26b67b79        portainer/portainer   <span class="token string">&quot;/portainer&quot;</span>        <span class="token number">5</span> seconds ago       Up <span class="token number">4</span> seconds        <span class="token number">0.0</span>.0.0:8000-<span class="token operator">&gt;</span><span class="token number">8000</span>/tcp, <span class="token number">0.0</span>.0.0:9000-<span class="token operator">&gt;</span><span class="token number">9000</span>/tcp   portainer
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_13-2-\u767B\u5F55\u548C\u4F7F\u7528portainer" tabindex="-1"><a class="header-anchor" href="#_13-2-\u767B\u5F55\u548C\u4F7F\u7528portainer" aria-hidden="true">#</a> 13.2 \u767B\u5F55\u548C\u4F7F\u7528Portainer</h4><blockquote><p>\u7528\u6D4F\u89C8\u5668\u8BBF\u95EE\uFF1A<code>http://localhost:9000</code></p></blockquote><p><img src="https://chen-coding.oss-cn-shenzhen.aliyuncs.com/server/container /01/image-20201223231707738.png" alt="image-20201223231707738" loading="lazy"></p><hr>`,5);function $(F,G){const a=r("ExternalLinkIcon");return c(),o(l,null,[d,n("blockquote",null,[n("p",null,[n("a",u,[b,e(a)])]),n("p",null,[n("a",m,[k,e(a)])]),n("p",null,[n("a",h,[g,e(a)])])]),v,n("p",null,[y,n("a",f,[x,e(a)]),_,q,w,D,O,R,E,S,C]),N,n("p",null,[T,I,M,n("a",A,[P,e(a)]),z]),L,n("p",null,[U,n("a",V,[Y,e(a)])]),W],64)}var H=p(i,[["render",$],["__file","Docker.html.vue"]]);export{H as default};
